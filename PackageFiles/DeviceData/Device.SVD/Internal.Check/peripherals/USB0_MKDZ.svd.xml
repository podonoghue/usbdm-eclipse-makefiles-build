<!--
Devices using this peripheral: 
      MK20DZ10
      MK40DZ10
      MK50DZ10
      MK51DZ10
      MK52DZ10
      MK53DZ10
      MK60DZ10
-->
      <peripheral>
         <?sourceFile "USB0_MKDZ" ?>
         <?forcedBlockWidth "32" ?>
         <name>USB0</name>
         <description>Universal Serial Bus, OTG Capable Controller</description>
         <prependToName>USB0</prependToName>
         <baseAddress>0x40072000</baseAddress>
         <size>32</size>
         <access>read-write</access>
         <resetValue>0x0</resetValue>
         <resetMask>0xFFFFFFFF</resetMask>
         <addressBlock>
            <?width "8" ?>
            <offset>0x0</offset>
            <size>0x20</size>
            <usage>registers</usage>
         </addressBlock>
         <addressBlock>
            <?width "8" ?>
            <offset>0x80</offset>
            <size>0x38</size>
            <usage>registers</usage>
         </addressBlock>
         <addressBlock>
            <?width "8" ?>
            <offset>0xC0</offset>
            <size>0x50</size>
            <usage>registers</usage>
         </addressBlock>
         <registers>
            <register>
               <name>PERID</name>
               <description>Peripheral ID Register</description>
               <addressOffset>0x0</addressOffset>
               <size>8</size>
               <access>read-only</access>
               <resetValue>0x4</resetValue>
               <resetMask>0xFF</resetMask>
               <fields>
                  <field>
                     <name>ID</name>
                     <description>Peripheral Identification</description>
                     <bitOffset>0</bitOffset>
                     <bitWidth>6</bitWidth>
                  </field>
               </fields>
            </register>
            <register>
               <name>IDCOMP</name>
               <description>Peripheral ID Complement Register</description>
               <addressOffset>0x4</addressOffset>
               <size>8</size>
               <access>read-only</access>
               <resetValue>0xFB</resetValue>
               <resetMask>0xFF</resetMask>
               <fields>
                  <field>
                     <name>NID</name>
                     <description>Ones complement of peripheral identification bits</description>
                     <bitOffset>0</bitOffset>
                     <bitWidth>6</bitWidth>
                  </field>
               </fields>
            </register>
            <register>
               <name>REV</name>
               <description>Peripheral Revision Register</description>
               <addressOffset>0x8</addressOffset>
               <size>8</size>
               <access>read-only</access>
               <resetValue>0x33</resetValue>
               <resetMask>0xFF</resetMask>
               <fields>
                  <field>
                     <name>REV</name>
                     <description>Revision</description>
                     <bitOffset>0</bitOffset>
                  </field>
               </fields>
            </register>
            <register>
               <name>ADDINFO</name>
               <description>Peripheral Additional Info Register</description>
               <addressOffset>0xC</addressOffset>
               <size>8</size>
               <access>read-only</access>
               <resetValue>0x1</resetValue>
               <resetMask>0xFF</resetMask>
               <fields>
                  <field>
                     <name>IEHOST</name>
                     <description>USB operating mode</description>
                     <bitOffset>0</bitOffset>
                     <bitWidth>1</bitWidth>
                     <enumeratedValues>
                        <enumeratedValue>
                           <name>0b0</name>
                           <description>Device Mode</description>
                           <value>0b0</value>
                        </enumeratedValue>
                        <enumeratedValue>
                           <name>0b1</name>
                           <description>Host mode</description>
                           <value>0b1</value>
                        </enumeratedValue>
                     </enumeratedValues>
                  </field>
                  <field>
                     <name>IRQNUM</name>
                     <description>Assigned Interrupt Request Number</description>
                     <bitOffset>3</bitOffset>
                     <bitWidth>5</bitWidth>
                  </field>
               </fields>
            </register>
            <register>
               <name>OTGISTAT</name>
               <description>OTG Interrupt Status Register\n
The OTG Interrupt Status Register records changes of the ID sense and VBUS signals\n
Only bits that have changed since the last software read are set\n
Writing a one to a bit clears the associated interrupt</description>
               <addressOffset>0x10</addressOffset>
               <size>8</size>
               <resetMask>0xFF</resetMask>
               <fields>
                  <field>
                     <name>AVBUSCHG</name>
                     <description>VBUS A change\n
This bit is set when a change in VBUS is detected on an A device</description>
                     <bitOffset>0</bitOffset>
                     <bitWidth>1</bitWidth>
                     <enumeratedValues>
                        <enumeratedValue>
                           <name>0b0</name>
                           <description>Not detected</description>
                           <value>0b0</value>
                        </enumeratedValue>
                        <enumeratedValue>
                           <name>0b1</name>
                           <description>Detected</description>
                           <value>0b1</value>
                        </enumeratedValue>
                     </enumeratedValues>
                  </field>
                  <field derivedFrom="AVBUSCHG" > <name>B_SESS_CHG</name> <description>VBUS B change\n
This bit is set when a change in VBUS is detected on a B device</description> <bitOffset>2</bitOffset> </field>
                  <field derivedFrom="AVBUSCHG" > <name>SESSVLDCHG</name> <description>Session Valid change\n
This bit is set when a change in VBUS is detected indicating a session valid or a session no longer valid</description> <bitOffset>3</bitOffset> </field>
                  <field derivedFrom="AVBUSCHG" > <name>LINE_STATE_CHG</name> <description>USB Line change\n
This bit is set when the USB line state changes\n
The interrupt associated with this bit can be used to detect Reset, Resume, Connect, and Data Line Pulse signaling</description> <bitOffset>5</bitOffset> </field>
                  <field derivedFrom="AVBUSCHG" > <name>ONEMSEC</name> <description>1ms Timer expired\n
This bit is set when the 1 millisecond timer expires.\n
This bit stays asserted until cleared by software.\n
The interrupt must be serviced every millisecond to avoid losing 1msec counts</description> <bitOffset>6</bitOffset> </field>
                  <field derivedFrom="AVBUSCHG" > <name>IDCHG</name> <description>ID Change\n
This bit is set when a change in the ID Signal from the USB connector is sensed</description> <bitOffset>7</bitOffset> </field>
               </fields>
            </register>
            <register>
               <name>OTGICR</name>
               <description>OTG Interrupt Control Register\n
The OTG Interrupt Control Register enables the corresponding interrupt status bits defined in the OTG
Interrupt Status Register</description>
               <addressOffset>0x14</addressOffset>
               <size>8</size>
               <resetMask>0xFF</resetMask>
               <fields>
                  <field>
                     <name>AVBUSEN</name>
                     <description>VBUS A Interrupt\n
Enables VBUS A Change interrupts</description>
                     <bitOffset>0</bitOffset>
                     <bitWidth>1</bitWidth>
                     <enumeratedValues>
                        <enumeratedValue>
                           <name>0b0</name>
                           <description>Disabled</description>
                           <value>0b0</value>
                        </enumeratedValue>
                        <enumeratedValue>
                           <name>0b1</name>
                           <description>Enabled</description>
                           <value>0b1</value>
                        </enumeratedValue>
                     </enumeratedValues>
                  </field>
                  <field derivedFrom="AVBUSEN" > <name>BSESSEN</name> <description>VBUS B Interrupt\n
Enables VBUS B Change interrupts</description> <bitOffset>2</bitOffset> </field>
                  <field derivedFrom="AVBUSEN" > <name>SESSVLDEN</name> <description>Session Valid Interrupt\n
Enables Session Valid interrupts</description> <bitOffset>3</bitOffset> </field>
                  <field derivedFrom="AVBUSEN" > <name>LINESTATEEN</name> <description>Line State Change Interrupt\n
Enables Line State Change interrupts</description> <bitOffset>5</bitOffset> </field>
                  <field derivedFrom="AVBUSEN" > <name>ONEMSECEN</name> <description>1ms Interrupt\n
Enables One Millisecond Interrupts</description> <bitOffset>6</bitOffset> </field>
                  <field derivedFrom="AVBUSEN" > <name>IDEN</name> <description>ID Interrupt\n
Enables change in the ID Signal Interrupts</description> <bitOffset>7</bitOffset> </field>
               </fields>
            </register>
            <register>
               <name>OTGSTAT</name>
               <description>OTG Status Register</description>
               <addressOffset>0x18</addressOffset>
               <size>8</size>
               <resetMask>0xFF</resetMask>
               <fields>
                  <field>
                     <name>AVBUSVLD</name>
                     <description>VBUS A Status\nIndicates if the VBUS voltage is above the A VBUS Valid threshold</description>
                     <bitOffset>0</bitOffset>
                     <bitWidth>1</bitWidth>
                     <enumeratedValues>
                        <enumeratedValue>
                           <name>0b0</name>
                           <description>Invalid</description>
                           <value>0b0</value>
                        </enumeratedValue>
                        <enumeratedValue>
                           <name>0b1</name>
                           <description>Valid</description>
                           <value>0b1</value>
                        </enumeratedValue>
                     </enumeratedValues>
                  </field>
                  <field>
                     <name>BSESSEND</name>
                     <description>Session B End\nIndicates if the VBUS voltage is above the B session end threshold</description>
                     <bitOffset>2</bitOffset>
                     <bitWidth>1</bitWidth>
                     <enumeratedValues>
                        <enumeratedValue>
                           <name>0b0</name>
                           <description>Invalid</description>
                           <value>0b0</value>
                        </enumeratedValue>
                        <enumeratedValue>
                           <name>0b1</name>
                           <description>Valid</description>
                           <value>0b1</value>
                        </enumeratedValue>
                     </enumeratedValues>
                  </field>
                  <field>
                     <name>SESS_VLD</name>
                     <description>Session Valid\nIndicates if the VBUS voltage is below the B session valid threshold</description>
                     <bitOffset>3</bitOffset>
                     <bitWidth>1</bitWidth>
                     <enumeratedValues>
                        <enumeratedValue>
                           <name>0b0</name>
                           <description>Invalid</description>
                           <value>0b0</value>
                        </enumeratedValue>
                        <enumeratedValue>
                           <name>0b1</name>
                           <description>valid</description>
                           <value>0b1</value>
                        </enumeratedValue>
                     </enumeratedValues>
                  </field>
                  <field>
                     <name>LINESTATESTABLE</name>
                     <description>Line state stable for &gt; 1ms\n
Indicates that the internal signals that control the LINE_STATE_CHG field of OTGISTAT are stable for at least 1 millisecond.\n
First read LINE_STATE_CHG field and then read this field.\n
If this field reads as 1, then the value of LINE_STATE_CHG can be considered stable</description>
                     <bitOffset>5</bitOffset>
                     <bitWidth>1</bitWidth>
                     <enumeratedValues>
                        <enumeratedValue>
                           <name>0b0</name>
                           <description>Not stable</description>
                           <value>0b0</value>
                        </enumeratedValue>
                        <enumeratedValue>
                           <name>0b1</name>
                           <description>Stable</description>
                           <value>0b1</value>
                        </enumeratedValue>
                     </enumeratedValues>
                  </field>
                  <field>
                     <name>ONEMSECEN</name>
                     <description>This bit is reserved for the 1ms count, but it is not useful to software</description>
                     <bitOffset>6</bitOffset>
                     <bitWidth>1</bitWidth>
                  </field>
                  <field>
                     <name>ID</name>
                     <description>ID pin of USB connector</description>
                     <bitOffset>7</bitOffset>
                     <bitWidth>1</bitWidth>
                     <enumeratedValues>
                        <enumeratedValue>
                           <name>0b0</name>
                           <description>Type A cable</description>
                           <value>0b0</value>
                        </enumeratedValue>
                        <enumeratedValue>
                           <name>0b1</name>
                           <description>Type B or no cable</description>
                           <value>0b1</value>
                        </enumeratedValue>
                     </enumeratedValues>
                  </field>
               </fields>
            </register>
            <register>
               <name>OTGCTL</name>
               <description>OTG Control Register</description>
               <addressOffset>0x1C</addressOffset>
               <size>8</size>
               <resetMask>0xFF</resetMask>
               <fields>
                  <field>
                     <name>OTGEN</name>
                     <description>On-The-Go pull-up/down enable\n
If disabled the pull-up/down resistors are controlled according to CTL.HOST_MODE settings\n
If enabled the values in this register control the pull-up/downs</description>
                     <bitOffset>2</bitOffset>
                     <bitWidth>1</bitWidth>
                     <enumeratedValues>
                        <enumeratedValue>
                           <name>0b0</name>
                           <description>Automatic control</description>
                           <value>0b0</value>
                        </enumeratedValue>
                        <enumeratedValue>
                           <name>0b1</name>
                           <description>Controlled by OTCTL</description>
                           <value>0b1</value>
                        </enumeratedValue>
                     </enumeratedValues>
                  </field>
                  <field>
                     <name>DMLOW</name>
                     <description>D- Data Line pull-down enable</description>
                     <bitOffset>4</bitOffset>
                     <bitWidth>1</bitWidth>
                     <enumeratedValues>
                        <enumeratedValue>
                           <name>0b0</name>
                           <description>Disabled</description>
                           <value>0b0</value>
                        </enumeratedValue>
                        <enumeratedValue>
                           <name>0b1</name>
                           <description>Enabled</description>
                           <value>0b1</value>
                        </enumeratedValue>
                     </enumeratedValues>
                  </field>
                  <field derivedFrom="DMLOW" > <name>DPLOW</name> <description>D+ Data Line pull-down enable</description> <bitOffset>5</bitOffset> </field>
                  <field derivedFrom="DMLOW" > <name>DPHIGH</name> <description>D+ Data Line pullup enable</description> <bitOffset>7</bitOffset> </field>
               </fields>
            </register>
            <register>
               <name>ISTAT</name>
               <description>Interrupt Status Register\n
The Interrupt Status Register contains bits for each of the interrupt sources within the USB Module.\n
Each of these bits are qualified with their respective interrupt enable bits</description>
               <addressOffset>0x80</addressOffset>
               <size>8</size>
               <resetMask>0xFF</resetMask>
               <fields>
                  <field>
                     <name>USBRST</name>
                     <description>USB reset\n
This bit is set when the USB Module has decoded a valid USB reset.\n
USBRST is set after a USB reset has been detected for 2.5 microseconds.\n
It is not asserted again until the USB reset condition has been removed and then reasserted</description>
                     <bitOffset>0</bitOffset>
                     <bitWidth>1</bitWidth>
                     <enumeratedValues>
                        <enumeratedValue>
                           <name>0b0</name>
                           <description>Interrupt inactive</description>
                           <value>0b0</value>
                        </enumeratedValue>
                        <enumeratedValue>
                           <name>0b1</name>
                           <description>Interrupt active</description>
                           <value>0b1</value>
                        </enumeratedValue>
                     </enumeratedValues>
                  </field>
                  <field derivedFrom="USBRST" > <name>ERROR</name> <description>Error Status set\n
This bit is set when any of the error conditions within Error Interrupt Status (ERRSTAT) register occur.\n
The processor must then read the ERRSTAT register to determine the source of the error</description> <bitOffset>1</bitOffset> </field>
                  <field derivedFrom="USBRST" > <name>SOFTOK</name> <description>Start Of Frame\n
This bit is set when the USB Module receives a Start Of Frame (SOF) token.\n
In Host mode this field is set when the SOF threshold is reached, so that software can prepare for the next SOF</description> <bitOffset>2</bitOffset> </field>
                  <field derivedFrom="USBRST" > <name>TOKDNE</name> <description>Token Done\n
This bit is set when the current token being processed has completed.\n
The processor should immediately read the STAT register to determine the EndPoint and BD used for this token.\n
Clearing this bit (by writing a one) causes the STAT register to be cleared or the STAT holding register to be loaded into the STAT register</description> <bitOffset>3</bitOffset> </field>
                  <field derivedFrom="USBRST" > <name>SLEEP</name> <description>Sleep timer\n
This bit is set when the USB Module detects a constant idle on the USB bus for 3 ms.\n
The sleep timer is reset by activity on the USB bus</description> <bitOffset>4</bitOffset> </field>
                  <field derivedFrom="USBRST" > <name>RESUME</name> <description>Resume detect\n
This bit is set depending upon the DP/DM signals, and can be used to signal remote wake-up signaling on the USB bus.\n
When not in suspend mode this interrupt must be disabled</description> <bitOffset>5</bitOffset> </field>
                  <field derivedFrom="USBRST" > <name>ATTACH</name> <description>Attach detect\nAttach Interrupt</description> <bitOffset>6</bitOffset> </field>
                  <field derivedFrom="USBRST" > <name>STALL</name> <description>Stall detected\nStall Interrupt</description> <bitOffset>7</bitOffset> </field>
               </fields>
            </register>
            <register>
               <name>INTEN</name>
               <description>Interrupt Enable Register\n
The Interrupt Enable Register contains enable bits for each of the interrupt sources within the USB Module.\n
Setting any of these bits enables the respective interrupt source in the INT_STAT register</description>
               <addressOffset>0x84</addressOffset>
               <size>8</size>
               <resetMask>0xFF</resetMask>
               <fields>
                  <field>
                     <name>USBRSTEN</name>
                     <description>USBRST Interrupt Enable</description>
                     <bitOffset>0</bitOffset>
                     <bitWidth>1</bitWidth>
                     <enumeratedValues>
                        <enumeratedValue>
                           <name>0b0</name>
                           <description>Interrupt disabled</description>
                           <value>0b0</value>
                        </enumeratedValue>
                        <enumeratedValue>
                           <name>0b1</name>
                           <description>Interrupt enabled</description>
                           <value>0b1</value>
                        </enumeratedValue>
                     </enumeratedValues>
                  </field>
                  <field derivedFrom="USBRSTEN" > <name>ERROREN</name> <description>ERROR Interrupt Enable</description> <bitOffset>1</bitOffset> </field>
                  <field derivedFrom="USBRSTEN" > <name>SOFTOKEN</name> <description>SOFTOK Interrupt Enable</description> <bitOffset>2</bitOffset> </field>
                  <field derivedFrom="USBRSTEN" > <name>TOKDNEEN</name> <description>TOKDNE Interrupt Enable</description> <bitOffset>3</bitOffset> </field>
                  <field derivedFrom="USBRSTEN" > <name>SLEEPEN</name> <description>SLEEP Interrupt Enable</description> <bitOffset>4</bitOffset> </field>
                  <field derivedFrom="USBRSTEN" > <name>RESUMEEN</name> <description>RESUME Interrupt Enable</description> <bitOffset>5</bitOffset> </field>
                  <field derivedFrom="USBRSTEN" > <name>ATTACHEN</name> <description>ATTACH Interrupt Enable</description> <bitOffset>6</bitOffset> </field>
                  <field derivedFrom="USBRSTEN" > <name>STALLEN</name> <description>STALL Interrupt Enable</description> <bitOffset>7</bitOffset> </field>
               </fields>
            </register>
            <register>
               <name>ERRSTAT</name>
               <description>Error Interrupt Status Register\n
The Error Interrupt Status Register contains enable bits for each of the error sources within the USB Module.\n
Each of these bits are qualified with their respective error enable bits</description>
               <addressOffset>0x88</addressOffset>
               <size>8</size>
               <resetMask>0xFF</resetMask>
               <fields>
                  <field>
                     <name>PIDERR</name>
                     <description>PID Error\nThis bit is set when the PID check field fails</description>
                     <bitOffset>0</bitOffset>
                     <bitWidth>1</bitWidth>
                     <enumeratedValues>
                        <enumeratedValue>
                           <name>0b0</name>
                           <description>Error not detected</description>
                           <value>0b0</value>
                        </enumeratedValue>
                        <enumeratedValue>
                           <name>0b1</name>
                           <description>Error detected</description>
                           <value>0b1</value>
                        </enumeratedValue>
                     </enumeratedValues>
                  </field>
                  <field derivedFrom="PIDERR" > <name>CRC5EOF</name> <description>CRC5EOF Error\n
This error interrupt has two functions:
 - When the USB Module is operating in peripheral mode (HOSTMODEEN=0), this interrupt detects CRC5 errors in the token packets generated by the host.
   If set the token packet was rejected due to a CRC5 error. 
 - When the USB Module is operating in host mode (HOSTMODEEN=1), this interrupt detects End Of Frame (EOF) error conditions. 
   This occurs when the USB Module is transmitting or receiving data and the SOF counter reaches zero</description> <bitOffset>1</bitOffset> </field>
                  <field derivedFrom="PIDERR" > <name>CRC16</name> <description>CRC16 Error\n
This bit is set when a data packet is rejected due to a CRC16 error</description> <bitOffset>2</bitOffset> </field>
                  <field derivedFrom="PIDERR" > <name>DFN8</name> <description>Data field length invalid\n
This bit is set if the data field received was not 8 bits in length</description> <bitOffset>3</bitOffset> </field>
                  <field derivedFrom="PIDERR" > <name>BTOERR</name> <description>Bus Turnaround Error\n
This bit is set when a bus turnaround timeout error occurs.\n
The USB module contains a bus turnaround timer that keeps track of the amount of time elapsed between the token and data phases of a SETUP or OUT TOKEN or the data and handshake phases of a IN TOKEN. If more than 16 bit times are counted from the previous EOP before a transition from IDLE, a bus turnaround timeout error occurs</description> <bitOffset>4</bitOffset> </field>
                  <field derivedFrom="PIDERR" > <name>DMAERR</name> <description>DMA Error\n
This bit is set if the USB Module has requested a DMA access to read a new BDT but has not been given the bus before it needs to receive or transmit data. If processing a TX transfer this would cause a transmit data underflow condition. If processing a RX transfer this would cause a receive data overflow condition. This interrupt is useful when developing device arbitration hardware for the microprocessor and the USB Module to minimize bus request and bus grant latency. This bit is also set if a data packet to or from the host is larger than the buffer size allocated in the BDT. In this case the data packet is truncated as it is put into buffer memory</description> <bitOffset>5</bitOffset> </field>
                  <field derivedFrom="PIDERR" > <name>BTSERR</name> <description>Bit Stuff Error\n
This bit is set when a bit stuff error is detected. If set, the corresponding packet is rejected due to the error</description> <bitOffset>7</bitOffset> </field>
               </fields>
            </register>
            <register>
               <name>ERREN</name>
               <description>Error Interrupt Enable Register</description>
               <addressOffset>0x8C</addressOffset>
               <size>8</size>
               <resetMask>0xFF</resetMask>
               <fields>
                  <field>
                     <name>PIDERREN</name>
                     <description>PID Error interrupt Enable</description>
                     <bitOffset>0</bitOffset>
                     <bitWidth>1</bitWidth>
                     <enumeratedValues>
                        <enumeratedValue>
                           <name>0b0</name>
                           <description>Interrupt is disabled</description>
                           <value>0b0</value>
                        </enumeratedValue>
                        <enumeratedValue>
                           <name>0b1</name>
                           <description>Interrupt is enabled</description>
                           <value>0b1</value>
                        </enumeratedValue>
                     </enumeratedValues>
                  </field>
                  <field derivedFrom="PIDERREN" > <name>CRC5EOFEN</name> <description>CRC5/EOF Error interrupt Enable</description> <bitOffset>1</bitOffset> </field>
                  <field derivedFrom="PIDERREN" > <name>CRC16EN</name> <description>CRC16 Error interrupt Enable</description> <bitOffset>2</bitOffset> </field>
                  <field derivedFrom="PIDERREN" > <name>DFN8EN</name> <description>Data format invalid interrupt Enable</description> <bitOffset>3</bitOffset> </field>
                  <field derivedFrom="PIDERREN" > <name>BTOERREN</name> <description>Bus turnaround error interrupt Enable</description> <bitOffset>4</bitOffset> </field>
                  <field derivedFrom="PIDERREN" > <name>DMAERREN</name> <description>DMA error interrupt Enable</description> <bitOffset>5</bitOffset> </field>
                  <field derivedFrom="PIDERREN" > <name>BTSERREN</name> <description>Bit stuff error interrupt Enable</description> <bitOffset>7</bitOffset> </field>
               </fields>
            </register>
            <register>
               <name>STAT</name>
               <description>Status Register</description>
               <addressOffset>0x90</addressOffset>
               <size>8</size>
               <access>read-only</access>
               <resetMask>0xFF</resetMask>
               <fields>
                  <field>
                     <name>ODD</name>
                     <description>Buffer ODD/EVEN\n
Indicates if the last buffer descriptor updated was in the odd bank of the BDT</description>
                     <bitOffset>2</bitOffset>
                     <bitWidth>1</bitWidth>
                     <enumeratedValues>
                        <enumeratedValue>
                           <name>0b0</name>
                           <description>Even</description>
                           <value>0b0</value>
                        </enumeratedValue>
                        <enumeratedValue>
                           <name>0b1</name>
                           <description>Odd</description>
                           <value>0b1</value>
                        </enumeratedValue>
                     </enumeratedValues>
                  </field>
                  <field>
                     <name>TX</name>
                     <description>Transmit Indicator\n
Indicates if the most recent transaction was a transmit operation</description>
                     <bitOffset>3</bitOffset>
                     <bitWidth>1</bitWidth>
                     <enumeratedValues>
                        <enumeratedValue>
                           <name>0b0</name>
                           <description>Transmit</description>
                           <value>0b0</value>
                        </enumeratedValue>
                        <enumeratedValue>
                           <name>0b1</name>
                           <description>Receive</description>
                           <value>0b1</value>
                        </enumeratedValue>
                     </enumeratedValues>
                  </field>
                  <field>
                     <name>ENDP</name>
                     <description>Endpoint address\n
This four-bit field encodes the endpoint address that received or transmitted the previous token.\n
This allows the processor core to determine the BDT entry that was updated by the last USB transaction</description>
                     <bitOffset>4</bitOffset>
                     <bitWidth>4</bitWidth>
                  </field>
               </fields>
            </register>
            <register>
               <name>CTL</name>
               <description>Control Register</description>
               <addressOffset>0x94</addressOffset>
               <size>8</size>
               <resetMask>0xFF</resetMask>
               <fields>
                  <field>
                     <name>USBENSOFEN</name>
                     <description>USB Enable</description>
                     <bitOffset>0</bitOffset>
                     <bitWidth>1</bitWidth>
                     <enumeratedValues>
                        <enumeratedValue>
                           <name>0b0</name>
                           <description>Module disabled</description>
                           <value>0b0</value>
                        </enumeratedValue>
                        <enumeratedValue>
                           <name>0b1</name>
                           <description>Module enabled</description>
                           <value>0b1</value>
                        </enumeratedValue>
                     </enumeratedValues>
                  </field>
                  <field>
                     <name>ODDRST</name>
                     <description>Odd Reset\n
Setting this bit to 1 resets all the BDT ODD ping/pong fields to 0, which then specifies the EVEN BDT bank</description>
                     <bitOffset>1</bitOffset>
                     <bitWidth>1</bitWidth>
                     <enumeratedValues>
                        <enumeratedValue>
                           <name>0b0</name>
                           <description>Inactive</description>
                           <value>0b0</value>
                        </enumeratedValue>
                        <enumeratedValue>
                           <name>0b1</name>
                           <description>Active</description>
                           <value>0b1</value>
                        </enumeratedValue>
                     </enumeratedValues>
                  </field>
                  <field>
                     <name>RESUME</name>
                     <description>Resume signalling\n
When set to 1 this bit enables the USB Module to execute resume signaling.\n
This allows the USB Module to perform remote wake-up</description>
                     <bitOffset>2</bitOffset>
                     <bitWidth>1</bitWidth>
                     <enumeratedValues>
                        <enumeratedValue>
                           <name>0b0</name>
                           <description>Inactive</description>
                           <value>0b0</value>
                        </enumeratedValue>
                        <enumeratedValue>
                           <name>0b1</name>
                           <description>Active</description>
                           <value>0b1</value>
                        </enumeratedValue>
                     </enumeratedValues>
                  </field>
                  <field>
                     <name>HOSTMODEEN</name>
                     <description>Host mode enable\n
When set to 1, this bit enables the USB Module to operate in Host mode</description>
                     <bitOffset>3</bitOffset>
                     <bitWidth>1</bitWidth>
                     <enumeratedValues>
                        <enumeratedValue>
                           <name>0b0</name>
                           <description>Device Mode</description>
                           <value>0b0</value>
                        </enumeratedValue>
                        <enumeratedValue>
                           <name>0b1</name>
                           <description>Host Mode</description>
                           <value>0b1</value>
                        </enumeratedValue>
                     </enumeratedValues>
                  </field>
                  <field>
                     <name>RESET</name>
                     <description>Reset signalling\n
Setting this bit enables the USB Module to generate USB reset signalling. \n
This allows the USB Module to reset USB peripherals</description>
                     <bitOffset>4</bitOffset>
                     <bitWidth>1</bitWidth>
                     <enumeratedValues>
                        <enumeratedValue>
                           <name>0b0</name>
                           <description>Inactive</description>
                           <value>0b0</value>
                        </enumeratedValue>
                        <enumeratedValue>
                           <name>0b1</name>
                           <description>Reset devices</description>
                           <value>0b1</value>
                        </enumeratedValue>
                     </enumeratedValues>
                  </field>
                  <field>
                     <name>TXSUSPENDTOKENBUSY</name>
                     <description>Token Busy\n
In Host mode, TOKEN_BUSY is set when the USB module is busy executing a USB token</description>
                     <bitOffset>5</bitOffset>
                     <bitWidth>1</bitWidth>
                     <enumeratedValues>
                        <enumeratedValue>
                           <name>0b0</name>
                           <description>Idle</description>
                           <value>0b0</value>
                        </enumeratedValue>
                        <enumeratedValue>
                           <name>0b1</name>
                           <description>Busy expecting token</description>
                           <value>0b1</value>
                        </enumeratedValue>
                     </enumeratedValues>
                  </field>
                  <field>
                     <name>SE0</name>
                     <description>SE0 indication from bus\n
Live USB Single Ended Zero signal</description>
                     <bitOffset>6</bitOffset>
                     <bitWidth>1</bitWidth>
                     <enumeratedValues>
                        <enumeratedValue>
                           <name>0b0</name>
                           <description>SE0 false</description>
                           <value>0b0</value>
                        </enumeratedValue>
                        <enumeratedValue>
                           <name>0b1</name>
                           <description>SE0 true</description>
                           <value>0b1</value>
                        </enumeratedValue>
                     </enumeratedValues>
                  </field>
                  <field>
                     <name>JSTATE</name>
                     <description>JSTATE indication from bus\n
Live USB differential receiver JSTATE signal</description>
                     <bitOffset>7</bitOffset>
                     <bitWidth>1</bitWidth>
                     <enumeratedValues>
                        <enumeratedValue>
                           <name>0b0</name>
                           <description>KSTATE</description>
                           <value>0b0</value>
                        </enumeratedValue>
                        <enumeratedValue>
                           <name>0b1</name>
                           <description>JSTATE</description>
                           <value>0b1</value>
                        </enumeratedValue>
                     </enumeratedValues>
                  </field>
               </fields>
            </register>
            <register>
               <name>ADDR</name>
               <description>Address Register</description>
               <addressOffset>0x98</addressOffset>
               <size>8</size>
               <resetMask>0xFF</resetMask>
               <fields>
                  <field>
                     <name>ADDR</name>
                     <description>USB Address</description>
                     <bitOffset>0</bitOffset>
                     <bitWidth>7</bitWidth>
                  </field>
                  <field>
                     <name>LSEN</name>
                     <description>Low Speed Enable bit\n
This bit informs the USB Module that the next token command written to the token register must be performed at low speed.
This enables the USB Module to perform the necessary preamble required for low-speed data transmissions</description>
                     <bitOffset>7</bitOffset>
                     <bitWidth>1</bitWidth>
                     <enumeratedValues>
                        <enumeratedValue>
                           <name>0b0</name>
                           <description>High speed</description>
                           <value>0b0</value>
                        </enumeratedValue>
                        <enumeratedValue>
                           <name>0b1</name>
                           <description>Low speed</description>
                           <value>0b1</value>
                        </enumeratedValue>
                     </enumeratedValues>
                  </field>
               </fields>
            </register>
            <register>
               <name>BDTPAGE1</name>
               <description>BDT Page Register 1\n
Address bits 15 through 9 of the BDT base address</description>
               <addressOffset>0x9C</addressOffset>
               <size>8</size>
               <resetMask>0xFF</resetMask>
               <fields>
                  <field>
                     <name>BDTBA</name>
                     <description>BDT base address[15:9]</description>
                     <bitOffset>1</bitOffset>
                     <bitWidth>7</bitWidth>
                  </field>
               </fields>
            </register>
            <register>
               <name>FRMNUML</name>
               <description>Frame Number Register Low</description>
               <addressOffset>0xA0</addressOffset>
               <size>8</size>
               <resetMask>0xFF</resetMask>
               <fields>
                  <field>
                     <name>FRM</name>
                     <description>Frame Number[7:0]\n
This 8-bit field and the 3-bit field in the Frame Number Register High are 
used to compute the address where the current Buffer Descriptor Table (BDT) resides in system memory</description>
                     <bitOffset>0</bitOffset>
                  </field>
               </fields>
            </register>
            <register>
               <name>FRMNUMH</name>
               <description>Frame Number Register High</description>
               <addressOffset>0xA4</addressOffset>
               <size>8</size>
               <resetMask>0xFF</resetMask>
               <fields>
                  <field>
                     <name>FRM</name>
                     <description>Frame Number[10:9]\n
This 3-bit field and the 8-bit field in the Frame Number Register Low are 
used to compute the address where the current Buffer Descriptor Table (BDT) resides in system memory</description>
                     <bitOffset>0</bitOffset>
                     <bitWidth>3</bitWidth>
                  </field>
               </fields>
            </register>
            <register>
               <name>TOKEN</name>
               <description>Token Register\n
In Host mode the Token-pid and Token-endpoint values are written to this register to perform a transaction</description>
               <addressOffset>0xA8</addressOffset>
               <size>8</size>
               <resetMask>0xFF</resetMask>
               <fields>
                  <field>
                     <name>TOKENENDPT</name>
                     <description>Endpoint address\n
Holds the Endpoint address for the token command. The four bit value written must be a valid endpoint</description>
                     <bitOffset>0</bitOffset>
                     <bitWidth>4</bitWidth>
                  </field>
                  <field>
                     <name>TOKENPID</name>
                     <description>Token type (PID)\n
Contains the token type executed by the USB module</description>
                     <bitOffset>4</bitOffset>
                     <bitWidth>4</bitWidth>
                     <enumeratedValues>
                        <enumeratedValue>
                           <name>0b0001</name>
                           <description>OUT Token - USB Module performs an OUT (TX) transaction</description>
                           <value>0b0001</value>
                        </enumeratedValue>
                        <enumeratedValue>
                           <name>0b1001</name>
                           <description>IN Token - USB Module performs an IN (RX) transaction</description>
                           <value>0b1001</value>
                        </enumeratedValue>
                        <enumeratedValue>
                           <name>0b1101</name>
                           <description>SETUP Token - USB Module performs a SETUP (TX) transaction</description>
                           <value>0b1101</value>
                        </enumeratedValue>
                     </enumeratedValues>
                  </field>
               </fields>
            </register>
            <register>
               <name>SOFTHLD</name>
               <description>SOF Threshold Register</description>
               <addressOffset>0xAC</addressOffset>
               <size>8</size>
               <resetMask>0xFF</resetMask>
               <fields>
                  <field>
                     <name>CNT</name>
                     <description>Threshold in byte times\nRepresents the SOF count threshold in byte times</description>
                     <bitOffset>0</bitOffset>
                  </field>
               </fields>
            </register>
            <register>
               <name>BDTPAGE2</name>
               <description>BDT Page Register 2\n
Address bits 23 through 16 of the BDT base address</description>
               <addressOffset>0xB0</addressOffset>
               <size>8</size>
               <resetMask>0xFF</resetMask>
               <fields>
                  <field>
                     <name>BDTBA</name>
                     <description>BDT base address[23:16]</description>
                     <bitOffset>0</bitOffset>
                  </field>
               </fields>
            </register>
            <register>
               <name>BDTPAGE3</name>
               <description>BDT Page Register 3\n
Address bits 15 through 8 of the BDT base address</description>
               <addressOffset>0xB4</addressOffset>
               <size>8</size>
               <resetMask>0xFF</resetMask>
               <fields>
                  <field>
                     <name>BDTBA</name>
                     <description>BDT base address[7:0]</description>
                     <bitOffset>0</bitOffset>
                  </field>
               </fields>
            </register>
            <cluster>
               <dim>16</dim>
               <dimIncrement>4</dimIncrement>
               <dimIndex>0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15</dimIndex>
               <name>ENDPOINT</name>
               <addressOffset>0xC0</addressOffset>
               <register>
                  <name>ENDPT</name>
                  <description>Endpoint Control Register</description>
                  <addressOffset>0x0</addressOffset>
                  <size>8</size>
                  <resetMask>0xFF</resetMask>
                  <fields>
                     <field>
                        <name>EPHSHK</name>
                        <description>Handshake enable\n
When set this bet enables an endpoint to perform handshaking during a transaction to this endpoint.\n
This bit is generally 1 unless the endpoint is Isochronous</description>
                        <bitOffset>0</bitOffset>
                        <bitWidth>1</bitWidth>
                        <enumeratedValues>
                           <enumeratedValue>
                              <name>0b0</name>
                              <description>Disabled</description>
                              <value>0b0</value>
                           </enumeratedValue>
                           <enumeratedValue>
                              <name>0b1</name>
                              <description>Enabled</description>
                              <value>0b1</value>
                           </enumeratedValue>
                        </enumeratedValues>
                     </field>
                     <field derivedFrom="EPHSHK" > <name>EPSTALL</name> <description>Endpoint Stall\n
When set this bit indicates that the endpoint is stalled. 
This bit has priority over all other control bits in the EndPoint Enable Register, but it is only valid if EPTXEN=1 or EPRXEN=1.\n
Any access to this endpoint causes the USB Module to return a STALL handshake.\n
After an endpoint is stalled it requires intervention from the Host Controller</description> <bitOffset>1</bitOffset> </field>
                     <field derivedFrom="EPHSHK" > <name>EPTXEN</name> <description>Transmit enable\n
This bit, when set, enables the endpoint for TX transfers</description> <bitOffset>2</bitOffset> </field>
                     <field derivedFrom="EPHSHK" > <name>EPRXEN</name> <description>Receive enable\n
This bit, when set, enables the endpoint for RX transfers</description> <bitOffset>3</bitOffset> </field>
                     <field>
                        <name>EPCTLDIS</name>
                        <description>Disable control transfers\n
This bit, when set, disables control (SETUP) transfers. \n
When cleared, control transfers are enabled.\n
This applies if and only if the EPRXEN and EPTXEN bits are also set</description>
                        <bitOffset>4</bitOffset>
                        <bitWidth>1</bitWidth>
                        <enumeratedValues>
                           <enumeratedValue>
                              <name>0b0</name>
                              <description>Enabled</description>
                              <value>0b0</value>
                           </enumeratedValue>
                           <enumeratedValue>
                              <name>0b1</name>
                              <description>Disabled</description>
                              <value>0b1</value>
                           </enumeratedValue>
                        </enumeratedValues>
                     </field>
                     <field derivedFrom="EPCTLDIS" > <name>RETRYDIS</name> <description>Retry disable\n
This is a Host mode only bit and is present in the control register for endpoint 0 (ENDPT0) only.\n
When set this bit causes the host to not retry NAK&apos;ed (Negative Acknowledgement) transactions.\n
When a transaction is NAKed, the BDT PID field is updated with the NAK PID, and the TOKEN_DNE interrupt is set.\n
When this bit is cleared NAKed transactions is retried in hardware.\n
This bit must be set when the host is attempting to poll an interrupt endpoint</description> <bitOffset>6</bitOffset> </field>
                     <field>
                        <name>HOSTWOHUB</name>
                        <description>Directly connect to low speed device\n
This is a Host mode only field and is present in the control register for endpoint 0 (ENDPT0) only.\n
When set the host communicates to a directly connected low speed device. \n
When cleared, the host produces the PRE_PID and then switches to low-speed signalling to send a token to 
a low speed device as required to communicate with a low speed device through a hub</description>
                        <bitOffset>7</bitOffset>
                        <bitWidth>1</bitWidth>
                        <enumeratedValues>
                           <enumeratedValue>
                              <name>0b0</name>
                              <description>Send PRE_PID</description>
                              <value>0b0</value>
                           </enumeratedValue>
                           <enumeratedValue>
                              <name>0b1</name>
                              <description>Direct</description>
                              <value>0b1</value>
                           </enumeratedValue>
                        </enumeratedValues>
                     </field>
                  </fields>
               </register>
            </cluster>
            <register>
               <name>USBCTRL</name>
               <description>USB Control Register</description>
               <addressOffset>0x100</addressOffset>
               <size>8</size>
               <resetValue>0xC0</resetValue>
               <resetMask>0xFF</resetMask>
               <fields>
                  <field>
                     <name>PDE</name>
                     <description>Weak USB pull-down enable\n
Enables the weak pulldowns on the USB transceiver D+ and D-</description>
                     <bitOffset>6</bitOffset>
                     <bitWidth>1</bitWidth>
                     <enumeratedValues>
                        <enumeratedValue>
                           <name>0b0</name>
                           <description>Pull-downs disabled</description>
                           <value>0b0</value>
                        </enumeratedValue>
                        <enumeratedValue>
                           <name>0b1</name>
                           <description>Pull-downs enabled</description>
                           <value>0b1</value>
                        </enumeratedValue>
                     </enumeratedValues>
                  </field>
                  <field>
                     <name>SUSP</name>
                     <description>Suspend Transceiver\n
Places the USB transceiver into the suspend state</description>
                     <bitOffset>7</bitOffset>
                     <bitWidth>1</bitWidth>
                     <enumeratedValues>
                        <enumeratedValue>
                           <name>0b0</name>
                           <description>Transceiver active</description>
                           <value>0b0</value>
                        </enumeratedValue>
                        <enumeratedValue>
                           <name>0b1</name>
                           <description>Transceiver suspended</description>
                           <value>0b1</value>
                        </enumeratedValue>
                     </enumeratedValues>
                  </field>
               </fields>
            </register>
            <register>
               <name>OBSERVE</name>
               <description>USB OTG Observe Register\n
Provides observablity of USB pull-up/down signals</description>
               <addressOffset>0x104</addressOffset>
               <size>8</size>
               <access>read-only</access>
               <resetValue>0x50</resetValue>
               <resetMask>0xFF</resetMask>
               <fields>
                  <field>
                     <name>DMPD</name>
                     <description>Observe D- \n
Provides observability of the D- Pull Down enable at the USB transceiver</description>
                     <bitOffset>4</bitOffset>
                     <bitWidth>1</bitWidth>
                     <enumeratedValues>
                        <enumeratedValue>
                           <name>0b0</name>
                           <description>D- pull-down disabled</description>
                           <value>0b0</value>
                        </enumeratedValue>
                        <enumeratedValue>
                           <name>0b1</name>
                           <description>D- pull-down enabled</description>
                           <value>0b1</value>
                        </enumeratedValue>
                     </enumeratedValues>
                  </field>
                  <field>
                     <name>DPPD</name>
                     <description>Observe D+\n
Provides observability of the D+ Pull Down enable at the USB transceiver</description>
                     <bitOffset>6</bitOffset>
                     <bitWidth>1</bitWidth>
                     <enumeratedValues>
                        <enumeratedValue>
                           <name>0b0</name>
                           <description>D+ pull-down disabled</description>
                           <value>0b0</value>
                        </enumeratedValue>
                        <enumeratedValue>
                           <name>0b1</name>
                           <description>D+ pull-down enabled</description>
                           <value>0b1</value>
                        </enumeratedValue>
                     </enumeratedValues>
                  </field>
                  <field>
                     <name>DPPU</name>
                     <description>Observe D+\n
Provides observability of the D+ Pull Up enable at the USB transceiver</description>
                     <bitOffset>7</bitOffset>
                     <bitWidth>1</bitWidth>
                     <enumeratedValues>
                        <enumeratedValue>
                           <name>0b0</name>
                           <description>D+ pull-up disabled</description>
                           <value>0b0</value>
                        </enumeratedValue>
                        <enumeratedValue>
                           <name>0b1</name>
                           <description>D+ pull-up enabled</description>
                           <value>0b1</value>
                        </enumeratedValue>
                     </enumeratedValues>
                  </field>
               </fields>
            </register>
            <register>
               <name>CONTROL</name>
               <description>USB OTG Control Register</description>
               <addressOffset>0x108</addressOffset>
               <size>8</size>
               <resetMask>0xFF</resetMask>
               <fields>
                  <field>
                     <name>DPPULLUPNONOTG</name>
                     <description>Non-OTG pull-up control\n
Provides control of the DP Pullup in the USB OTG module, if USB is configured in non-OTG device mode</description>
                     <bitOffset>4</bitOffset>
                     <bitWidth>1</bitWidth>
                     <enumeratedValues>
                        <enumeratedValue>
                           <name>0b0</name>
                           <description>DP Pull-up disabled</description>
                           <value>0b0</value>
                        </enumeratedValue>
                        <enumeratedValue>
                           <name>0b1</name>
                           <description>DP Pull-up enabled</description>
                           <value>0b1</value>
                        </enumeratedValue>
                     </enumeratedValues>
                  </field>
               </fields>
            </register>
            <register>
               <name>USBTRC0</name>
               <description>USB Transceiver Control Register 0</description>
               <addressOffset>0x10C</addressOffset>
               <size>8</size>
               <resetMask>0xFF</resetMask>
               <fields>
                  <field>
                     <name>USB_RESUME_INT</name>
                     <description>USB Asynchronous Interrupt Detect</description>
                     <bitOffset>0</bitOffset>
                     <bitWidth>1</bitWidth>
                     <access>read-only</access>
                     <enumeratedValues>
                        <enumeratedValue>
                           <name>0b0</name>
                           <description>Not detected</description>
                           <value>0b0</value>
                        </enumeratedValue>
                        <enumeratedValue>
                           <name>0b1</name>
                           <description>Detected</description>
                           <value>0b1</value>
                        </enumeratedValue>
                     </enumeratedValues>
                  </field>
                  <field derivedFrom="USB_RESUME_INT" > <name>SYNC_DET</name> <description>USB Synchronous Interrupt Detect</description> <bitOffset>1</bitOffset> </field>
                  <field>
                     <name>USBRESMEN</name>
                     <description>Asynchronous Resume Interrupt Enable\n
This bit, when set, allows the USB module to send an asynchronous wakeup event to the MCU upon detection of resume signaling on the USB bus</description>
                     <bitOffset>5</bitOffset>
                     <bitWidth>1</bitWidth>
                     <enumeratedValues>
                        <enumeratedValue>
                           <name>0b0</name>
                           <description>Interrupt disabled</description>
                           <value>0b0</value>
                        </enumeratedValue>
                        <enumeratedValue>
                           <name>0b1</name>
                           <description>Interrupt enabled</description>
                           <value>0b1</value>
                        </enumeratedValue>
                     </enumeratedValues>
                  </field>
                  <field>
                     <name>USBRESET</name>
                     <description>USB Reset\n
Generates a hard reset to the USB_OTG module. After this bit is set and the reset occurs, this bit is automatically cleared</description>
                     <bitOffset>7</bitOffset>
                     <bitWidth>1</bitWidth>
                     <access>write-only</access>
                     <enumeratedValues>
                        <enumeratedValue>
                           <name>0b0</name>
                           <description>Normal operation</description>
                           <value>0b0</value>
                        </enumeratedValue>
                        <enumeratedValue>
                           <name>0b1</name>
                           <description>Reset module</description>
                           <value>0b1</value>
                        </enumeratedValue>
                     </enumeratedValues>
                  </field>
               </fields>
            </register>
         </registers>
      </peripheral>
