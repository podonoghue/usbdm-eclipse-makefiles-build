<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE fragment SYSTEM "_menu.dtd" >
<!-- mcg_base_nopll.xml -->

<fragment xmlns:xi="http://www.w3.org/2001/XInclude">

   <!-- Clock mode as indicated by icsClockMode[%(n)] choice index -->
   <constant key="FEI"  value="0" type="Long" />
   <constant key="FEE"  value="1" type="Long" />
   <constant key="FBI"  value="2" type="Long" />
   <constant key="FBE"  value="3" type="Long" />
   <constant key="FBILP" value="4" type="Long" />
   <constant key="FBELP" value="5" type="Long" />

   <xi:include href="default_instance.xml"/>

   <clockSelectionOption key="currentClockConfig"
      derived="true"
      description="Active clock selection"
      target=""
      toolTip="Selects the clock configuration used for general peripheral timing calculations" >
      <choice value="0" name="ClockConfig[0]" ref="&quot;0: &quot;+ClockConfig[0]" isDefault="true" />
      <choice value="1" name="ClockConfig[1]" ref="&quot;1: &quot;+ClockConfig[1]" />
      <choice value="2" name="ClockConfig[2]" ref="&quot;2: &quot;+ClockConfig[2]" />
      <choice value="3" name="ClockConfig[3]" ref="&quot;3: &quot;+ClockConfig[3]" />
   </clockSelectionOption>

   <xi:include href="irqOption.xml" />

   <aliasOption key="/SIM/numberOfClockSettings" />

   <binaryOption key="enableClockConfiguration[0]" locked="true" hidden="true" >
      <choice value="false" name="Disabled" />
      <choice value="true"  name="Enabled"  isDefault="true" />
   </binaryOption>

   <for keys="n" dim="=1,/SIM/numberOfClockSettings">
      <binaryOption key="enableClockConfiguration[%(n)]"
         hidden="true"
         description="Enable this clock settings"
         toolTip="If disabled this clock setting will be removed from the generated code" >
         <choice value="false" name="Disabled" isDefault="true" />
         <choice value="true"  name="Enabled" />
      </binaryOption>
   </for>

   <intOption key="system_icsirclk_ungated"
      locked="true"
      derived="true"
      origin="ICS Internal Reference Clock"
      units="Hz"
      description="Frequency of ICS Internal Reference Clock [ICSIRC]"
      toolTip="Dependent on device and clock Trim. [Nominally 37.5 kHz]"
      value="37.5_kHz" />

   <for keys="n" dim="=/SIM/numberOfClockSettings">
      <categoryOption key="ClockConfig[%(n)]"
         description="Clock configuration[%(n)]"
         toolTip="Clock configurations for different run modes"
         value="ClockConfig_%(n)"
         disabledValue="Disabled" >

         <aliasOption key="enableClockConfiguration[%(n)]" locked="false" />

         <category name="OSC0 (Main Oscillator)" description="OSC External Reference Clock/Oscillator [OSCCLK]" >
            <aliasOption key="/OSC0/oscMode"                 />
            <aliasOption key="/OSC0/oscer_clock"             />
         </category>

         <category name="Internal Clocks" description="Internal Clock Sources"
            toolTip="ICSIRC, LPO" >
            <aliasOption key="system_icsirclk_ungated" />
            <aliasOption key="/PMC/system_low_power_clock" />
         </category>

         <choiceOption key="icsClockMode[%(n)]"
            typeName="McgClockMode"
            enumType="uint8_t"
            valueFormat="%s"
            description="Default Clock Mode"
            toolTip="FLL Engaged Internal(FEI)\n
                     In FEI mode, ICSOUT is derived from the FLL clock (DCOCLK) that is controlled by the 32 kHz Internal Reference Clock (IRC).\n
                     The FLL loop will lock the DCO frequency to the FLL factor, as selected by the C4[DRST_DRS] and C4[DMX32] bits, times the\n
                     internal reference frequency.\n
                     \n
                     FLL Engaged External(FEE)\n
                     In FEE mode, ICSOUT is derived from the FLL clock (DCOCLK) that is controlled by the external reference clock. The FLL loop\n
                     will lock the DCO frequency to the FLL factor, as selected by C4[DRST_DRS] and C4[DMX32] bits, times the external reference\n
                     frequency, as specified by the C1[FRDIV] and C2[RANGE].\n
                     \n
                     FLL Bypassed Internal(FBI)\n
                     In FBI mode, the ICSOUT clock is derived either from the internal reference clock,\n
                     as selected by the C2[IRCS] bit. The FLL is operational but its output is not used. This mode is useful to allow the FLL\n
                     to acquire its target frequency while the ICSOUT clock is driven from the C2[IRCS] selected internal reference clock. The\n
                     FLL clock (DCOCLK) is controlled by the slow internal reference clock, and the DCO clock frequency locks to a multiplication\n
                     factor, as selected by the C4[DRST_DRS] and C4[DMX32] bits, times the internal reference frequency.\n
                     \n
                     FLL Bypassed External(FBE)\n
                     In FBE mode, the ICSOUT clock is derived from the external reference clock. The FLL is operational but its output is not\n
                     used. This mode is useful to allow the FLL to acquire its target frequency while the ICSOUT clock is driven from the\n
                     external reference clock. The FLL clock (DCOCLK) is controlled by the external reference clock, and the DCO clock frequency\n
                     locks to a multiplication factor, as selected by the C4[DRST_DRS] and C4[DMX32] bits, times the divided external reference\n
                     frequency.\n
                     \n
                     FLL bypassed internal low power (FBILP)\n
                     In FBILP mode, ICSOUT is derived from the internal reference clock. The FLL is disabled\n
                     \n
                     FLL bypassed external low power (FBELP)\n
                     In FBELP mode, ICSOUT is derived from the external reference clock. The FLL is disabled\n
                     ">

            <choice name="FLL Engaged Internal (FEI)"           enum="FEI"   code="McgClockMode_FEI"   value="0" />
            <choice name="FLL Engaged External (FEE)"           enum="FEE"   code="McgClockMode_FEE"   value="1" />
            <choice name="FLL bypassed internal (FBI)"          enum="FBI"   code="McgClockMode_FBI"   value="2" />
            <choice name="FLL bypassed external (FBE)"          enum="FBE"   code="McgClockMode_FBE"   value="4" />
            <choice name="Bypassed low power internal (FBILP)"  enum="FBILP" code="McgClockMode_FBILP" value="3" />
            <choice name="Bypassed low power external (FBELP)"  enum="FBELP" code="McgClockMode_FBELP" value="5" />
         </choiceOption>

         <category name="Clock monitors"
            description="Clock monitors" >
            <binaryOption key="ics_c4_cme[%(n)]" condition="ics_c4_cme_present"
               typeName="McgClockMonitor"
               description="Clock Monitor Enable"
               toolTip="Determines if a reset request is made following a loss of external clock indication.\n
                        The CME0 bit must only be when using an external clock mode (FEE, FBE, or FBELP)" >
               <choice value="0" enum="Disabled" name="Clock monitor disabled" />
               <choice value="1" enum="Enabled"  name="Clock monitor enabled"  />
            </binaryOption>

            <binaryOption key="ics_c4_lolie0[%(n)]" condition="ics_c4_lolie0_present"
               typeName="McgLossOfLockInterrupt"
               description="Loss of Lock Interrupt Enable"
               toolTip="Determines if an interrupt request is made following a loss of lock.\n
This is indicated by ICS_S[LOLS] being set." >
               <choice name="Interrupt disabled"  value="0" enum="Disabled"/>
               <choice name="Interrupt enabled"   value="1" enum="Enabled"/>
            </binaryOption>

         </category>

         <category name="ICSIR" description="Internal Reference Clock Source [ICSIRCLK]" >

            <aliasOption key="system_icsirclk_ungated" />

            <binaryOption key="ics_c1_irclken[%(n)]" condition="ics_c1_irclken_present"
               typeName="McgIrClkEn"
               target="system_icsirclk_clock[%(n)]"
               description="Internal Reference Clock [ICSIRCLK]"
               toolTip="Enables the internal reference clock for use by peripherals" >
               <choice value="0" ref="Disabled"                enum="Disabled" name="Disabled" code="0"                           />
               <choice value="1" ref="system_icsirclk_ungated" enum="Enabled"  name="Enabled"  code="icsirclk"    isDefault="true"/>
            </binaryOption>

            <binaryOption key="ics_c1_irefsten[%(n)]"
               typeName="McgIrefs"
               enabledBy="ics_c1_irclken[%(n)]||(icsClockMode[%(n)]==@FEI)||(icsClockMode[%(n)]==@FBI)||(icsClockMode[%(n)]==@FBILP),
                          Unavailable as IRCLKEN not set and ICSIRCLK unused by active clock mode"
               description="Internal Reference [ICSIRCLK] Stop Enable"
               toolTip="Controls whether or not the internal reference clock remains enabled when the ICS enters Stop mode.\n
               (only if IRCLKEN is set or if ICS is in FEI, FBI, or FBILP modes before entering Stop mode)" >
               <choice value="0" enum="DisabledInStop" name="IR disabled in STOP" />
               <choice value="1" enum="EnabledInStop"  name="IR enabled in STOP" />
            </binaryOption>

            <intOption key="system_icsirclk_clock[%(n)]"
               ref="system_icsirclk_ungated"
               enabledBy="ics_c1_irclken[%(n)]||(icsClockMode[%(n)]==@FEI)||(icsClockMode[%(n)]==@FBI)||(icsClockMode[%(n)]==@FBILP),
                          Inactive as IRCLKEN not set and ICSIRCLK unused by active clock mode"
               locked="true"
               derived="true"
               origin="ICS Internal Reference Clock"
               units="Hz"
               description="ICS Internal Reference Clock [ICSIRC]"
               toolTip="Available to some peripherals if IRCLKEN is set. \n
Dependent on device and clock Trim. [Nominally 37.5 kHz]"
               disabledValue="0" />
         </category>

         <choiceOption key="ics_oscsel_fixed[%(n)]"
            target="ics_erc_clock[%(n)]"
            description="IC External reference clock"
            toolTip="Source for ICS External Reference Clock">
            <choice value="0" ref="/OSC0/osc_clock"          enum="OscClk"   code="Osc0Info::getOscClock()"      name="OSC0 Clock" />
         </choiceOption>

         <intOption key="ics_erc_clock[%(n)]"
            locked="true"
            units="Hz"
            derived="true"
            description="Frequency of ICS External reference"
            toolTip="External reference clock used by ICS"
            value="0" />

         <category name="FLL" description="FLL Settings">
            <binaryOption key="fll_enabled[%(n)]"
               derived="true"
               locked="true"
               description="FLL State"
               toolTip="Determined from clock mode selected" >
               <choice value="0" name="FLL Inactive" />
               <choice value="1" name="FLL Active"   />
            </binaryOption>

            <aliasOption key="/OSC0/osc_cr_range"   optional="true"   />

            <choiceOption key="ics_c1_rdiv[%(n)]" condition="ics_c1_rdiv_present"
               target="ics_erc_clock_divided[%(n)]"
               typeName="McgFllPrescale"
               description="FLL External Reference Divider"
               toolTip="Selects the amount to divide down the external reference clock for the FLL.\n
                        The resulting frequency must be in [31.25 kHz to 39.0625 kHz] to be suitable for the FLL\n
                        Division factors choices depends on clock Range [OSC_C2_RANGE]">
               <choice value="0" name="/1 (low)"     enum="LowDivBy1"     enabledBy="(/OSC0/osc_cr_range == false)" ref="ics_erc_clock[%(n)]"      />
               <choice value="1" name="/2 (low)"     enum="LowDivBy2"     enabledBy="(/OSC0/osc_cr_range == false)" ref="ics_erc_clock[%(n)]/2"    />
               <choice value="2" name="/4 (low)"     enum="LowDivBy3"     enabledBy="(/OSC0/osc_cr_range == false)" ref="ics_erc_clock[%(n)]/4"    />
               <choice value="3" name="/8 (low)"     enum="LowDivBy8"     enabledBy="(/OSC0/osc_cr_range == false)" ref="ics_erc_clock[%(n)]/8"    />
               <choice value="4" name="/16 (low)"    enum="LowDivBy16"    enabledBy="(/OSC0/osc_cr_range == false)" ref="ics_erc_clock[%(n)]/16"   />
               <choice value="5" name="/32 (low)"    enum="LowDivBy32"    enabledBy="(/OSC0/osc_cr_range == false)" ref="ics_erc_clock[%(n)]/32"   />
               <choice value="6" name="/64 (low)"    enum="LowDivBy64"    enabledBy="(/OSC0/osc_cr_range == false)" ref="ics_erc_clock[%(n)]/64"   />
               <choice value="7" name="/128 (low)"   enum="LowDivBy128"   enabledBy="(/OSC0/osc_cr_range == false)" ref="ics_erc_clock[%(n)]/128"  />

               <choice value="0" name="/32 (high)"   enum="HighDivBy32"   enabledBy="(/OSC0/osc_cr_range == true)" ref="ics_erc_clock[%(n)]/32"   />
               <choice value="1" name="/64 (high)"   enum="HighDivBy64"   enabledBy="(/OSC0/osc_cr_range == true)" ref="ics_erc_clock[%(n)]/64"   />
               <choice value="2" name="/128 (high)"  enum="HighDivBy128"  enabledBy="(/OSC0/osc_cr_range == true)" ref="ics_erc_clock[%(n)]/128"  />
               <choice value="3" name="/256 (high)"  enum="HighDivBy256"  enabledBy="(/OSC0/osc_cr_range == true)" ref="ics_erc_clock[%(n)]/256"  />
               <choice value="4" name="/512 (high)"  enum="HighDivBy512"  enabledBy="(/OSC0/osc_cr_range == true)" ref="ics_erc_clock[%(n)]/512"  />
               <choice value="5" name="/1024 (high)" enum="HighDivBy1024" enabledBy="(/OSC0/osc_cr_range == true)" ref="ics_erc_clock[%(n)]/1024" />
               <choice value="6" name="Reserved"     enum="Reserved6"     enabledBy="(/OSC0/osc_cr_range == true)" ref="Disabled"   />
               <choice value="7" name="Reserved"     enum="Reserved7"     enabledBy="(/OSC0/osc_cr_range == true)" ref="Disabled"  />
            </choiceOption>

            <intOption key="ics_erc_clock_divided[%(n)]"
               derived="true"
               locked="true"
               units="Hz"
               description="Divided external reference clock"
               toolTip="ics_erc_clock after FRDIV"
               value="32000"
               disabledValue="0" />

            <binaryOption key="ics_c1_irefs[%(n)]"
               typeName="McgIref"
               target="irefs_clock[%(n)]"
               derived="true"
               locked="false"
               description="Internal Reference Select"
               toolTip="Selects the reference clock source for the FLL\n
                        This option is determined by the Clock Mode selection">
               <choice value="0" name="External Reference Clock" enum="External" ref="ics_erc_clock_divided[%(n)]" />
               <choice value="1" name="Internal Refernce Clock"  enum="Internal" ref="system_icsirclk_clock[%(n)]" />
            </binaryOption>

            <intOption key="irefs_clock[%(n)]"
               hidden="true"
               derived="true"
               enabledBy="(icsClockMode[%(n)]!=@FBILP)##Unavailable in FBILP" />

            <intOption key="system_icsffclk_clock[%(n)]"
               ref="irefs_clock[%(n)]"
               enabledBy="(irefs_clock[%(n)]&lt;=(system_icsoutclk_clock[%(n)]/8))&amp;&amp;(icsClockMode[%(n)]!=@FBILP)##Disabled in FBILP or if F &gt; (ICSOUTCLK/8)"
               hidden="true"
               units="Hz"
               derived="true"
               locked="true"
               description="ICS Fixed Frequency Clock [ICSFFCLK]"
               toolTip="Used as input clock to FLL and available to some peripherals\n
                        Derived from External Reference Clock or Slow IRC"
               value="0"/>

            <intOption key="fllInputFrequency[%(n)]"
               ref="irefs_clock[%(n)]"
               derived="true"
               locked="true"
               units="Hz"
               description="FLL Input clock frequency"
               toolTip="Frequency of input to FLL"
               value="32000"
               disabledValue="0"
               min="31250" max="39063" />

            <intOption key="system_icsfllclk_clock[%(n)]"
               enabledBy="((irefs_clock[%(n)]&gt;=31.25_kHz)&amp;&amp;(irefs_clock[%(n)]&lt;=39.0625_kHz))##Disabled as FLL input clock out of range"
               ref="fllInputFrequency[%(n)]*1280"
               max="50_MHz"
               units="Hz"
               description="FLL Output clock frequency"
               toolTip="Output of FLL.\n
                        Available as ICSFLLCLK and used for ICSOUTCLK in FEI or FEE clock modes"
               value="40000000"
               disabledValue="0" />

         </category>

         <aliasOption key="system_icsffclk_clock[%(n)]" />
         <aliasOption key="system_icsfllclk_clock[%(n)]" />

         <choiceOption key="ics_c2_bdiv[%(n)]" condition="ics_c2_bdiv_present"
            target="system_icsoutclk_clock[%(n)]"
            typeName="McgBusDivider"
            toolTip="This value can not be written or read back in some devices"
            description="Bus Frequency Divider" >
            <choice name="Divide by 1"    value="0" enum="DivideBy1"    ref="system_icsfllclk_clock[%(n)]"     />
            <choice name="Divide by 2"    value="1" enum="DivideBy2"    ref="system_icsfllclk_clock[%(n)]/2"   />
            <choice name="Divide by 4"    value="2" enum="DivideBy4"    ref="system_icsfllclk_clock[%(n)]/4"   />
            <choice name="Divide by 8"    value="3" enum="DivideBy8"    ref="system_icsfllclk_clock[%(n)]/8"   />
            <choice name="Divide by 16"   value="4" enum="DivideBy16"   ref="system_icsfllclk_clock[%(n)]/16"  />
            <choice name="Divide by 32"   value="5" enum="DivideBy32"   ref="system_icsfllclk_clock[%(n)]/32"  />
            <choice name="Divide by 64"   value="6" enum="DivideBy64"   ref="system_icsfllclk_clock[%(n)]/64"  />
            <choice name="Divide by 128"  value="7" enum="DivideBy128"  ref="system_icsfllclk_clock[%(n)]/128" />
         </choiceOption>

         <intOption key="system_icsoutclk_clock[%(n)]"
            max="50_MHz"
            min="1"
            derived="true"
            locked="true"
            units="Hz"
            description="System ICS Output Clock [ICSOUTCLK]"
            toolTip="ICS Main clock output"
            value="120000000"
            disabledValue="0" />

         <aliasOption key="/SIM/system_core_clock[%(n)]"    locked="false"  optional="true" />
         <aliasOption key="/SIM/system_bus_clock[%(n)]"     locked="false"  optional="true" />
         <aliasOption key="/SIM/system_flexbus_clock[%(n)]" locked="false"  optional="true" />
         <aliasOption key="/SIM/system_flash_clock[%(n)]"   locked="false"  optional="true" />

         <category name="Device Parameters" description="Register values">
            <category name="OSC_CR" description="ICS Control Register 2">
               <aliasOption key="/OSC0/osc_cr_oscen"       optional="true" />
               <aliasOption key="/OSC0/osc_cr_oscsten"     optional="true" />
               <aliasOption key="/OSC0/osc_cr_oscos"       optional="true" />
               <aliasOption key="/OSC0/osc_cr_range"       optional="true" />
               <aliasOption key="/OSC0/osc_cr_hgo"         optional="true" />
            </category>

            <category name="ICS_C1" description="ICS Control Register 1">
               <choiceOption key="ics_c1_clks[%(n)]" condition="ics_c1_clks_present"
                  typeName="McgClkSrc"
                  target="system_icsoutclk_clock[%(n)]"
                  derived="true"
                  locked="true"
                  description="ICSOUTCLK Clock Source Select"
                  toolTip="Selects the clock source for ICSOUTCLK\n
                           This option is determined by the Clock Mode selection" >
                  <choice value="0" name="Output of FLL"                        enum="Fll"   ref="system_icsfllclk_clock[%(n)]" />
                  <choice value="1" name="Internal reference clock is selected" enum="Iref"  ref="system_icsirclk_ungated" />
                  <choice value="2" name="External reference clock is selected" enum="Eref"  ref="ics_erc_clock[%(n)]" />
               </choiceOption>

               <aliasOption key="ics_c1_rdiv[%(n)]" />
               <aliasOption key="ics_c1_irefs[%(n)]" />
               <aliasOption key="ics_c1_irclken[%(n)]" />
               <aliasOption key="ics_c1_irefsten[%(n)]" />
            </category>

            <category name="ICS_C2" description="ICS Control Register 2">
               <aliasOption key="ics_c2_bdiv[%(n)]"              optional="true" />

               <binaryOption key="ics_c2_lp[%(n)]"
                  typeName="McgFllInLowpower"
                  derived="true"
                  locked="true"
                  description="Low Power Select"
                  toolTip="Whether FLL continues operation when bypassed\n
                           This option is determined by the Clock Mode selection">
                  <choice value="0" enum="Enabled"  name="FLL is enabled in bypass modes" />
                  <choice value="1" enum="Disabled" name="FLL is disabled in bypass modes" />
               </binaryOption>
            </category>

            <category name="ICS_C4" description="ICS Control Register 4">
               <aliasOption key="ics_c4_lolie0[%(n)]" />
               <aliasOption key="ics_c4_cme[%(n)]" />
            </category>

         </category>
      </categoryOption>
   </for>

<!-- Grahic here -->

   <variableTemplate variables="ics_oscsel_fixed[]"
   ><![CDATA[
      \t/**
      \t * Get %description
      \t *
      \t * @return Clock frequency in Hz
      \t */
      \tstatic uint32_t getExternalReferenceClock() {
      \t
      \t   return $(%variable.code[0]);
      \t}\n\n
      ]]></variableTemplate>

   <clockCodeTemplate variable="ics_c1_irclken[]"
      returnFormat="%s"
   ><![CDATA[
      \t//! ICS Internal Reference Clock
      \tstatic constexpr unsigned icsirclk = $(system_icsirclk_ungated);
      \t
      \t/**
      \t * Set %description
      \t *
      \t * @param %paramName %tooltip
      \t */
      \tstatic void enableMcgIrClock(%paramType %paramName) {
      \t   %fieldAssignment
      \t}

      \t/**
      \t * Get %description
      \t *
      \t * @return Clock frequency in Hz
      \t */
      \tstatic uint32_t getInternalReferenceClock() {
      \t
      \t   switch(%maskingExpression) {
      \t      default: return 0;
      %body
      \t   }
      \t}\n\n
      ]]></clockCodeTemplate>

   <for keys="n" dim="=/SIM/numberOfClockSettings">
      <template key="ClockConfig" codeGenCondition="enableClockConfiguration[%(n)]" ><![CDATA[
         \t$(ClockConfig[%(n)]://-- missing name for configuration --),\n
      ]]></template>
   </for>

   <for keys="n" dim="=/SIM/numberOfClockSettings">
      <template key="McgClockInfoEntries" codeGenCondition="enableClockConfiguration[%(n)]"
      ><![CDATA[
         \t{  // $(ClockConfig[%(n)]) ($(icsClockMode[%(n)].enum[]))
         \t\n
      ]]></template>

      <variableTemplate key="McgClockInfoEntries" codeGenCondition="enableClockConfiguration[%(n)]"
         terminator=","
         variables="
            /SIM/sim_clkdiv_outdiv3[%(n)],
            /SIM/sim_clkdiv_outdiv2[%(n)],
            /SIM/sim_clkdiv_outdiv1[%(n)]"
      ><![CDATA[\t   /// SIM CLKDIV1 System Clock Divider Register 1 %initExpression\n\n ]]></variableTemplate>

      <variableTemplate key="McgClockInfoEntries" codeGenCondition="enableClockConfiguration[%(n)]"
         terminator=","
         variables="
            icsClockMode[%(n)]"
      ><![CDATA[\t   /// Clock Mode %initExpression\n\n ]]></variableTemplate>

      <variableTemplate key="McgClockInfoEntries" codeGenCondition="enableClockConfiguration[%(n)]"
         terminator=","
         variables="
            ics_c1_rdiv[%(n)],
            ics_c1_irclken[%(n)],
            ics_c1_irefsten[%(n)]"
      ><![CDATA[\t   /// Control Register 1 - Excluding CLKS, IREFS %initExpression\n\n ]]></variableTemplate>

      <variableTemplate key="McgClockInfoEntries" codeGenCondition="enableClockConfiguration[%(n)]"
         terminator=","
         variables=
            "ics_c2_bdiv[%(n)]"
      ><![CDATA[\t   /// Control Register 2 - Excluding LP, FCTRIM %initExpression\n\n ]]></variableTemplate>

      <variableTemplate key="McgClockInfoEntries" codeGenCondition="enableClockConfiguration[%(n)]"
         terminator=","
         variables=
            "ics_c4_cme[%(n)],
             ics_c4_lolie0[%(n)]"
      ><![CDATA[\t   /// Control Register 4 - Excluding FCTRIM, SCFTRIM %initExpression\n\n ]]></variableTemplate>

      <template key="McgClockInfoEntries" codeGenCondition="enableClockConfiguration[%(n)]" ><![CDATA[
         \t},\n
      ]]></template>
   </for>

   <template key="ClockInfoType" ><![CDATA[
      \t/// Structure for clock configurations
      \tstruct ClockInfo {\n\n
   ]]></template>

   <template key="ClockInfoType" namespace="all"
      condition="/SIM/sim_clkdiv_outdiv3[]||/SIM/sim_clkdiv_outdiv2[]||/SIM/sim_clkdiv_outdiv1[]"
   ><![CDATA[
      \t   /// SIM CLKDIV1 - System Clock Divider Register 1
      \t   const uint32_t clkdiv1;\n\n ]]>
   </template>

   <template key="ClockInfoType" namespace="all"
      condition="(/SIM/sim_sopt2_pllfllsel[])||(/SIM/sim_sopt2_tpmsrc[])"
   ><![CDATA[
      \t   /// SIM SOPT2 - Clock selectors for various peripherals
      \t   const uint32_t sopt2;\n\n ]]>
   </template>


   <template key="ClockInfoType" namespace="all"
      condition="icsClockMode[]"
   ><![CDATA[
      \t   /// Clock Mode
      \t   const McgClockMode clockMode;\n\n
   ]]></template>

   <template key="ClockInfoType" namespace="all"
      condition="ics_c1_rdiv[]||ics_c1_irclken[]||ics_c1_irefsten[]"
   ><![CDATA[
      \t   /// Control Register 1 - RDIV, IRCLKEN, IREFSTEN, (-CLKS, -IREFS)
      \t   const uint8_t c1; \n ]]></template>

   <template key="ClockInfoType" namespace="all"
      condition="ics_c2_bdiv[]"
   ><![CDATA[
      \t   /// Control Register 2 - BDIV, (-LP)
      \t   const uint8_t c2;\n ]]></template>

   <template key="ClockInfoType" namespace="all"
      condition="ics_c4_lolie0[]||ics_c4_cme[]"
   ><![CDATA[
      \t   /// Control Register 4 - DMX32, DRST_DRS, (-FCTRIM, -SCFTRIM)
      \t   const uint8_t c4;\n ]]></template>

   <template key="ClockInfoType" ><![CDATA[
      \t};\n\n
   ]]></template>

   <projectActionList id = "ics_files" >
      <copy source="Startup_Code/mcg_no_pll.cpp"          target="Startup_Code/mcg_no_pll.cpp"           overwrite="true"  derived="true" />
      <copy source="Project_Headers/ics-mke.h"             target="Project_Headers/ics.h"                 overwrite="true"  derived="true" />
      <copy source="Snippets/mcg-test.cpp"                target="Snippets/mcg-test.cpp"                 overwrite="true"  derived="true" />
      <deleteResource target="Project_Headers/clock_configure.h" />
      <deleteResource target="Startup_Code/clock.c" />
   </projectActionList>

</fragment>
