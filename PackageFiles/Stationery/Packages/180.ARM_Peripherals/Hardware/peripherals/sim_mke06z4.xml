<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE peripheralPage SYSTEM "_menu.dtd" >
<!-- sim_mke06z4.xml -->

<peripheralPage xmlns:xi="http://www.w3.org/2001/XInclude" name="_instance" description="System Integration Module" >

<!-- ___________ Constants ____________________ -->

   <equation key="generateDefault"           value="false"         />
   <equation key="configureInStartupDefault" value="false"         />
   <xi:include href="enablePeripheral.xml"  />
   <title />

<!-- ____________________ Constants ____________________ -->

   <!-- Peripheral speeds                 RUN        -->
   <constant key="ICSOUTCLK_max"  value="50MHz"  type="Long"    hidden="false" />
   <constant key="ICSFLLCLK_max"  value="50MHz"  type="Long"    hidden="false" />
   <constant key="I2S_max"        value="25MHz"  type="Long"    hidden="false" />
   <constant key="LPUART_max"     value="48MHz"  type="Long"    hidden="false" />
   <constant key="FTM_max"        value="48MHz"  type="Long"    hidden="false" />

   <!-- LLWU wakeup devices -->
   <!-- None -->

   <!-- Clock divider -->
   <!-- None -->
   <!-- DMA slots -->
   <!-- None -->

   <!--
        Simple pin mapping information
        inputPinMap  Input pins with custom mapping implementation in peripheral file
        outputPinMap Output pins with custom mapping implementation in peripheral file
        pinMap       Default pin mapping enabled whenever the peripheral signal is enabled (done in enablePeripheral.xml)
   -->
   <!-- Pin mapping for ADC0 SE0-SE15 -->
   <constant key="/ADC0/inputPinMap" type="String"
      value='"PTA0,PTA1,PTA6,PTA7,PTB0,PTB1,PTB2,PTB3,PTC0,PTC1,PTC2,PTC3,PTF4,PTF5,PTF6,PTF7"' />

   <!-- Pin mapping for ACMP0 IN0,IN1,IN2 -->
   <constant key="/ACMP0/inputPinMap" type="String" value='"PTA0,PTA1,PTC4"' />

   <!-- Pin mapping for ACMP1 IN0,IN1,IN2 -->
   <constant key="/ACMP1/inputPinMap" type="String" value='"PTA6,PTA7,PTB4"' />


   <!-- FTM0 channels -->
   <dynamicSignalMapping signal="FTM0_CH0" >
      <signalMapping pin="-"     expression="!/FTM0/Ch0PinInUse"  />
      <signalMapping pin="PTA0"  expression="!sim_pinsel0_ftm0ps0"        />
      <signalMapping pin="PTB2" />
   </dynamicSignalMapping>
   <dynamicSignalMapping signal="FTM0_CH1" >
      <signalMapping pin="-"     expression="!/FTM0/Ch1PinInUse" />
      <signalMapping pin="PTA1"  expression="(!sim_pinsel0_ftm0ps1)"        />
      <signalMapping pin="PTB3" />
   </dynamicSignalMapping>

   <!-- FTM1 channels -->
   <dynamicSignalMapping signal="FTM1_CH0" >
      <signalMapping pin="-"     expression="!/FTM1/Ch0PinInUse"  />
      <signalMapping pin="PTC4"  expression="(!sim_pinsel0_ftm1ps0)"        />
      <signalMapping pin="PTH2" />
   </dynamicSignalMapping>
   <dynamicSignalMapping signal="FTM1_CH1" >
      <signalMapping pin="-"     expression="!/FTM1/Ch1PinInUse" />
      <signalMapping pin="PTC5"  expression="(!sim_pinsel0_ftm1ps1)"        />
      <signalMapping pin="PTE7" />
   </dynamicSignalMapping>

   <!-- FTM2 channels -->
   <dynamicSignalMapping signal="FTM2_CH0" >
      <signalMapping pin="-"     expression="!/FTM2/Ch0PinInUse"  />
      <signalMapping pin="PTC0"  expression="(sim_pinsel1_ftm2ps0==0)"        />
      <signalMapping pin="PTF0"  expression="(sim_pinsel1_ftm2ps0==1)"        />
      <signalMapping pin="PTH0" />
   </dynamicSignalMapping>
   <dynamicSignalMapping signal="FTM2_CH1" >
      <signalMapping pin="-"     expression="!/FTM2/Ch1PinInUse" />
      <signalMapping pin="PTC1"  expression="(sim_pinsel1_ftm2ps1==0)"        />
      <signalMapping pin="PTF1"  expression="(sim_pinsel1_ftm2ps1==1)"        />
      <signalMapping pin="PTH1" />
   </dynamicSignalMapping>
   <dynamicSignalMapping signal="FTM2_CH2" >
      <signalMapping pin="-"     expression="!/FTM2/Ch2PinInUse"  />
      <signalMapping pin="PTC2"  expression="(sim_pinsel1_ftm2ps2==0)"        />
      <signalMapping pin="PTD0"  expression="(sim_pinsel1_ftm2ps2==1)"        />
      <signalMapping pin="PTG4" />
   </dynamicSignalMapping>
   <dynamicSignalMapping signal="FTM2_CH3" >
      <signalMapping pin="-"     expression="!/FTM2/Ch3PinInUse" />
      <signalMapping pin="PTC3"  expression="(sim_pinsel1_ftm2ps3==0)"        />
      <signalMapping pin="PTD1"  expression="(sim_pinsel1_ftm2ps3==1)"        />
      <signalMapping pin="PTG5" />
   </dynamicSignalMapping>
   <dynamicSignalMapping signal="FTM2_CH4" >
      <signalMapping pin="-"     expression="!/FTM2/Ch4PinInUse"  />
      <signalMapping pin="PTB4"  expression="(!sim_pinsel1_ftm2ps4)"       />
      <signalMapping pin="PTG6" />
   </dynamicSignalMapping>
   <dynamicSignalMapping signal="FTM2_CH5" >
      <signalMapping pin="-"     expression="!/FTM2/Ch5PinInUse" />
      <signalMapping pin="PTB5"  expression="(!sim_pinsel1_ftm2ps5)"       />
      <signalMapping pin="PTG7" />
   </dynamicSignalMapping>

   <!-- FTM2 Hardware Triggers -->

   <constant key="/FTM2/hardwareTriggerSources" type="String"
       value='"ACMP0/ACMP1,FTM0_CH0,FTMSYNC"'  />

   <dynamicSignalMapping signal="FTM2_TRIG0" >
      <signalMapping pin="-"         expression="(/FTM2/ftm_sync_trig&amp;0b1)==0" />
      <signalMapping pin="ACMP1_O"   expression="sim_sopt0_actrg" />
      <signalMapping pin="ACMP0_O"   />
   </dynamicSignalMapping>
   <dynamicSignalMapping signal="FTM2_TRIG1" >
      <signalMapping pin="-"         expression="(/FTM2/ftm_sync_trig&amp;0b10)==0" />
      <signalMapping pin="FTM0_CH0"  />
   </dynamicSignalMapping>
   <dynamicSignalMapping signal="FTM2_TRIG2" >
      <signalMapping pin="-"         expression="(/FTM2/ftm_sync_trig&amp;0b100)==0" />
      <signalMapping pin="FTMSYNC"   />
   </dynamicSignalMapping>

   <!-- Fault pin mapping for FTM2 -->
   <for keys="inp" dim="4">
      <dynamicSignalMapping signal="FTM2_FLT%(inp)" >
         <signalMapping pin="*"     expression="/FTM2/ftm_fltctrl_fault%(inp)en != 0" />
         <signalMapping pin="-"    />
      </dynamicSignalMapping>
   </for>

   <!-- Pin mapping for IRQ -->
   <constant key="/IRQ/pinMap"      type="String" value='"IRQ,PTA5"' />

   <!-- Pin mapping for KBIs -->
   <constant key="/KBI0/inputPinMap" type="String" value='"PT(A-D)(0-7)"' />
   <constant key="/KBI1/inputPinMap" type="String" value='"PT(E-H)(0-7)"' />

   <!-- Pin mapping for OSC0 -->
   <constant key="/OSC0/pinMap"      type="String" value='"XTAL,PTB6;EXTAL,PTB7"' />

   <!-- Input names for PWT (mapping done in SIM XML) -->
   <constant key="/PWT/inputNames" value='"PTD5_PTE2","PTH7_PTB0","ACMPx_O","UARTx_RX"' type="String" />

   <!-- Pin mapping for TCLK 0, 1 and 2 inputs -->
   <for keys="tclk" dim="3" >
      <dynamicSignalMapping signal="TCLK%(tclk)" >
         <signalMapping
            pin="*"
            expression="
               (/FTM0/externalClockUsed&amp;&amp;(sim_pinsel0_ftm0clkps==%(tclk)))||
               (/FTM1/externalClockUsed&amp;&amp;(sim_pinsel0_ftm1clkps==%(tclk)))||
               (/FTM2/externalClockUsed&amp;&amp;(sim_pinsel0_ftm2clkps==%(tclk)))||
               (/PWT/externalClockUsed &amp;&amp;(sim_pinsel0_pwtclkps==%(tclk)))"  />
         <signalMapping pin="-" />
      </dynamicSignalMapping>
   </for>

   <xi:include href="simCommon.xml" />

   <!-- ____ Class Declaration __________________ -->
   <constant key="_class_declaration" type="String" value='"$(_Info) : public $(_Baseclass)BasicInfo"' />

   <for keys="n" dim="=numberOfClockSettings" >
      <aliasCategoryOption key="/ICS/ClockConfig[%(n)]" derived="true" locked="true" >

         <aliasOption key="/ICS/enableClockConfiguration[%(n)]" locked="false" />
         <if condition="%(n)==0">
            <aliasOption key="/ICS/ics_c2_bdiv[%(n)]" locked="false" />
         </if>
         <for keys="u : name              : code            : ref"
            values="0 : System bus clock : SystemBusClock : system_bus_clock[%(n)];
                    1 : System bus clock : SystemBusClock : system_bus_clock[%(n)];
                    2 : System bus clock : SystemBusClock : system_bus_clock[%(n)]" >

            <choiceOption key="system_uart%(u)_fixedclocksource[%(n)]"
               addToVar="Uart%(u)ExternalItems"
               hidden="true"
               target="system_uart%(u)_clock[%(n)]"
               locked="true"
               derived="true"
               description="UART%(u) Clock source"
               toolTip="Fixed clock source for UART (%(code))" >
               <choice value="0"  name="%(name)" ref="%(ref)" code="%(code)" />
            </choiceOption>

            <intOption key="system_uart%(u)_clock[%(n)]"
               addToVar="Uart%(u)ExternalItems"
               hidden="true"
               locked="true"
               derived="true"
               units="Hz"
               description="UART%(u) Clock frequency"
               toolTip="Frequency of clock to UART%(u)"
               value="0" />
         </for>

         <choiceOption key="sim_clkdiv_outdiv1[%(n)]" condition="sim_clkdiv_outdiv1_present"
            enabledBy="(%(n)==0)||/ICS/enableClockConfiguration[%(n)]"
            typeName="SimCoreClkDivider"
            toolTip="This field sets the divide value for the core/system clock"
            description="Core/System Clock Divider value" >
            <choice name="ICSOUTCLK/1"    value="0" enum="Direct" />
            <choice name="ICSOUTCLK/2"    value="1" enum="DivBy2" />
            <choice name="ICSOUTCLK/3"    value="2" enum="DivBy3" />
            <choice name="ICSOUTCLK/4"    value="3" enum="DivBy4" />
         </choiceOption>

         <binaryOption key="sim_clkdiv_outdiv2[%(n)]" condition="sim_clkdiv_outdiv2_present"
            enabledBy="(%(n)==0)||/ICS/enableClockConfiguration[%(n)]"
            typeName="SimBusClkDivider"
            toolTip="This field sets the divide value for the bus/FLASH, follows OUTDIV1"
            description="Bus/Flash Clock Divider value" >
            <choice name="Core clock/1"    value="0" enum="Direct" />
            <choice name="Core clock/2"    value="1" enum="DivBy2" />
         </binaryOption >

         <binaryOption key="sim_clkdiv_outdiv3[%(n)]" condition="sim_clkdiv_outdiv3_present"
            enabledBy="(%(n)==0)||/ICS/enableClockConfiguration[%(n)]"
            typeName="SimTimerClkDivider"
            toolTip="This field sets the divide value for the timers(FTM0, FTM2,PWT)"
            description="Timer Clock Divider value" >
            <choice name="ICSOUTCLK/1"    value="0" enum="Direct" />
            <choice name="ICSOUTCLK/2"    value="1" enum="DivBy2" />
         </binaryOption>

         <intOption key="system_core_clock[%(n)]"
            locked="true"
            enabledBy="(%(n)==0)||/ICS/enableClockConfiguration[%(n)]"
            ref="(/ICS/system_icsoutclk_clock[%(n)])/((sim_clkdiv_outdiv1[%(n)])+1)#/ICS/system_icsoutclk_clock[%(n)]"
            derived="true"
            isNamedClock="true"
            units="Hz"
            description="System Core Clock"
            toolTip="Clock for CORE (CPU) and SYSTEM (NVIC, RAM, ...)"
            value="48 MHz"
            disabledValue="0"
            min="1" />

         <intOption key="system_bus_clock[%(n)]"
            locked="true"
            enabledBy="(%(n)==0)||/ICS/enableClockConfiguration[%(n)]"
            ref="(system_core_clock[%(n)])/((sim_clkdiv_outdiv2[%(n)])?2:1)#system_core_clock[%(n)]"
            derived="true"
            isNamedClock="true"
            units="Hz"
            description="System Bus Clock"
            toolTip="Clock for Bus (PIT, I2C, SPI, UART, ...)"
            value="8 MHz"
            disabledValue="0"
            min="1"/>

         <intOption key="system_timer_clock[%(n)]"
            locked="true"
            enabledBy="(%(n)==0)||/ICS/enableClockConfiguration[%(n)]"
            ref="(/ICS/system_icsoutclk_clock[%(n)])/((sim_clkdiv_outdiv3[%(n)])?2:1)#/ICS/system_icsoutclk_clock[%(n)]"
            derived="true"
            isNamedClock="true"
            units="Hz"
            description="System Timer Clock"
            toolTip="Clock for timers (FTM, PWT, ...)"
            value="8 MHz"
            disabledValue="0"
            min="1"/>

      </aliasCategoryOption>
   </for>

   <title />

   <category name="Control Signals" description="Control Signal Mapping" >
      <binaryOption key="sim_scgc_swd" condition="sim_scgc_swd_present"
         enabledBy="$(_BasicInfoGuard)"
         disabledValue="1"
         typeName="SimScgcSwd"
         description="SWD Clock Gate Control" >
         <choice name="Clock disabled"  value="0" enum="ClockDisabled" />
         <choice name="Clock enabled"   value="1" enum="ClockEnabled" isDefault="true" />
      </binaryOption>

      <binaryOption key="sim_sopt0_swde" condition="sim_sopt0_swde_present"
         ref="sim_scgc_swd"
         enabledBy="$(_BasicInfoGuard)"
         locked="true"
         derived="true"
         disabledValue="1"
         typeName="SimSWDEnable"
         disabledPinMap="SWD_DIO,PTA4;SWD_CLK,PTC4"
         toolTip="Controls: \n
                  PTA4 as PTA4/ACMP0_OUT or SWD_DIO, \n
                  PTC4 as PTC4/RTC_CLKOUT/FTM1_CH0/ACMP0_IN2 or SWD_CLK functions"
         description="Single Wire Debug Port Pin Enable" >
         <choice name="PTA4, PTC4 available for peripherals"  value="0" enum="Pta4Ptc4AsPeripheralPins" pinMap="SWD_DIO,;SWD_CLK," />
         <choice name="PTA4, PTC4 mapped as SWD pins"         value="1" enum="Pta4Ptc4AsSwdPins"        pinMap="SWD_DIO,PTA4;SWD_CLK,PTC4" isDefault="true" />
      </binaryOption>

      <binaryOption key="sim_sopt0_rstpe" condition="sim_sopt0_rstpe_present"
         enabledBy="$(_BasicInfoGuard)"
         disabledValue="1"
         typeName="SimResetEnable"
         toolTip="This field can only be written once after any reset"
         description="RESET Pin Enable" >
         <choice name="PTA5 available for peripherals"  value="0" enum="Pta5AsPeripheralPin" pinMap="RESET_b," />
         <choice name="PTA5 mapped as RESET"            value="1" enum="Pta5AsReset"         pinMap="RESET_b,PTA5" isDefault="true" />
      </binaryOption>

      <binaryOption key="sim_sopt0_nmie" condition="sim_sopt0_nmie_present"
         enabledBy="$(_BasicInfoGuard)"
         disabledValue="1"
         typeName="SimNmiEnable"
         toolTip="This field can only be written once after any reset"
         description="NMI Pin Enable" >
         <choice name="PTB4 available for peripherals" value="0" enum="Ptb4AsPeripheralPins" pinMap="NMI_b," />
         <choice name="PTB4 mapped as NMI"             value="1" enum="Ptb4AsNmi"            pinMap="NMI_b,PTB4" isDefault="true" />
      </binaryOption>

      <choiceOption key="sim_sopt0_busref" condition="sim_sopt0_busref_present"
         enabledBy="$(_BasicInfoGuard)"
         valueFormat="SIM_SOPT0_CLKOE(%s),SIM_SOPT0_BUSREF(%s)"
         typeName="SimSoptRefClock"
         toolTip="Enable bus reference clock output on PTH2 with prescaler"
         description="BUS Clock Output select" >
         <choice name="Disabled (PTH2 available)" value="0,0" enum="Disabled"             pinMap="CLKOUT," />
         <choice name="Bus clock"                 value="1,0" enum="BusClock"             pinMap="CLKOUT,PTH2"  />
         <choice name="Bus clock divided by 2"    value="1,1" enum="BusClockDividedBy2"   pinMap="CLKOUT,PTH2"  />
         <choice name="Bus clock divided by 4"    value="1,2" enum="BusClockDividedBy4"   pinMap="CLKOUT,PTH2"  />
         <choice name="Bus clock divided by 8"    value="1,3" enum="BusClockDividedBy8"   pinMap="CLKOUT,PTH2"  />
         <choice name="Bus clock divided by 16"   value="1,4" enum="BusClockDividedBy16"  pinMap="CLKOUT,PTH2"  />
         <choice name="Bus clock divided by 32"   value="1,5" enum="BusClockDividedBy32"  pinMap="CLKOUT,PTH2"  />
         <choice name="Bus clock divided by 64"   value="1,6" enum="BusClockDividedBy64"  pinMap="CLKOUT,PTH2"  />
         <choice name="Bus clock divided by 128"  value="1,7" enum="BusClockDividedBy128" pinMap="CLKOUT,PTH2"  />
      </choiceOption>
   </category>

   <category name="ACMP" description="ACMP Options" >
      <binaryOption key="sim_scgc_acmp0" condition="sim_scgc_acmp0_present"
         enabledBy="$(_BasicInfoGuard)"
         typeName="SimScgcAcmp0"
         description="ACMP0 Clock Gate Control" >
         <choice name="Clock disabled"  value="0" enum="ClockDisabled" />
         <choice name="Clock enabled"   value="1" enum="ClockEnabled" />
      </binaryOption>

      <binaryOption key="sim_scgc_acmp1" condition="sim_scgc_acmp1_present"
         enabledBy="$(_BasicInfoGuard)"
         typeName="SimScgcAcmp1"
         description="ACMP1 Clock Gate Control" >
         <choice name="Clock disabled"  value="0" enum="ClockDisabled" />
         <choice name="Clock enabled"   value="1" enum="ClockEnabled" />
      </binaryOption>

      <aliasOption key="sim_sopt0_actrg" locked="false" optional="true" />
   </category>

   <category name="ADC" description="ADC Options" >
      <binaryOption key="sim_scgc_adc0" condition="sim_scgc_adc0_present"
         enabledBy="$(_BasicInfoGuard)"
         typeName="SimScgcAdc"
         description="ADC Clock Gate Control" >
         <choice name="Clock disabled"  value="0" enum="ClockDisabled" />
         <choice name="Clock enabled"   value="1" enum="ClockEnabled" />
      </binaryOption>

      <choiceOption key="sim_sopt0_adhwt" condition="sim_sopt0_adhwt_present"
         enabledBy="$(_BasicInfoGuard)"
         addToVar="Adc0ExternalItems"
         typeName="SimSoptAdhwt"
         toolTip="Selects the ADC hardware trigger source. All trigger sources start ADC conversion on rising-edge"
         description="ADC Hardware Trigger Source" >
         <choice name="RTC overflow"                         value="0" enum="RtcOverflow" />
         <choice name="FTM0"                                 value="1" enum="Ftm0" />
         <choice name="FTM2 init trigger with 8-bit delay"   value="2" enum="Ftm2InitTriggerWith8BitDelay" />
         <choice name="FTM2 match trigger with 8-bit delay"  value="3" enum="Ftm2MatchTriggerWith8BitDelay" />
         <choice name="PIT channel 0 overflow"               value="4" enum="PitChannel0Overflow" />
         <choice name="PIT channel 1 overflow"               value="5" enum="PitChannel1Overflow" />
         <choice name="ACMP0 OUT"                            value="6" enum="Acmp0Out" />
         <choice name="ACMP1 OUT"                            value="7" enum="Acmp1Out" />
      </choiceOption>

      <intOption key="sim_sopt0_delay" condition="sim_sopt0_delay_present"
         addToVar="Adc0ExternalItems"
         enabledBy="$(_BasicInfoGuard)"
         units="ticks"
         description="FTM2 Trigger Delay"
         toolTip="Specifies the delay from FTM2 initial or match trigger to ADC hardware trigger when 1 is written to ADHWT.\n
                  The 8-bit modulo value allows the delay from 0 to 255 upon the BUSREF clock settings.\n
                  This is a one-shot counter that starts ticking when the trigger arrives and stops ticking when the counter value reaches the modulo value that is defined"
                  value="0"
      />
   </category>

   <category name="CAN" description="CAN Options" >
      <binaryOption key="sim_scgc_mscan" condition="sim_scgc_mscan_present"
         enabledBy="$(_BasicInfoGuard)"
         typeName="SimScgcMscan"
         description="CAN Clock Gate Control" >
         <choice name="Clock disabled"  value="0" enum="ClockDisabled" />
         <choice name="Clock enabled"   value="1" enum="ClockEnabled" />
      </binaryOption>

      <binaryOption key="sim_pinsel1_mscanps" condition="sim_pinsel1_mscanps_present"
         enabledBy="$(_BasicInfoGuard)"
         disabledPinMap="#/CAN0/enablePeripheralSupport"
         typeName="SimPinselMscanps"
         toolTip="Selects the pins used by CAN"
         description="CAN Pin Select" >
         <choice name="CAN0_TX on PTC7, CAN0_RX on PTC6"  value="0" enum="Can_txOnPtc7_Can_rxOnPtc6" pinMap="CAN0_TX,PTC7;CAN0_RX,PTC6" />
         <choice name="CAN0_TX on PTE7, CAN0_RX on PTH2"  value="1" enum="Can_txOnPte7_Can_rxOnPth2" pinMap="CAN0_TX,PTE7;CAN0_RX,PTH2" />
      </binaryOption>
   </category>

   <category name="CRC" description="CRC Options" >
      <binaryOption key="sim_scgc_crc" condition="sim_scgc_crc_present"
         enabledBy="$(_BasicInfoGuard)"
         typeName="SimScgcCrc"
         description="CRC Clock Gate Control" >
         <choice name="Clock disabled"  value="0" enum="ClockDisabled" />
         <choice name="Clock enabled"   value="1" enum="ClockEnabled" />
      </binaryOption>
   </category>

   <category name="FLASH" description="FLASH Options" >
      <binaryOption key="sim_scgc_flash" condition="sim_scgc_flash_present"
         enabledBy="$(_BasicInfoGuard)"
         disabledValue="1"
         typeName="SimScgcFlash"
         description="FLASH Clock Gate Control" >
         <choice name="Clock disabled"  value="0" enum="ClockDisabled" />
         <choice name="Clock enabled"   value="1" enum="ClockEnabled" isDefault="true" />
      </binaryOption>
   </category>

   <for keys="n" values="0;1;2" >
      <intOption key="Tclk%(n)"
         hidden="true"
         addToVar="FtmExternalItems,PwtExternalItems"
         description="Timer External clock input #%(n)"
         toolTip="This input is available as an external clock source for the timers"
         value="0"
         units="Hz"
      />
      <variableTemplate variables="Tclk%(n)"
         initExpressionOnSameLine="true"
      ><![CDATA[
         \t/// %tooltip
         \tstatic constexpr uint32_t Tclk%(n) =  %initExpression;
         \t\n
      ]]></variableTemplate>
   </for>

   <category name="FTM" description="FTM Options" >

      <for keys="n" values="0;1;2" >
         <aliasOption key="Tclk%(n)" locked="false" />
      </for>
      <binaryOption key="sim_sopt0_ftmsync" condition="sim_sopt0_ftmsync_present"
         enabledBy="$(_BasicInfoGuard)"
         typeName="SimSoptFtmsync"
         derived="true"
         locked="true"
         hidden="true"
         toolTip="Writing this field generates a PWM synchronisation trigger to the FTM2 module"
         description="FTM2 Synchronisation Select" >
         <choice name="Generates trigger"  value="1" enum="GenerateFtmTrigger" isDefault="true" />
      </binaryOption>

      <for keys="ftmNum" values="0;1;2;3" >

         <title description="FTM %(ftmNum)"/>

         <binaryOption key="sim_scgc_ftm%(ftmNum)" condition="sim_scgc_ftm%(ftmNum)_present"
            addToVar="Ftm%(ftmNum)ExternalItems"
            enabledBy="$(_BasicInfoGuard)"
            typeName="SimScgcFtm%(ftmNum)"
            description="FTM%(ftmNum) Clock Gate Control" >
            <choice name="Clock disabled"  value="0" enum="ClockDisabled" />
            <choice name="Clock enabled"   value="1" enum="ClockEnabled" />
         </binaryOption>

         <choiceOption key="sim_pinsel0_ftm%(ftmNum)clkps" condition="sim_pinsel0_ftm%(ftmNum)clkps_present"
            target="ftm%(ftmNum)ExternalClock"
            addToVar="Ftm%(ftmNum)ExternalItems"
            enabledBy="$(_BasicInfoGuard)"
            typeName="SimPinselFtm%(ftmNum)clkps"
            description="FTM%(ftmNum) TCLK Pin Select" >
            <choice name="Selects TCLK0 for FTM%(ftmNum) module"  value="0" enum="Tclk0" ref="Tclk0" code="Tclk0" />
            <choice name="Selects TCLK1 for FTM%(ftmNum) module"  value="1" enum="Tclk1" ref="Tclk1" code="Tclk1" />
            <choice name="Selects TCLK2 for FTM%(ftmNum) module"  value="2" enum="Tclk2" ref="Tclk2" code="Tclk2" />
         </choiceOption>

         <intOption key="ftm%(ftmNum)ExternalClock" condition="sim_pinsel0_ftm%(ftmNum)clkps"
            addToVar="Ftm%(ftmNum)ExternalItems"
            toolTip="The frequency of the external clock selected for FTM%(ftmNum)"
            description="FTM%(ftmNum) external clock"
            locked="true"
            derived="true"
            units="Hz" />

         <clockCodeTemplate variable="sim_pinsel0_ftm%(ftmNum)clkps"
            returnFormat="%s"
         ><![CDATA[
            \t/**
            \t * Get %description
            \t *
            \t * @return Clock frequency in Hz
            \t */
            \tstatic uint32_t getFtm%(ftmNum)ExternalClockFrequency() {
            \t
            \t   switch(%maskingExpression) {
            \t      default: return 0;
            %body
            \t   }
            \t}\n\n
         ]]></clockCodeTemplate>

         <binaryOption key="sim_pinsel0_ftm0ps0" condition="sim_pinsel0_ftm0ps0_present&amp;&amp;(%(ftmNum)==0)"
            addToVar="Ftm0ExternalItems"
            enabledBy="$(_BasicInfoGuard)"
            typeName="SimPinselFtm0ps0"
            description="FTM0 channel 0 Pin Select" >
            <choice name="PTA0"        value="0" enum="Pta0" />
            <choice name="PTB2"        value="1" enum="Ptb2" />
         </binaryOption>

         <binaryOption key="sim_pinsel0_ftm0ps1" condition="sim_pinsel0_ftm0ps1_present&amp;&amp;(%(ftmNum)==0)"
            addToVar="Ftm0ExternalItems"
            enabledBy="$(_BasicInfoGuard)"
            typeName="SimPinselFtm0ps1"
            description="FTM0 channel 1 Pin Select" >
            <choice name="PTA1"        value="0" enum="Pta1" />
            <choice name="PTB3"        value="1" enum="Ptb3" />
         </binaryOption>

         <binaryOption key="sim_sopt0_rxdce" condition="sim_sopt0_rxdce_present&amp;&amp;(%(ftmNum)==0)"
            addToVar="Ftm0ExternalItems,Uart0ExternalItems"
            enabledBy="$(_BasicInfoGuard)"
            typeName="SimSoptRxdce"
            toolTip="Enables the UART0_RX to be captured by FTM0 channel 1"
            description="UART0_RX Capture on FTM0 channel 1" >
            <choice name="Not connected"                         value="0" enum="NotConnected" />
            <choice name="UART0_RX connected as FTM0 channel 1"  value="1" enum="Uart0_rxConnectedAsFtm0Channel1" />
         </binaryOption>

         <binaryOption key="sim_sopt0_acic" condition="sim_sopt0_acic_present&amp;&amp;(%(ftmNum)==1)"
            addToVar="Ftm1ExternalItems,Acmp0ExternalItems"
            enabledBy="$(_BasicInfoGuard)"
            typeName="SimSoptAcic"
            toolTip="Connects the output of ACMP0 to FTM1 input channel 0"
            description="Analog Comparator on FTM1 input channel 0" >
            <choice name="ACMP0_OUT is not connected"          value="0" enum="Acmp0_outIsNotConnected" />
            <choice name="ACMP0_OUT is used as input channel"  value="1" enum="Acmp0_outIsUsedAsInputChannel" />
         </binaryOption>

         <binaryOption key="sim_sopt0_rtcc" condition="sim_sopt0_rtcc_present&amp;&amp;(%(ftmNum)==1)"
            addToVar="Ftm1ExternalItems,RtcExternalItems"
            enabledBy="$(_BasicInfoGuard)"
            typeName="SimSoptRtcc"
            toolTip="Allows the Real-time Counter (RTC) overflow to be captured by FTM1 channel 1"
            description="Real-Time Counter on FTM1 input channel 1" >
            <choice name="RTC not connected"                   value="0" enum="RtcNotConnected" />
            <choice name="RTC overflow used as input channel"  value="1" enum="RtcOverflowUsedAsInputChannel" />
         </binaryOption>

         <binaryOption key="sim_pinsel0_ftm1ps0" condition="sim_pinsel0_ftm1ps0_present&amp;&amp;(%(ftmNum)==1)"
            addToVar="Ftm1ExternalItems"
            enabledBy="$(_BasicInfoGuard)"
            disabledPinMap="#/FTM1/enablePeripheralSupport&amp;&amp;/FTM1/Ch0PinInUse"
            typeName="SimPinselFtm1ps0"
            description="FTM1 channel 0 Pin Select" >
            <choice name="PTC4"        value="0" enum="Ptc4" pinMap="FTM1_CH0,PTC4" />
            <choice name="PTH2"        value="1" enum="Pth2" pinMap="FTM1_CH0,PTH2" />
         </binaryOption>

         <binaryOption key="sim_pinsel0_ftm1ps1" condition="sim_pinsel0_ftm1ps1_present&amp;&amp;(%(ftmNum)==1)"
            addToVar="Ftm1ExternalItems"
            enabledBy="$(_BasicInfoGuard)"
            disabledPinMap="#/FTM1/enablePeripheralSupport&amp;&amp;/FTM1/Ch1PinInUse"
            typeName="SimPinselFtm1ps1"
            description="FTM1 channel 1 Pin Select" >
            <choice name="PTC5"        value="0" enum="Ptc5" pinMap="FTM1_CH1,PTC5" />
            <choice name="PTE7"        value="1" enum="Pte7" pinMap="FTM1_CH1,PTE7" />
         </binaryOption>

         <binaryOption key="sim_sopt0_actrg" condition="sim_sopt0_actrg_present&amp;&amp;(%(ftmNum)==2)"
            addToVar="Ftm2ExternalItems,AcmpExternalItems"
            enabledBy="$(_BasicInfoGuard)"
            typeName="SimSoptActrg"
            toolTip="Selects ACMP output to use as the trigger0 input of FTM2"
            description="ACMP Trigger FTM2 selection"
            disabledPinMap="FTM2_TRIG0,#/FTM2/enablePeripheralSupport&amp;&amp;((/FTM2/ftm_sync_trig&amp;0b1)!=0)">
            <choice name="ACMP0_OUT"   value="0" enum="Acmp0_out" pinMap="FTM2_TRIG0,ACMP0_O" />
            <choice name="ACMP1_OUT"   value="1" enum="Acmp1_out" pinMap="FTM2_TRIG0,ACMP1_O" />
         </binaryOption>

         <aliasOption key="sim_sopt0_delay" locked="false" optional="true" condition="%(ftmNum)==2"/>

         <choiceOption key="sim_pinsel1_ftm2ps0" condition="sim_pinsel1_ftm2ps0_present&amp;&amp;(%(ftmNum)==2)"
            addToVar="Ftm2ExternalItems"
            enabledBy="$(_BasicInfoGuard)"
            typeName="SimPinselFtm2ps0"
            description="FTM2 Channel 0 Pin Select" >
            <choice name="PTC0"        value="0" enum="Ptc0" />
            <choice name="PTH0"        value="1" enum="Pth0" />
            <choice name="PTF0"        value="2" enum="Ptf0" />
         </choiceOption>

         <choiceOption key="sim_pinsel1_ftm2ps1" condition="sim_pinsel1_ftm2ps1_present&amp;&amp;(%(ftmNum)==2)"
            addToVar="Ftm2ExternalItems"
            enabledBy="$(_BasicInfoGuard)"
            typeName="SimPinselFtm2ps1"
            description="FTM2 Channel 1 Pin Select" >
            <choice name="PTC1"        value="0" enum="Ptc1" />
            <choice name="PTH1"        value="1" enum="Pth1" />
            <choice name="PTF1"        value="2" enum="Ptf1" />
         </choiceOption>

         <choiceOption key="sim_pinsel1_ftm2ps2" condition="sim_pinsel1_ftm2ps2_present&amp;&amp;(%(ftmNum)==2)"
            addToVar="Ftm2ExternalItems"
            enabledBy="$(_BasicInfoGuard)"
            typeName="SimPinselFtm2ps2"
            description="FTM2 Channel 2 Pin Select" >
            <choice name="PTC2"        value="0" enum="Ptc2" />
            <choice name="PTD0"        value="1" enum="Ptd0" />
            <choice name="PTG4"        value="2" enum="Ptg4" />
         </choiceOption>

         <choiceOption key="sim_pinsel1_ftm2ps3" condition="sim_pinsel1_ftm2ps3_present&amp;&amp;(%(ftmNum)==2)"
            addToVar="Ftm2ExternalItems"
            enabledBy="$(_BasicInfoGuard)"
            typeName="SimPinselFtm2ps3"
            description="FTM2 Channel 3 Pin Select" >
            <choice name="PTC3"        value="0" enum="Ptc3" />
            <choice name="PTD1"        value="1" enum="Ptd1" />
            <choice name="PTG5"        value="2" enum="Ptg5" />
         </choiceOption>

         <binaryOption key="sim_pinsel1_ftm2ps4" condition="sim_pinsel1_ftm2ps4_present&amp;&amp;(%(ftmNum)==2)"
            addToVar="Ftm2ExternalItems"
            enabledBy="$(_BasicInfoGuard)"
            typeName="SimPinselFtm2ps4"
            description="FTM2 Channel 4 Pin Select" >
            <choice name="PTB4"        value="0" enum="Ptb4" />
            <choice name="PTG6"        value="1" enum="Ptg6" />
         </binaryOption>

         <binaryOption key="sim_pinsel1_ftm2ps5" condition="sim_pinsel1_ftm2ps5_present&amp;&amp;(%(ftmNum)==2)"
            addToVar="Ftm2ExternalItems"
            enabledBy="$(_BasicInfoGuard)"
            typeName="SimPinselFtm2ps5"

            description="FTM2 Channel 5 Pin Select" >
            <choice name="PTB5"        value="0" enum="Ptb5" />
            <choice name="PTG7"        value="1" enum="Ptg7" />
         </binaryOption>
      </for>
   </category>

   <category name="I2C" description="I2C Options" >

      <title description="I2C 0"/>

      <binaryOption key="sim_scgc_i2c0" condition="sim_scgc_i2c0_present"
         enabledBy="$(_BasicInfoGuard)"
         typeName="SimScgcI2c0"
         description="I2C0 Clock Gate Control" >
         <choice name="Clock disabled"  value="0" enum="ClockDisabled" />
         <choice name="Clock enabled"   value="1" enum="ClockEnabled" />
      </binaryOption>

      <binaryOption key="sim_pinsel0_i2c0ps" condition="sim_pinsel0_i2c0ps_present"
         addToVar="I2c0ExternalItems"
         enabledBy="$(_BasicInfoGuard)"
         typeName="SimPinselI2c0ps"
         disabledPinMap="#/I2C0/enablePeripheralSupport"
         description="I2C0 Pin Select" >
         <choice name="PTA3,PTA2 mapped to SCL,SDA"  value="0" enum="Pta3Pta2MappedToI2c0" pinMap="I2C0_SCL,PTA3;I2C0_SDA,PTA2" />
         <choice name="PTB7,PTB6 mapped to SCL,SDA"  value="1" enum="Ptb7Ptb6MappedToI2c0" pinMap="I2C0_SCL,PTB7;I2C0_SDA,PTB6" />
      </binaryOption>

      <binaryOption key="sim_sopt1_i2c0oinv" condition="sim_sopt1_i2c0oinv_present"
         addToVar="I2c0ExternalItems"
         enabledBy="$(_BasicInfoGuard)"
         typeName="SimSoptI2c0oinv"
         toolTip="This field controls inversion of the I2C0 SDA_OUT and SCL_OUT in 4-wire mode"
         description="I2C0 Output Invert in 4-wire mode" >
         <choice name="Not inverted" value="0" enum="NotInverted" />
         <choice name="Inverted"     value="1" enum="Inverted" />
      </binaryOption>

      <binaryOption key="sim_sopt1_i2c04wen" condition="sim_sopt1_i2c04wen_present"
         addToVar="I2c0ExternalItems"
         enabledBy="$(_BasicInfoGuard)"
         typeName="SimSoptI2c04wen"
         toolTip="This field controls I2C0 4-wire interface configuration.\n
                  NOTE: This field works only when SIM_PINSEL0[I2C0PS] is 0"
         description="I2C0 4-Wire Interface Enable" >
         <choice name="4-wire interface disabled"  value="0" enum="Disabled" />
         <choice name="4-wire interface enabled"   value="1" enum="Enabled"  />
      </binaryOption>

      <title description="I2C 1"/>

      <binaryOption key="sim_scgc_i2c1" condition="sim_scgc_i2c1_present"
         addToVar="I2c1ExternalItems"
         enabledBy="$(_BasicInfoGuard)"
         typeName="SimScgcI2c1"
         description="I2C1 Clock Gate Control" >
         <choice name="Clock disabled"  value="0" enum="ClockDisabled" />
         <choice name="Clock enabled"   value="1" enum="ClockEnabled" />
      </binaryOption>

      <binaryOption key="sim_pinsel1_i2c1ps" condition="sim_pinsel1_i2c1ps_present"
         addToVar="I2c1ExternalItems"
         enabledBy="$(_BasicInfoGuard)"
         disabledPinMap="#/I2C1/enablePeripheralSupport"
         typeName="SimPinselI2c1ps"
         description="I2C1 Pin Select" >
         <choice name="PTE1,PTE0 mapped to SCL,SDA"  value="0" enum="Pte1Pte0MappedToI2c0" pinMap="I2C1_SCL,PTE1;I2C1_SDA,PTE0" />
         <choice name="PTH4,PTH3 mapped to SCL,SDA"  value="1" enum="Pth4Pth3MappedToI2c0" pinMap="I2C1_SCL,PTH4;I2C1_SDA,PTH3" />
      </binaryOption>
   </category>

   <category name="IRQ" description="IRQ Options" >
      <binaryOption key="sim_scgc_irq" condition="sim_scgc_irq_present"
         enabledBy="$(_BasicInfoGuard)"
         typeName="SimScgcIrq"
         description="IRQ Clock Gate Control" >
         <choice name="Clock disabled"  value="0" enum="ClockDisabled" />
         <choice name="Clock enabled"   value="1" enum="ClockEnabled" />
      </binaryOption>

      <choiceOption key="sim_pinsel0_irqps" condition="sim_pinsel0_irqps_present"
         addToVar="IrqExternalItems"
         enabledBy="$(_BasicInfoGuard)"
         disabledPinMap="#/IRQ/enablePeripheralSupport"
         typeName="SimPinselIrqps"
         toolTip="Selects the IRQ port pins"
         description="IRQ Pin Select" >
         <choice name="PTA5"        value="0" enum="Pta5" pinMap="IRQ,PTA5" />
         <choice name="PTI0"        value="1" enum="Pti0" pinMap="IRQ,PTI0" />
         <choice name="PTI1"        value="2" enum="Pti1" pinMap="IRQ,PTI1" />
         <choice name="PTI2"        value="3" enum="Pti2" pinMap="IRQ,PTI2" />
         <choice name="PTI3"        value="4" enum="Pti3" pinMap="IRQ,PTI3" />
         <choice name="PTI4"        value="5" enum="Pti4" pinMap="IRQ,PTI4" />
         <choice name="PTI5"        value="6" enum="Pti5" pinMap="IRQ,PTI5" />
         <choice name="PTI6"        value="7" enum="Pti6" pinMap="IRQ,PTI6" />
      </choiceOption>
   </category>

   <category name="KBI" description="KBI Options" >
      <binaryOption key="sim_scgc_kbi0" condition="sim_scgc_kbi0_present"
         enabledBy="$(_BasicInfoGuard)"
         typeName="SimScgcKbi0"
         description="KBI0 Clock Gate Control" >
         <choice name="Clock disabled"  value="0" enum="ClockDisabled" />
         <choice name="Clock enabled"   value="1" enum="ClockEnabled" />
      </binaryOption>

      <binaryOption key="sim_scgc_kbi1" condition="sim_scgc_kbi1_present"
         enabledBy="$(_BasicInfoGuard)"
         typeName="SimScgcKbi1"
         description="KBI1 Clock Gate Control" >
         <choice name="Clock disabled"  value="0" enum="ClockDisabled" />
         <choice name="Clock enabled"   value="1" enum="ClockEnabled" />
      </binaryOption>
   </category>

   <category name="PIT" description="PIT Options" >
      <binaryOption key="sim_scgc_pit" condition="sim_scgc_pit_present"
         enabledBy="$(_BasicInfoGuard)"
         typeName="SimScgcPit"
         description="PIT Clock Gate Control" >
         <choice name="Clock disabled"  value="0" enum="ClockDisabled" />
         <choice name="Clock enabled"   value="1" enum="ClockEnabled" />
      </binaryOption>
   </category>

   <category name="PWT" description="PWT Options" >
      <for keys="n" values="1;2" >
         <aliasOption key="Tclk%(n)" locked="false" />
      </for>
      <binaryOption key="sim_scgc_pwt" condition="sim_scgc_pwt_present"
         enabledBy="$(_BasicInfoGuard)"
         typeName="SimScgcPwt"
         description="PWT Clock Gate Control" >
         <choice name="Clock disabled"  value="0" enum="ClockDisabled" />
         <choice name="Clock enabled"   value="1" enum="ClockEnabled" />
      </binaryOption>

      <binaryOption key="sim_sopt1_acpwts" condition="sim_sopt1_acpwts_present"
         addToVar="PwtExternalItems,AcmpExternalItems"
         enabledBy="$(_BasicInfoGuard)"
         typeName="SimSoptAcpwts"
         toolTip="This field selects PWTIN2 input signal"
         description="PWT ACMP_OUT select"
         disabledPinMap="PWT_IN2,#/PWT/enablePeripheralSupport" >
         <choice name="ACMP1_OUT is connected to PWTIN2"  value="0" enum="Acmp1_outIsConnectedToPwtin2" pinMap="PWT_IN2,ACMP1_O" />
         <choice name="ACMP0_OUT is connected to PWTIN2"  value="1" enum="Acmp0_outIsConnectedToPwtin2" pinMap="PWT_IN2,ACMP0_O" />
      </binaryOption>

      <choiceOption key="sim_sopt1_uartpwts" condition="sim_sopt1_uartpwts_present"
         addToVar="PwtExternalItems,UartExternalItems"
         enabledBy="$(_BasicInfoGuard)"
         typeName="SimSoptUartpwts"
         toolTip="This field select PWTIN3 input signal"
         description="PWT UART RX select"
         disabledPinMap="PWT_IN3,#/PWT/enablePeripheralSupport" >
         <choice name="UART0 RX is connected to PWTIN3"  value="0" enum="Uart0RxIsConnectedToPwtin3" pinMap="PWT_IN3,UART0_RX" />
         <choice name="UART1 RX is connected to PWTIN3"  value="1" enum="Uart1RxIsConnectedToPwtin3" pinMap="PWT_IN3,UART1_RX" />
         <choice name="UART2 RX is connected to PWTIN3"  value="2" enum="Uart2RxIsConnectedToPwtin3" pinMap="PWT_IN3,UART2_RX" />
      </choiceOption>

      <binaryOption key="sim_pinsel1_pwtin0ps" condition="sim_pinsel1_pwtin0ps_present"
         addToVar="PwtExternalItems"
         enabledBy="$(_BasicInfoGuard)"
         disabledPinMap="#/PWT/enablePeripheralSupport"
         typeName="SimPinselPwtin0ps"
         description="PWTIN0 Pin Select" >
         <choice name="PWTIN0 on PTD5"  value="0" enum="Pwtin0OnPtd5" pinMap="PWT_IN0,PTD5" />
         <choice name="PWTIN0 on PTE2"  value="1" enum="Pwtin0OnPte2" pinMap="PWT_IN0,PTE2" />
      </binaryOption>

      <binaryOption key="sim_pinsel1_pwtin1ps" condition="sim_pinsel1_pwtin1ps_present"
         addToVar="PwtExternalItems"
         enabledBy="$(_BasicInfoGuard)"
         disabledPinMap="#/PWT/enablePeripheralSupport"
         typeName="SimPinselPwtin1ps"
         description="PWTIN1 Pin Select" >
         <choice name="PWTIN1 on PTB0"  value="0" enum="Pwtin1OnPtb0" pinMap="PWT_IN1,PTB0" />
         <choice name="PWTIN1 on PTH7"  value="1" enum="Pwtin1OnPth7" pinMap="PWT_IN1,PTH7" />
      </binaryOption>

      <choiceOption key="sim_pinsel0_pwtclkps" condition="sim_pinsel0_pwtclkps_present"
         addToVar="PwtExternalItems"
         target="pwtExternalClock"
         enabledBy="$(_BasicInfoGuard)"
         typeName="SimPinselPwtclkps"
         description="PWT TCLK Pin Select" >
         <choice name="Selects TCLK0 for PWT module"  value="0" enum="Tclk0" ref="Tclk0" code="Tclk0" />
         <choice name="Selects TCLK1 for PWT module"  value="1" enum="Tclk1" ref="Tclk1" code="Tclk1" />
         <choice name="Selects TCLK2 for PWT module"  value="2" enum="Tclk2" ref="Tclk2" code="Tclk2" />
      </choiceOption>

      <intOption key="pwtExternalClock" condition="sim_pinsel0_pwtclkps"
         addToVar="PwtExternalItems"
         toolTip="The frequency of the external clock selected for PWT"
         description="PWT external clock"
         locked="true"
         derived="true"
         units="Hz" />

      <clockCodeTemplate variable="sim_pinsel0_pwtclkps"
         returnFormat="%s"
      ><![CDATA[
         \t/**
         \t * Get %description
         \t *
         \t * @return Clock frequency in Hz
         \t */
         \tstatic uint32_t getPwtExternalClockFrequency() {
         \t
         \t   switch(%maskingExpression) {
         \t      default: return 0;
         %body
         \t   }
         \t}\n\n
      ]]></clockCodeTemplate>

   </category>

   <category name="RTC" description="RTC Options" >
      <binaryOption key="sim_scgc_rtc" condition="sim_scgc_rtc_present"
         enabledBy="$(_BasicInfoGuard)"
         typeName="SimScgcRtc"
         description="RTC Clock Gate Control" >
         <choice name="Clock disabled"  value="0" enum="ClockDisabled" />
         <choice name="Clock enabled"   value="1" enum="ClockEnabled" />
      </binaryOption>

      <binaryOption key="sim_pinsel0_rtcps" condition="sim_pinsel0_rtcps_present"
         addToVar="RtcExternalItems"
         enabledBy="$(_BasicInfoGuard)"
         disabledPinMap="#/RTC/enablePeripheralSupport&amp;&amp;/RTC/rtc_sc_rtco"
         typeName="SimPinselRtcps"
         toolTip="Selects the RTC_CLKOUT port pins"
         description="RTC_CLKOUT Pin Select">
         <choice name="PTC4"        value="0" enum="Ptc4" pinMap="RTC_CLKOUT,PTC4" />
         <choice name="PTC5"        value="1" enum="Ptc5" pinMap="RTC_CLKOUT,PTC5" />
      </binaryOption>
   </category>

   <category name="SPI" description="SPI Options" >

      <title description="SPI 0"/>

      <binaryOption key="sim_scgc_spi0" condition="sim_scgc_spi0_present"
         enabledBy="$(_BasicInfoGuard)"
         typeName="SimScgcSpi0"
         description="SPI0 Clock Gate Control" >
         <choice name="Clock disabled"  value="0" enum="ClockDisabled" />
         <choice name="Clock enabled"   value="1" enum="ClockEnabled" />
      </binaryOption>

      <binaryOption key="sim_pinsel0_spi0ps" condition="sim_pinsel0_spi0ps_present"
         addToVar="Spi0ExternalItems"
         enabledBy="$(_BasicInfoGuard)"
         typeName="SimPinselSpi0ps"
         toolTip="Selects the SPI0 Pinouts"
         disabledPinMap="#/SPI0/enablePeripheralSupport"
         description="SPI0 Pin Select" >
         <choice name="PTB2,PTB3,PTB4,PTB5 mapped to SPI0 pins"  value="0" enum="Ptb2Ptb3Ptb4Ptb5MappedToSpi0" pinMap="SPI0_SCK,PTB2;SPI0_MOSI,PTB3;SPI0_MISO,PTB4;SPI0_PCS,PTB5" />
         <choice name="PTE0,PTE1,PTE2,PTE3 mapped to SPI0 pins"  value="1" enum="Pte0Pte1Pte2Pte3MappedToSpi0" pinMap="SPI0_SCK,PTE0;SPI0_MOSI,PTE1;SPI0_MISO,PTE2;SPI0_PCS,PTE3" />
      </binaryOption>

      <title description="SPI 1"/>

      <binaryOption key="sim_scgc_spi1" condition="sim_scgc_spi1_present"
         enabledBy="$(_BasicInfoGuard)"
         typeName="SimScgcSpi1"
         description="SPI1 Clock Gate Control" >
         <choice name="Clock disabled"  value="0" enum="ClockDisabled" />
         <choice name="Clock enabled"   value="1" enum="ClockEnabled" />
      </binaryOption>

      <binaryOption key="sim_pinsel1_spi1ps" condition="sim_pinsel1_spi1ps_present"
         addToVar="Spi1ExternalItems"
         enabledBy="$(_BasicInfoGuard)"
         disabledPinMap="#/SPI1/enablePeripheralSupport"
         typeName="SimPinselSpi1ps"
         description="SPI1 Pin Select" >
         <choice name="PTD0,PTD1,PTD2,PTD3 mapped to SPI pins"  value="0" enum="Ptd0Ptd1Ptd2Ptd3MappedToSpi1" pinMap="SPI1_SCK,PTD0;SPI1_MOSI,PTD1;SPI1_MISO,PTD2;SPI1_PCS,PTD3" />
         <choice name="PTG4,PTG5,PTG6,PTG7 mapped to SPI pins"  value="1" enum="Ptg4Ptg5Ptg6Ptg7MappedToSpi1" pinMap="SPI1_SCK,PTG4;SPI1_MOSI,PTG5;SPI1_MISO,PTG6;SPI1_PCS,PTG7" />
      </binaryOption>
   </category>

   <category name="UART" description="UART Options" >
      <title description="UART 0"/>

      <binaryOption key="sim_scgc_uart0" condition="sim_scgc_uart0_present"
         enabledBy="$(_BasicInfoGuard)"
         typeName="SimScgcUart0"
         description="UART0 Clock Gate Control" >
         <choice name="Clock disabled"  value="0" enum="ClockDisabled" />
         <choice name="Clock enabled"   value="1" enum="ClockEnabled" />
      </binaryOption>

      <binaryOption key="sim_pinsel0_uart0ps" condition="sim_pinsel0_uart0ps_present"
         addToVar="Uart0ExternalItems"
         enabledBy="$(_BasicInfoGuard)"
         typeName="SimPinselUart0ps"
         disabledPinMap="#/UART0/enablePeripheralSupport"
         description="UART0 Pin Select" >
         <choice name="PTB1,PTB0 mapped to Tx,Rx"  value="0" enum="MappedToPtb1Ptb0" pinMap="UART0_TX,PTB1;UART0_RX,PTB0" />
         <choice name="PTA3,PTA2 mapped to Tx,Rx"  value="1" enum="MappedToPta3Pta2" pinMap="UART0_TX,PTA3;UART0_RX,PTA2" />
      </binaryOption>

      <binaryOption key="sim_sopt0_txdme" condition="sim_sopt0_txdme_present"
         addToVar="Uart0ExternalItems,Ftm0ExternalItems"
         enabledBy="$(_BasicInfoGuard)"
         typeName="SimSoptTxdme"
         toolTip="Enables the UART0_TX output modulated by FTM0 channel 0"
         description="UART0_TX Modulation Select" >
         <choice name="UART0_TX directly connected to pin"  value="0" enum="Uart0_txDirectlyConnectedToPin" />
         <choice name="UART0_TX modulated by FTM0 channel"  value="1" enum="Uart0_txModulatedByFtm0Channel" />
      </binaryOption>

      <choiceOption key="sim_sopt0_rxdfe" condition="sim_sopt0_rxdfe_present"
         addToVar="Uart0ExternalItems,AcmpExternalItems"
         enabledBy="$(_BasicInfoGuard)"
         typeName="SimSoptRxdfe"
         toolTip="Enables the UART0_RX input to be filtered by ACMP.\n
                  When this function is enabled, any signal tagged with ACMP inputs can be regarded as UART0"
         description="UART0_RX Filter Select" >
         <choice name="UART0 module directly"  value="0" enum="Uart0ModuleDirectly" />
         <choice name="Filtered by ACMP0"      value="1" enum="FilteredByAcmp0" />
         <choice name="Filtered by ACMP1"      value="2" enum="FilteredByAcmp1" />
      </choiceOption>

      <title description="UART 1"/>

      <binaryOption key="sim_scgc_uart1" condition="sim_scgc_uart1_present"
         enabledBy="$(_BasicInfoGuard)"
         typeName="SimScgcUart1"
         description="UART1 Clock Gate Control" >
         <choice name="Clock disabled"  value="0" enum="ClockDisabled" />
         <choice name="Clock enabled"   value="1" enum="ClockEnabled" />
      </binaryOption>

      <binaryOption key="sim_pinsel1_uart1ps" condition="sim_pinsel1_uart1ps_present"
         addToVar="Uart1ExternalItems"
         enabledBy="$(_BasicInfoGuard)"
         disabledPinMap="#/UART1/enablePeripheralSupport"
         typeName="SimPinselUart1ps"
         description="UART1 Pin Select" >
         <choice name="PTC7,PTC6 mapped to Tx,Rx"  value="0" enum="MappedToPtc7Ptc6" pinMap="UART1_TX,PTC7;UART1_RX,PTC6" />
         <choice name="PTF3,PTF2 mapped to Tx,Rx"  value="1" enum="MappedToPtf3Ptf2" pinMap="UART1_TX,PTF3;UART1_RX,PTF2" />
      </binaryOption>

      <title description="UART 2"/>

      <binaryOption key="sim_scgc_uart2" condition="sim_scgc_uart2_present"
         addToVar="Uart2ExternalItems"
         enabledBy="$(_BasicInfoGuard)"
         typeName="SimScgcUart2"
         description="UART2 Clock Gate Control" >
         <choice name="Clock disabled"  value="0" enum="ClockDisabled" />
         <choice name="Clock enabled"   value="1" enum="ClockEnabled" />
      </binaryOption>

      <binaryOption key="sim_pinsel1_uart2ps" condition="sim_pinsel1_uart2ps_present"
         addToVar="Uart2ExternalItems"
         enabledBy="$(_BasicInfoGuard)"
         disabledPinMap="#/UART2/enablePeripheralSupport"
         typeName="SimPinselUart2ps"
         description="UART2 Pin Select" >
         <choice name="PTD7,PTD6 mapped to Tx,Rx"  value="0" enum="MappedToPtd7Ptd6" pinMap="UART2_TX,PTD7;UART2_RX,PTD6" />
         <choice name="PTI1,PTI0 mapped to Tx,Rx"  value="1" enum="MappedToPti1Pti0" pinMap="UART2_TX,PTI1;UART2_RX,PTI0" />
      </binaryOption>
   </category>


<!-- Grahic here -->

   <variableTemplate variables="sim_sopt0_ftmsync" codeGenCondition="enablePeripheralSupport"
   ><![CDATA[
      \t/**
      \t * %description
      \t *
      %paramDescription
      \t */
      \tstatic void triggerFtm2() {
      \t   %register |= %mask;
      \t}\n\n
   ]]></variableTemplate>

   <for keys="field        : name"
      values="
      sim_sopt0_delay      : Ftm2Delay;
      sim_sopt0_adhwt      : Adhwt;
      sim_sopt0_clkout     : SoptClkOut;
      sim_sopt0_busref     : BusClockReference;
      sim_sopt0_txdme      : Txdme;
      sim_sopt0_rxdce      : Rxdce;
      sim_sopt0_acic       : Acic;
      sim_sopt0_rtcc       : Rtcc;
      sim_sopt0_rxdfe      : Rxdfe;
      sim_sopt0_actrg      : Actrg;
      sim_sopt0_swde       : SingleWireDebugPins;
      sim_sopt0_rstpe      : ResetPin;
      sim_sopt0_nmie       : NonMaskableInterruptPin;
      sim_sopt1_uartpwts   : Uartpwts;
      sim_sopt1_acpwts     : Acpwts;
      sim_sopt1_i2c0oinv   : I2c0oinv;
      sim_sopt1_i2c04wen   : I2c04wen" >
      <variableTemplate variables="%(field)" codeGenCondition="enablePeripheralSupport"
      ><![CDATA[
         \t/**
         \t * Set %description
         \t *
         %paramDescription
         \t */
         \tstatic void configure%(name)(%params) {
         \t   %fieldAssignment;
         \t}\n\n
      ]]></variableTemplate>
   </for>

   <for keys="field:name"
        values="
      sim_pinsel0_pwtclkps    : Pwtclkps;
      sim_pinsel0_ftm2clkps   : Ftm2clkps;
      sim_pinsel0_ftm1clkps   : Ftm1clkps;
      sim_pinsel0_ftm0clkps   : Ftm0clkps;
      sim_pinsel0_ftm1ps1     : Ftm1ps1;
      sim_pinsel0_ftm1ps0     : Ftm1ps0;
      sim_pinsel0_ftm0ps1     : Ftm0ps1;
      sim_pinsel0_ftm0ps0     : Ftm0ps0;
      sim_pinsel0_uart0ps     : Uart0ps;
      sim_pinsel0_spi0ps      : Spi0ps;
      sim_pinsel0_i2c0ps      : I2c0ps;
      sim_pinsel0_rtcps       : Rtcps;
      sim_pinsel0_irqps       : Irqps;
      sim_pinsel1_mscanps     : Mscanps;
      sim_pinsel1_pwtin1ps    : Pwtin1ps;
      sim_pinsel1_pwtin0ps    : Pwtin0ps;
      sim_pinsel1_uart2ps     : Uart2ps;
      sim_pinsel1_uart1ps     : Uart1ps;
      sim_pinsel1_spi1ps      : Spi1ps;
      sim_pinsel1_i2c1ps      : I2c1ps;
      sim_pinsel1_ftm2ps5     : Ftm2ps5;
      sim_pinsel1_ftm2ps4     : Ftm2ps4;
      sim_pinsel1_ftm2ps3     : Ftm2ps3;
      sim_pinsel1_ftm2ps2     : Ftm2ps2;
      sim_pinsel1_ftm2ps1     : Ftm2ps1;
      sim_pinsel1_ftm2ps0     : Ftm2ps0" >
      <variableTemplate variables="%(field)" codeGenCondition="enablePeripheralSupport"
      ><![CDATA[
         \t/**
         \t * Set %description
         \t *
         %paramDescription
         \t */
         \tstatic void select%(name)(%params) {
         \t   %fieldAssignment;
         \t}\n\n
      ]]></variableTemplate>
   </for>

   <for keys="field:name"
        values="
      sim_scgc_acmp0:Acmp0;
      sim_scgc_acmp1:Acmp1;
      sim_scgc_adc:Adc;
      sim_scgc_irq:Irq;
      sim_scgc_kbi1:Kbi1;
      sim_scgc_kbi0:Kbi0;
      sim_scgc_uart0:Uart0;
      sim_scgc_uart1:Uart1;
      sim_scgc_uart2:Uart2;
      sim_scgc_spi0:Spi0;
      sim_scgc_spi1:Spi1;
      sim_scgc_i2c0:I2c0;
      sim_scgc_i2c1:I2c1;
      sim_scgc_mscan:Mscan;
      sim_scgc_swd:Swd;
      sim_scgc_flash:Flash;
      sim_scgc_crc:Crc;
      sim_scgc_ftm0:Ftm0;
      sim_scgc_ftm1:Ftm1;
      sim_scgc_ftm2:Ftm2;
      sim_scgc_pwt:Pwt;
      sim_scgc_pit:Pit;
      sim_scgc_rtc:Rtc" >
      <variableTemplate variables="%(field)" codeGenCondition="enablePeripheralSupport"
      ><![CDATA[
         \t/**
         \t * Get %description
         \t */
         \tstatic bool get%(name)ClockEnable() {
         \t   return %register & %mask;
         \t}
         \t
         \t/**
         \t * Disable %description
         \t */
         \tstatic void enable%(name)Clock() {
         \t   %register = %register | %mask;
         \t}
         \t
         \t/**
         \t * Enable %description
         \t */
         \tstatic void disable%(name)Clock() {
         \t   %register = %register & ~%mask;
         \t}\n\n
      ]]></variableTemplate>
   </for>

   <for keys="         field         :   name"
        values="sim_clkdiv_outdiv1[] : CoreClkDivider;
                sim_clkdiv_outdiv2[] : BusClockDivider;
                sim_clkdiv_outdiv3[] : TimerClockDivider" >
      <variableTemplate variables="%(field)" codeGenCondition="enablePeripheralSupport"
      ><![CDATA[
         \t/**
         \t * Set %description
         \t *
         %paramDescription
         \t */
         \tstatic void set%(name)(%params) {
         \t   %fieldAssignment;
         \t}\n\n
      ]]></variableTemplate>
   </for>

<!--   __________ SIM Init class _______________________________ -->

   <template where="basicInfo" codeGenCondition="enablePeripheralSupport" >
   <![CDATA[
      \t/**
      \t * Class used to do initialisation of the $(_Class)
      \t *
      \t * This class has a templated constructor that accepts various values.
      \t *
      \t * @note This constructor may be used to create a const instance in Flash
      \t *
      \t * Example:
      \t * @code
      \t * static const $(_Class)::Init init {
      \t *
      \t *   // Setup values
      \t *
      \t *   0 , // FTM2 Trigger Delay
      \t *   SimSoptAdhwt_RtcOverflow , // ADC Hardware Trigger Source - RTC overflow
      \t *   SimSoptRefClock_BusClockDividedBy16 , // BUS Clock Output select - Bus clock divided by 16
      \t *   SimSoptTxdme_Uart0_txDirectlyConnectedToPin , // UART0_TX Modulation Select - UART0_TX directly connected to pin
      \t *   SimSoptRxdce_NotConnected , // UART0_RX Capture on FTM0 channel 1 - Not connected
      \t *   SimSoptAcic_Acmp0_outIsNotConnected , // Analog Comparator on FTM1 input channel 0 - ACMP0_OUT is not connected
      \t *   SimSoptRtcc_RtcNotConnected , // Real-Time Counter on FTM1 input channel 1 - RTC not connected
      \t *   SimSopt0Rxdfe_Uart0ModuleDirectly , // UART0_RX Filter Select - UART0 module directly
      \t *   SimSoptActrg_Acmp0_out , // ACMP Trigger FTM2 selection - ACMP0_OUT
      \t *   SimSWDEnable_Pta4Ptc4AsSwdPins , // Single Wire Debug Port Pin Enable - PTA4, PTC4 mapped as SWD pins
      \t *   SimResetEnable_Pta5AsReset , // RESET Pin Enable - PTA5 mapped as RESET
      \t *   SimNmiEnable_Ptb4AsNmi , // NMI Pin Enable - PTB4 mapped as NMI
      \t *   SimSoptUartpwts_Uart0RxIsConnectedToPwtin3 , // PWT UART RX select - UART0 RX is connected to PWTIN3
      \t *   SimSoptAcpwts_Acmp1_outIsConnectedToPwtin2 , // PWT ACMP_OUT select - ACMP1_OUT is connected to PWTIN2
      \t *   SimSoptI2c0oinv_NotInverted , // I2C0 Output Invert in 4-wire mode - Not inverted
      \t *   SimSoptI2c04wen_Disabled , // I2C0 4-Wire Interface Enable - 4-wire interface disabled
      \t *   SimPinselPwtclkps_SelectsTclk0ForPwtModule , // PWT TCLK Pin Select - Selects TCLK0 for PWT module
      \t *   SimPinselFtm2clkps_SelectsTclk0ForFtm2Module , // FTM2 TCLK Pin Select - Selects TCLK0 for FTM2 module
      \t *   SimPinselFtm1clkps_SelectsTclk0ForFtm1Module , // FTM1 TCLK Pin Select - Selects TCLK0 for FTM1 module
      \t *   SimPinselFtm0clkps_SelectsTclk0ForFtm0Module , // FTM0 TCLK Pin Select - Selects TCLK0 for FTM0 module
      \t *   SimPinselFtm1ps1_Ptc5 , // FTM1 channel 1 Pin Select - PTC5
      \t *   SimPinselFtm1ps0_Ptc4 , // FTM1 channel 0 Pin Select - PTC4
      \t *   SimPinselFtm0ps1_Pta1 , // FTM0 channel 1 Pin Select - PTA1
      \t *   SimPinselFtm0ps0_Pta0 , // FTM0 channel 0 Pin Select - PTA0
      \t *   SimPinselUart0ps_MappedToPtb1Ptb0 , // UART0 Pin Select - PTB1,PTB0 mapped to Tx,Rx
      \t *   SimPinselSpi0ps_Ptb2Ptb3Ptb4Ptb5MappedToSpi0 , // SPI0 Pin Select - PTB2,PTB3,PTB4,PTB5 mapped to SPI0 pins
      \t *   SimPinselI2c0ps_Pta3Pta2MappedToI2c0 , // I2C0 Pin Select - PTA3,PTA2 mapped to SCL,SDA
      \t *   SimPinselRtcps_Ptc4 , // RTC_CLKOUT Pin Select - PTC4
      \t *   SimPinselIrqps_Pta5 , // IRQ Pin Select - PTA5
      \t *   SimPinselMscanps_Can_txOnPtc7_Can_rxOnPtc6 , // CAN Pin Select - CAN_TX on PTC7, CAN_RX on PTC6
      \t *   SimPinselPwtin1ps_Pwtin1OnPtb0 , // PWTIN1 Pin Select - PWTIN1 on PTB0
      \t *   SimPinselPwtin0ps_Pwtin0OnPtd5 , // PWTIN0 Pin Select - PWTIN0 on PTD5
      \t *   SimPinselUart2ps_MappedToPtd7Ptd6 , // UART2 Pin Select - PTD7,PTD6 mapped to Tx,Rx
      \t *   SimPinselUart1ps_MappedToPtc7Ptc6 , // UART1 Pin Select - PTC7,PTC6 mapped to Tx,Rx
      \t *   SimPinselSpi1ps_Ptd0Ptd1Ptd2Ptd3MappedToSpi1 , // SPI1 Pin Select - PTD0,PTD1,PTD2,PTD3 mapped to SPI pins
      \t *   SimPinselI2c1ps_Pte1Pte0MappedToI2c0 , // I2C1 Pin Select - PTE1,PTE0 mapped to SCL,SDA
      \t *   SimPinselFtm2ps5_Ptb5 , // FTM2 Channel 5 Pin Select - PTB5
      \t *   SimPinselFtm2ps4_Ptb4 , // FTM2 Channel 4 Pin Select - PTB4
      \t *   SimPinselFtm2ps3_Ptc3 , // FTM2 Channel 3 Pin Select - PTC3
      \t *   SimPinselFtm2ps2_Ptc2 , // FTM2 Channel 2 Pin Select - PTC2
      \t *   SimPinselFtm2ps1_Ptc1 , // FTM2 Channel 1 Pin Select - PTC1
      \t *   SimPinselFtm2ps0_Ptc0 , // FTM2 Channel 0 Pin Select - PTC0
      \t *   SimScgcAcmp1_ClockDisabled , // ACMP1 Clock Gate Control - Clock disabled
      \t *   SimScgcAcmp0_ClockDisabled , // ACMP0 Clock Gate Control - Clock disabled
      \t *   SimScgcAdc_ClockDisabled , // ADC Clock Gate Control - Clock disabled
      \t *   SimScgcIrq_ClockDisabled , // IRQ Clock Gate Control - Clock disabled
      \t *   SimScgcKbi1_ClockDisabled , // KBI1 Clock Gate Control - Clock disabled
      \t *   SimScgcKbi0_ClockDisabled , // KBI0 Clock Gate Control - Clock disabled
      \t *   SimScgcUart2_ClockDisabled , // UART2 Clock Gate Control - Clock disabled
      \t *   SimScgcUart1_ClockDisabled , // UART1 Clock Gate Control - Clock disabled
      \t *   SimScgcUart0_ClockDisabled , // UART0 Clock Gate Control - Clock disabled
      \t *   SimScgcSpi1_ClockDisabled , // SPI1 Clock Gate Control - Clock disabled
      \t *   SimScgcSpi0_ClockDisabled , // SPI0 Clock Gate Control - Clock disabled
      \t *   SimScgcI2c1_ClockDisabled , // I2C1 Clock Gate Control - Clock disabled
      \t *   SimScgcI2c0_ClockDisabled , // I2C0 Clock Gate Control - Clock disabled
      \t *   SimScgcMscan_ClockDisabled , // CAN Clock Gate Control - Clock disabled
      \t *   SimScgcSwd_ClockEnabled , // SWD Clock Gate Control - Clock enabled
      \t *   SimScgcFlash_ClockEnabled , // FLASH Clock Gate Control - Clock enabled
      \t *   SimScgcCrc_ClockDisabled , // CRC Clock Gate Control - Clock disabled
      \t *   SimScgcFtm2_ClockDisabled , // FTM2 Clock Gate Control - Clock disabled
      \t *   SimScgcFtm1_ClockDisabled , // FTM1 Clock Gate Control - Clock disabled
      \t *   SimScgcFtm0_ClockDisabled , // FTM0 Clock Gate Control - Clock disabled
      \t *   SimScgcPwt_ClockDisabled , // PWT Clock Gate Control - Clock disabled
      \t *   SimScgcPit_ClockDisabled , // PIT Clock Gate Control - Clock disabled
      \t *   SimScgcRtc_ClockDisabled,  // RTC Clock Gate Control - Clock disabled
      \t * };
      \t *
      \t * // Initialise $(_Class) from values specified above
      \t * $(_Class)::configure(init)
      \t * @endcode
      \t */
      \tclass Init {
      \t
      \tpublic:
      \t   /**
      \t    * Copy Constructor
      \t    */
      \t   constexpr Init(const Init &other) = default;
      \t
      \t   /**
      \t    * Default Constructor
      \t    */
      \t   constexpr Init() = default;
      \t\n
   ]]>
   </template>

<!--   Member variables -->

   <variableTemplate where="basicInfo" codeGenCondition="enablePeripheralSupport"
      variables="sim_sopt0_delay,sim_sopt0_adhwt,sim_sopt0_clkoe,sim_sopt0_busref,sim_sopt0_txdme,sim_sopt0_rxdce,sim_sopt0_acic,sim_sopt0_rtcc,sim_sopt0_rxdfe,sim_sopt0_actrg,sim_sopt0_swde,sim_sopt0_rstpe,sim_sopt0_nmie"
      linePadding="xxx"
   ><![CDATA[
      %multilineDescription
      \t   uint32_t %registerName = 0;\n\n
   ]]></variableTemplate>

   <variableTemplate where="basicInfo" codeGenCondition="enablePeripheralSupport"
      variables="sim_sopt1_uartpwts,sim_sopt1_acpwts,sim_sopt1_i2c0oinv,sim_sopt1_i2c04wen"
      linePadding="xxx"
   ><![CDATA[
      %multilineDescription
      \t   uint32_t %registerName = 0;\n\n
   ]]></variableTemplate>

   <variableTemplate where="basicInfo" codeGenCondition="enablePeripheralSupport"
      variables="sim_pinsel0_pwtclkps,sim_pinsel0_ftm2clkps,sim_pinsel0_ftm1clkps,sim_pinsel0_ftm0clkps,sim_pinsel0_ftm1ps1,sim_pinsel0_ftm1ps0,sim_pinsel0_ftm0ps1,sim_pinsel0_ftm0ps0,sim_pinsel0_uart0ps,sim_pinsel0_spi0ps,sim_pinsel0_i2c0ps,sim_pinsel0_rtcps,sim_pinsel0_irqps"
      linePadding="xxx"
   ><![CDATA[
      %multilineDescription
      \t   uint32_t %registerName = 0;\n\n
   ]]></variableTemplate>

   <variableTemplate where="basicInfo" codeGenCondition="enablePeripheralSupport"
      variables="sim_pinsel1_mscanps,sim_pinsel1_pwtin1ps,sim_pinsel1_pwtin0ps,sim_pinsel1_uart2ps,sim_pinsel1_uart1ps,sim_pinsel1_spi1ps,sim_pinsel1_i2c1ps,sim_pinsel1_ftm2ps5,sim_pinsel1_ftm2ps4,sim_pinsel1_ftm2ps3,sim_pinsel1_ftm2ps2,sim_pinsel1_ftm2ps1,sim_pinsel1_ftm2ps0"
      linePadding="xxx"
   ><![CDATA[
      %multilineDescription
      \t   uint32_t %registerName = 0;\n\n
   ]]></variableTemplate>

   <variableTemplate where="basicInfo" codeGenCondition="enablePeripheralSupport"
      variables="sim_scgc_acmp1,sim_scgc_acmp0,sim_scgc_adc,sim_scgc_irq,sim_scgc_kbi1,sim_scgc_kbi0,sim_scgc_uart2,sim_scgc_uart1,sim_scgc_uart0,sim_scgc_spi1,sim_scgc_spi0,sim_scgc_i2c1,sim_scgc_i2c0,sim_scgc_mscan,sim_scgc_swd,sim_scgc_flash,sim_scgc_crc,sim_scgc_ftm2,sim_scgc_ftm1,sim_scgc_ftm0,sim_scgc_pwt,sim_scgc_pit,sim_scgc_rtc"
      linePadding="xxx"
   ><![CDATA[
      %multilineDescription
      \t   uint32_t %registerName = 0;\n\n
   ]]></variableTemplate>

<!--   Constructors -->

   <for keys="r"
      values="
            sim_sopt0_adhwt;
            sim_sopt0_clkoe;
            sim_sopt0_busref;
            sim_sopt0_txdme;
            sim_sopt0_rxdce;
            sim_sopt0_acic;
            sim_sopt0_rtcc;
            sim_sopt0_rxdfe;
            sim_sopt0_actrg;
            sim_sopt0_swde;
            sim_sopt0_rstpe;
            sim_sopt0_nmie;
            sim_sopt1_uartpwts;
            sim_sopt1_acpwts;
            sim_sopt1_i2c0oinv;
            sim_sopt1_i2c04wen;
            sim_pinsel0_pwtclkps;
            sim_pinsel0_ftm2clkps;
            sim_pinsel0_ftm1clkps;
            sim_pinsel0_ftm0clkps;
            sim_pinsel0_ftm1ps1;
            sim_pinsel0_ftm1ps0;
            sim_pinsel0_ftm0ps1;
            sim_pinsel0_ftm0ps0;
            sim_pinsel0_uart0ps;
            sim_pinsel0_spi0ps;
            sim_pinsel0_i2c0ps;
            sim_pinsel0_rtcps;
            sim_pinsel0_irqps;
            sim_pinsel1_mscanps;
            sim_pinsel1_pwtin1ps;
            sim_pinsel1_pwtin0ps;
            sim_pinsel1_uart2ps;
            sim_pinsel1_uart1ps;
            sim_pinsel1_spi1ps;
            sim_pinsel1_i2c1ps;
            sim_pinsel1_ftm2ps5;
            sim_pinsel1_ftm2ps4;
            sim_pinsel1_ftm2ps3;
            sim_pinsel1_ftm2ps2;
            sim_pinsel1_ftm2ps1;
            sim_pinsel1_ftm2ps0;
            sim_scgc_acmp1;
            sim_scgc_acmp0;
            sim_scgc_adc;
            sim_scgc_irq;
            sim_scgc_kbi1;
            sim_scgc_kbi0;
            sim_scgc_uart2;
            sim_scgc_uart1;
            sim_scgc_uart0;
            sim_scgc_spi1;
            sim_scgc_spi0;
            sim_scgc_i2c1;
            sim_scgc_i2c0;
            sim_scgc_mscan;
            sim_scgc_swd;
            sim_scgc_flash;
            sim_scgc_crc;
            sim_scgc_ftm2;
            sim_scgc_ftm1;
            sim_scgc_ftm0;
            sim_scgc_pwt;
            sim_scgc_pit;
            sim_scgc_rtc;
            sim_sopt0_delay
            " >
      <variableTemplate where="basicInfo" codeGenCondition="enablePeripheralSupport"
         variables="%(r)"
         linePadding="xxx" >
      <![CDATA[
         \t   /**
         \t    * Constructor for %description
         \t    *
         \t    * @tparam   Types
         \t    * @param    rest
         \t    *
         %paramDescription
         \t    */
         \t   template <typename... Types>
         \t   constexpr Init(%params, Types... rest) : Init(rest...) {
         \t
         \t      %registerName = (%registerName&~%mask) | %paramExpression;
         \t   }
         \t\n
      ]]>
      </variableTemplate>
   </for>

<!--   Default Initialisation value -->

   <variableTemplate codeGenCondition="enablePeripheralSupport"
      separator=","
      terminator=","
      variables="
            sim_sopt0_delay,
            sim_sopt0_adhwt,
            sim_sopt0_clkoe,
            sim_sopt0_busref,
            sim_sopt0_txdme,
            sim_sopt0_rxdce,
            sim_sopt0_acic,
            sim_sopt0_rtcc,
            sim_sopt0_rxdfe,
            sim_sopt0_actrg,
            sim_sopt0_swde,
            sim_sopt0_rstpe,
            sim_sopt0_nmie,
            sim_sopt1_uartpwts,
            sim_sopt1_acpwts,
            sim_sopt1_i2c0oinv,
            sim_sopt1_i2c04wen,
            sim_pinsel0_pwtclkps,
            sim_pinsel0_ftm2clkps,
            sim_pinsel0_ftm1clkps,
            sim_pinsel0_ftm0clkps,
            sim_pinsel0_ftm1ps1,
            sim_pinsel0_ftm1ps0,
            sim_pinsel0_ftm0ps1,
            sim_pinsel0_ftm0ps0,
            sim_pinsel0_uart0ps,
            sim_pinsel0_spi0ps,
            sim_pinsel0_i2c0ps,
            sim_pinsel0_rtcps,
            sim_pinsel0_irqps,
            sim_pinsel1_mscanps,
            sim_pinsel1_pwtin1ps,
            sim_pinsel1_pwtin0ps,
            sim_pinsel1_uart2ps,
            sim_pinsel1_uart1ps,
            sim_pinsel1_spi1ps,
            sim_pinsel1_i2c1ps,
            sim_pinsel1_ftm2ps5,
            sim_pinsel1_ftm2ps4,
            sim_pinsel1_ftm2ps3,
            sim_pinsel1_ftm2ps2,
            sim_pinsel1_ftm2ps1,
            sim_pinsel1_ftm2ps0,
            sim_scgc_acmp1,
            sim_scgc_acmp0,
            sim_scgc_adc,
            sim_scgc_irq,
            sim_scgc_kbi1,
            sim_scgc_kbi0,
            sim_scgc_uart2,
            sim_scgc_uart1,
            sim_scgc_uart0,
            sim_scgc_spi1,
            sim_scgc_spi0,
            sim_scgc_i2c1,
            sim_scgc_i2c0,
            sim_scgc_mscan,
            sim_scgc_swd,
            sim_scgc_flash,
            sim_scgc_crc,
            sim_scgc_ftm2,
            sim_scgc_ftm1,
            sim_scgc_ftm0,
            sim_scgc_pwt,
            sim_scgc_pit,
            sim_scgc_rtc
         "
   ><![CDATA[
      \t/**
      \t * Default initialisation value for $(_Class)
      \t * This value is created from Configure.usbdmProject settings
      \t */
      \tstatic constexpr Init DefaultInitValue = {%initNonZeroValues
      \t};\n\n
   ]]></variableTemplate>

   <template  codeGenCondition="enablePeripheralSupport" >
      <![CDATA[
      \t/**
      \t * Configure $(_BASENAME)
      \t *
      \t * This only includes SOPT0, SOPT1, PINSEL0, PINSEL1 and SCGC
      \t */
      \tstatic void configure(const Init &configValue) {
      \t   sim->SOPT0           = configValue.sopt0;
      \t   sim->SOPT1           = configValue.sopt1;
      \t   sim->PINSEL0         = configValue.pinsel0;
      \t   sim->PINSEL1         = configValue.pinsel1;
      \t   sim->SCGC            = configValue.scgc;
      \t}
      \t
      \t/**
      \t * Default initialisation for $(_BASENAME)
      \t */
      \tstatic void defaultConfigure() {
      \t   configure(DefaultInitValue);
      \t}
      \t\n
   ]]>
   </template>

   <template where="basicInfo" codeGenCondition="enablePeripheralSupport" >
      <![CDATA[
      \t}; // class $(_Class)::BasicInfo::Init\n\n
   ]]>
   </template>

   <!-- ____ Clock Variables __________________ -->

   <template where="basicInfo" codeGenCondition="/ICS/enablePeripheralSupport" ><![CDATA[
      \t/*
      \t * Global clocks
      \t */
      \t\n
   ]]></template>
   <template where="basicInfo" codeGenCondition="!/ICS/enablePeripheralSupport" ><![CDATA[
      \t/*
      \t * Global clocks constants
      \t * These are provided when minimal clock generator code is used.
      \t * They assume no clock changes are made after startup.
      \t * Values provided are from USBDM configuration.
      \t */
      \t\n
   ]]></template>

   <for keys=" clock                            : name "
      values=" system_core_clock[0]             : SystemCoreClock;
               system_bus_clock[0]              : SystemBusClock;
               system_timer_clock[0]            : SystemTimerClock;
               system_flexbus_clock[0]          : SystemFlexbusClock
         " >
      <variableTemplate where="usbdm" variables="%(clock)" codeGenCondition="/ICS/enablePeripheralSupport" ><![CDATA[
         \t/**
         \t *  %description
         \t *  %tooltip
         \t *  (Full configuration - declaration)
         \t */
         \textern "C" uint32_t %(name);
         \t\n
      ]]></variableTemplate>
      <variableTemplate key="/SYSTEM/Clocks" variables="%(clock)" codeGenCondition="/ICS/enablePeripheralSupport" ><![CDATA[
         \t/**
         \t *  %description
         \t *  %tooltip
         \t *  (Full configuration - definition)
         \t */
         \tuint32_t %(name);
         \t\n
      ]]></variableTemplate>
      <variableTemplate where="usbdm" variables="%(clock)" codeGenCondition="!/ICS/enablePeripheralSupport" ><![CDATA[
         \t/**
         \t *  %description
         \t *  %tooltip
         \t *  (Minimal configuration - definition)
         \t */
         \tconstexpr uint32_t %(name) = %valueExpression;
         \t\n
      ]]></variableTemplate>
   </for>

   <template><![CDATA[
      \t/*
      \t * Template:sim_commonTemplates.xml
      \t */ \n
   ]]></template>


   <template codeGenCondition="/ICS/enablePeripheralSupport" ><![CDATA[
      \t/**
      \t * Update system clock values
      \t *
      \t * @param systemClock Frequency of clock provided to system clock dividers
      \t */
      \tstatic void updateSystemClocks(unsigned systemClock) {
      \t
      \t   SystemCoreClock    = systemClock/(((SIM->CLKDIV&SIM_CLKDIV_OUTDIV1_MASK)>>SIM_CLKDIV_OUTDIV1_SHIFT)+1);
      \t   SystemBusClock     = SystemCoreClock/(((SIM->CLKDIV&SIM_CLKDIV_OUTDIV2_MASK)>>SIM_CLKDIV_OUTDIV2_SHIFT)+1);
      \t   SystemTimerClock   = systemClock/(((SIM->CLKDIV&SIM_CLKDIV_OUTDIV3_MASK)>>SIM_CLKDIV_OUTDIV3_SHIFT)+1);
      \t}\n\n
   ]]></template>

   <template where="static" ><![CDATA[
      \t/**
      \t * Shared callback to catch unhandled interrupt
      \t * Only used for callbacks with no parameters
      \t */
      \tvoid unhandledCallback() {
      \t   setAndCheckErrorCode(E_NO_HANDLER);
      \t}
      \t\n
   ]]></template>

   <!-- ____ Common __________________ -->

   <validate
      class="net.sourceforge.usbdm.deviceEditor.validators.PeripheralValidator" >
   </validate>

   <template key="/ICS/ClockStartupAfter" codeGenCondition="configurePeripheralInStartUp" >
   <![CDATA[
      \tUSBDM::$(_Info)::defaultConfigure();
   ]]></template>

   <template key="DefaultInitValue" ><![CDATA[
      \tstatic void initRegs() {
      \t
      \t   defaultConfigure();
      \t};\n\n
   ]]></template>

   <xi:include href="simFiles-MKE.xml" />

   <variableTemplate variables="sim_clkdiv_outdiv1[0],sim_clkdiv_outdiv2[0],sim_clkdiv_outdiv3[0],sim_clkdiv_outdiv4[0]"><![CDATA[
      \t/** Reset clock divider value if clock not fully configured */
      \tstatic constexpr uint32_t sim_clkdiv = %initExpression;
      \t\n
   ]]></variableTemplate>

   <for keys="n" values=";0;1;2;3;4;5;6" >
      <variableTemplate variables="system_uart%(n)_fixedclocksource[%(n)]" ><![CDATA[
         \t/**
         \t * Get UART%(n) input clock frequency
         \t *
         \t * @return Clock frequency in Hz
         \t */
         \tstatic inline uint32_t getUart%(n)Clock() {
         \t   return $(system_uart%(n)_fixedclocksource[%(n)].code[]);
         \t}\n\n
      ]]></variableTemplate>
   </for>

</peripheralPage>
