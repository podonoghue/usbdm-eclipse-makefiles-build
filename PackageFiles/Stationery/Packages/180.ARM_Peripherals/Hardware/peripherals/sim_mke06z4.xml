<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE peripheralPage SYSTEM "_menu.dtd" >
<!-- sim_mke06z4.xml -->

<peripheralPage xmlns:xi="http://www.w3.org/2001/XInclude" name="_instance" description="System Integration Module" >

   <constant key="peripheralUsesInterrupts" type="Boolean" value="false" />
   <constant key="isGeneratedByDefault"     type="Boolean" value="false" />
   <constant key="isSupportedinStartup"     type="Boolean" value="true" />
   <xi:include href="_enablePeripheral.xml" />
   <title description="------------------------------------------" />

   <xi:include href="_simCommon.xml" />

   <!--                                   RUN        -->
   <constant key="ICSOUTCLK_max"  value="50MHz"  type="Integer"    hidden="false" />
   <constant key="ICSFLLCLK_max"  value="50MHz"  type="Integer"    hidden="false" />
   <constant key="I2S_max"        value="25MHz"  type="Integer"    hidden="false" />
   <constant key="LPUART_max"     value="48MHz"  type="Integer"    hidden="false" />
   <constant key="TPM_max"        value="48MHz"  type="Integer"    hidden="false" />

   <for keys="n" dim="numberOfClockSettings" >
      <aliasCategoryOption key="/ICS/ClockConfig[%(n)]" derived="true" constant="true" >

         <aliasOption key="/ICS/enableClockConfiguration[%(n)]" constant="false" />
         <if condition="%(n)==0">
            <aliasOption key="/ICS/ics_c2_bdiv[%(n)]" constant="false" />
         </if>
         <for keys="u : name              : code            : ref"
            values="0 : System bus clock : SystemBusClock : system_bus_clock[%(n)];
                    1 : System bus clock : SystemBusClock : system_bus_clock[%(n)];
                    2 : System bus clock : SystemBusClock : system_bus_clock[%(n)]" >

            <choiceOption key="system_uart%(u)_fixedclocksource[%(n)]"
               hidden="true"
               target="system_uart%(u)_clock[%(n)]"
               constant="true"
               derived="true"
               description="UART%(u) Clock source"
               toolTip="Fixed clock source for UART (%(code))" >
               <choice value="0"  name="%(name)" ref="%(ref)" code="%(code)" />
            </choiceOption>

            <intOption key="system_uart%(u)_clock[%(n)]"
               hidden="true"
               constant="true"
               derived="true"
               units="Hz"
               description="UART%(u) Clock frequency"
               toolTip="Frequency of clock to UART%(u)"
               value="0" />
         </for>

         <choiceOption key="sim_clkdiv_outdiv1[%(n)]" condition="sim_clkdiv_outdiv1_present"
            enabledBy="(%(n)==0)||/ICS/enableClockConfiguration[%(n)]"
            enumStem="SimCoreClkDivider"
            toolTip="This field sets the divide value for the core/system clock"
            description="Core/System Clock Divider value" >
            <choice name="ICSOUTCLK/1"    value="0" enum="Direct" />
            <choice name="ICSOUTCLK/2"    value="1" enum="DivBy2" />
            <choice name="ICSOUTCLK/3"    value="2" enum="DivBy3" />
            <choice name="ICSOUTCLK/4"    value="3" enum="DivBy4" />
         </choiceOption>

         <binaryOption key="sim_clkdiv_outdiv2[%(n)]" condition="sim_clkdiv_outdiv2_present"
            enabledBy="(%(n)==0)||/ICS/enableClockConfiguration[%(n)]"
            enumStem="SimBusClkDivider"
            toolTip="This field sets the divide value for the bus/FLASH, follows OUTDIV1"
            description="Bus/Flash Clock Divider value" >
            <choice name="Core clock/1"    value="0" enum="Direct" />
            <choice name="Core clock/2"    value="1" enum="DivBy2" />
         </binaryOption >

         <binaryOption key="sim_clkdiv_outdiv3[%(n)]" condition="sim_clkdiv_outdiv3_present"
            enabledBy="(%(n)==0)||/ICS/enableClockConfiguration[%(n)]"
            enumStem="SimTimerClkDivider"
            toolTip="This field sets the divide value for the timers(FTM0, FTM2,PWT)"
            description="Timer Clock Divider value" >
            <choice name="ICSOUTCLK/1"    value="0" enum="Direct" />
            <choice name="ICSOUTCLK/2"    value="1" enum="DivBy2" />
         </binaryOption>

         <intOption key="system_core_clock[%(n)]"
            constant="true"
            enabledBy="(%(n)==0)||/ICS/enableClockConfiguration[%(n)]"
            ref="(/ICS/system_icsoutclk_clock[%(n)])/((sim_clkdiv_outdiv1[%(n)])+1)#/ICS/system_icsoutclk_clock[%(n)]"
            derived="true"
            isNamedClock="true"
            units="Hz"
            description="System Core Clock"
            toolTip="Clock for CORE (CPU) and SYSTEM (NVIC, RAM, ...)"
            value="48 MHz"
            disabledValue="0"
            min="1" />

         <intOption key="system_bus_clock[%(n)]"
            constant="true"
            enabledBy="(%(n)==0)||/ICS/enableClockConfiguration[%(n)]"
            ref="(system_core_clock[%(n)])/((sim_clkdiv_outdiv2[%(n)])?2:1)#system_core_clock[%(n)]"
            derived="true"
            isNamedClock="true"
            units="Hz"
            description="System Bus Clock"
            toolTip="Clock for Bus (PIT, I2C, SPI, UART, ...)"
            value="8 MHz"
            disabledValue="0"
            min="1"/>

         <intOption key="system_timer_clock[%(n)]"
            constant="true"
            enabledBy="(%(n)==0)||/ICS/enableClockConfiguration[%(n)]"
            ref="(/ICS/system_icsoutclk_clock[%(n)])/((sim_clkdiv_outdiv3[%(n)])?2:1)#/ICS/system_icsoutclk_clock[%(n)]"
            derived="true"
            isNamedClock="true"
            units="Hz"
            description="System Timer Clock"
            toolTip="Clock for timers (FTM, PWT, ...)"
            value="8 MHz"
            disabledValue="0"
            min="1"/>

      </aliasCategoryOption>
   </for>

   <title description="------------------------------------------" />

   <category name="Control Signals" description="Mapping of control signals" >
      <binaryOption key="sim_scgc_swd" condition="sim_scgc_swd_present"
         enabledBy="/$(_BASENAME)/enablePeripheralSupport"
         disabledValue="1"
         enumStem="SimScgcSwd"
         description="SWD Clock Gate Control" >
         <choice name="Clock disabled"  value="0" enum="ClockDisabled" />
         <choice name="Clock enabled"   value="1" enum="ClockEnabled" isDefault="true" />
      </binaryOption>

      <binaryOption key="sim_sopt0_swde" condition="sim_sopt0_swde_present"
         ref="sim_scgc_swd"
         enabledBy="/$(_BASENAME)/enablePeripheralSupport"
         constant="true"
         derived="true"
         disabledValue="1"
         enumStem="SimSWDEnable"
         disabledPinMap="SWD_DIO,PTA4;SWD_CLK,PTC4"
         toolTip="Controls: \n
                  PTA4 as PTA4/ACMP0_OUT or SWD_DIO, \n
                  PTC4 as PTC4/RTC_CLKOUT/FTM1_CH0/ACMP0_IN2 or SWD_CLK functions"
         description="Single Wire Debug Port Pin Enable" >
         <choice name="PTA4, PTC4 available for peripherals"  value="0" enum="Pta4Ptc4AsPeripheralPins" pinMap="SWD_DIO,;SWD_CLK," />
         <choice name="PTA4, PTC4 mapped as SWD pins"         value="1" enum="Pta4Ptc4AsSwdPins"        pinMap="SWD_DIO,PTA4;SWD_CLK,PTC4" isDefault="true" />
      </binaryOption>

      <binaryOption key="sim_sopt0_rstpe" condition="sim_sopt0_rstpe_present"
         enabledBy="/$(_BASENAME)/enablePeripheralSupport"
         disabledValue="1"
         enumStem="SimResetEnable"
         toolTip="This field can only be written once after any reset"
         description="RESET Pin Enable" >
         <choice name="PTA5 available for peripherals"  value="0" enum="Pta5AsPeripheralPin" pinMap="RESET_b," />
         <choice name="PTA5 mapped as RESET"            value="1" enum="Pta5AsReset"         pinMap="RESET_b,PTA5" isDefault="true" />
      </binaryOption>

      <binaryOption key="sim_sopt0_nmie" condition="sim_sopt0_nmie_present"
         enabledBy="/$(_BASENAME)/enablePeripheralSupport"
         disabledValue="1"
         enumStem="SimNmiEnable"
         toolTip="This field can only be written once after any reset"
         description="NMI Pin Enable" >
         <choice name="PTB4 available for peripherals" value="0" enum="Ptb4AsPeripheralPins" pinMap="NMI_b," />
         <choice name="PTB4 mapped as NMI"             value="1" enum="Ptb4AsNmi"            pinMap="NMI_b,PTB4" isDefault="true" />
      </binaryOption>

      <choiceOption key="sim_sopt0_busref" condition="sim_sopt0_busref_present"
         enabledBy="/$(_BASENAME)/enablePeripheralSupport"
         valueFormat="SIM_SOPT0_CLKOE(%s),SIM_SOPT0_BUSREF(%s)"
         enumStem="SimSoptRefClock"
         toolTip="Enable bus reference clock output on PTH2 with prescaler"
         description="BUS Clock Output select" >
         <choice name="Disabled (PTH2 available)" value="0,0" enum="Disabled"             pinMap="CLKOUT," />
         <choice name="Bus clock"                 value="1,0" enum="BusClock"             pinMap="CLKOUT,PTH2"  />
         <choice name="Bus clock divided by 2"    value="1,1" enum="BusClockDividedBy2"   pinMap="CLKOUT,PTH2"  />
         <choice name="Bus clock divided by 4"    value="1,2" enum="BusClockDividedBy4"   pinMap="CLKOUT,PTH2"  />
         <choice name="Bus clock divided by 8"    value="1,3" enum="BusClockDividedBy8"   pinMap="CLKOUT,PTH2"  />
         <choice name="Bus clock divided by 16"   value="1,4" enum="BusClockDividedBy16"  pinMap="CLKOUT,PTH2"  />
         <choice name="Bus clock divided by 32"   value="1,5" enum="BusClockDividedBy32"  pinMap="CLKOUT,PTH2"  />
         <choice name="Bus clock divided by 64"   value="1,6" enum="BusClockDividedBy64"  pinMap="CLKOUT,PTH2"  />
         <choice name="Bus clock divided by 128"  value="1,7" enum="BusClockDividedBy128" pinMap="CLKOUT,PTH2"  />
      </choiceOption>
   </category>

   <category name="ADC" description="Peripheral  options and clock enable" >
      <binaryOption key="sim_scgc_adc0" condition="sim_scgc_adc0_present"
         enabledBy="/$(_BASENAME)/enablePeripheralSupport"
         enumStem="SimScgcAdc"
         description="ADC Clock Gate Control" >
         <choice name="Clock disabled"  value="0" enum="ClockDisabled" />
         <choice name="Clock enabled"   value="1" enum="ClockEnabled" />
      </binaryOption>

      <choiceOption key="sim_sopt0_adhwt" condition="sim_sopt0_adhwt_present"
         enabledBy="/$(_BASENAME)/enablePeripheralSupport"
         enumStem="SimSoptAdhwt"
         toolTip="Selects the ADC hardware trigger source. All trigger sources start ADC conversion on rising-edge"
         description="ADC Hardware Trigger Source" >
         <choice name="RTC overflow"                         value="0" enum="RtcOverflow" />
         <choice name="FTM0"                                 value="1" enum="Ftm0" />
         <choice name="FTM2 init trigger with 8-bit delay"   value="2" enum="Ftm2InitTriggerWith8BitDelay" />
         <choice name="FTM2 match trigger with 8-bit delay"  value="3" enum="Ftm2MatchTriggerWith8BitDelay" />
         <choice name="PIT channel 0 overflow"               value="4" enum="PitChannel0Overflow" />
         <choice name="PIT channel 1 overflow"               value="5" enum="PitChannel1Overflow" />
         <choice name="ACMP0 OUT"                            value="6" enum="Acmp0Out" />
         <choice name="ACMP1 OUT"                            value="7" enum="Acmp1Out" />
      </choiceOption>

      <intOption key="sim_sopt0_delay" condition="sim_sopt0_delay_present"
         enabledBy="/$(_BASENAME)/enablePeripheralSupport"
         typeName="Ticks"
         units="ticks"
         description="FTM2 Trigger Delay"
         toolTip="Specifies the delay from FTM2 initial or match trigger to ADC hardware trigger when 1 is written to ADHWT.\n
                  The 8-bit modulo value allows the delay from 0 to 255 upon the BUSREF clock settings.\n
                  This is a one-shot counter that starts ticking when the trigger arrives and stops ticking when the counter value reaches the modulo value that is defined"
                  value="0"
      />
   </category>

   <category name="ACMP" description="Peripheral  options and clock enable" >
      <binaryOption key="sim_scgc_acmp0" condition="sim_scgc_acmp0_present"
         enabledBy="/$(_BASENAME)/enablePeripheralSupport"
         enumStem="SimScgcAcmp0"
         description="ACMP0 Clock Gate Control" >
         <choice name="Clock disabled"  value="0" enum="ClockDisabled" />
         <choice name="Clock enabled"   value="1" enum="ClockEnabled" />
      </binaryOption>

      <binaryOption key="sim_sopt0_actrg" condition="sim_sopt0_actrg_present"
         enabledBy="/$(_BASENAME)/enablePeripheralSupport"
         enumStem="SimSoptActrg"
         toolTip="Selects ACMP output used as the trigger0 input of FTM2"
         description="ACMP Trigger FTM2 selection" >
         <choice name="ACMP0_OUT"   value="0" enum="Acmp0_out" />
         <choice name="ACMP1_OUT"   value="1" enum="Acmp1_out" />
      </binaryOption>

      <binaryOption key="sim_scgc_acmp1" condition="sim_scgc_acmp1_present"
         enabledBy="/$(_BASENAME)/enablePeripheralSupport"
         enumStem="SimScgcAcmp1"
         description="ACMP1 Clock Gate Control" >
         <choice name="Clock disabled"  value="0" enum="ClockDisabled" />
         <choice name="Clock enabled"   value="1" enum="ClockEnabled" />
      </binaryOption>
   </category>

   <category name="CAN0" description="Peripheral  options and clock enable" >
      <binaryOption key="sim_scgc_mscan" condition="sim_scgc_mscan_present"
         enabledBy="/$(_BASENAME)/enablePeripheralSupport"
         enumStem="SimScgcMscan"
         description="CAN Clock Gate Control" >
         <choice name="Clock disabled"  value="0" enum="ClockDisabled" />
         <choice name="Clock enabled"   value="1" enum="ClockEnabled" />
      </binaryOption>

      <binaryOption key="sim_pinsel1_mscanps" condition="sim_pinsel1_mscanps_present"
         enabledBy="/$(_BASENAME)/enablePeripheralSupport"
         enumStem="SimPinselMscanps"
         toolTip="Selects the pins used by CAN"
         description="CAN Pin Select" >
         <choice name="CAN0_TX on PTC7, CAN0_RX on PTC6"  value="0" enum="Can_txOnPtc7_Can_rxOnPtc6" pinMap="CAN0_TX,PTC7;CAN0_RX,PTC6" />
         <choice name="CAN0_TX on PTE7, CAN0_RX on PTH2"  value="1" enum="Can_txOnPte7_Can_rxOnPth2" pinMap="CAN0_TX,PTE7;CAN0_RX,PTH2" />
      </binaryOption>
   </category>

   <category name="CRC" description="Peripheral  options and clock enable" >
      <binaryOption key="sim_scgc_crc" condition="sim_scgc_crc_present"
         enabledBy="/$(_BASENAME)/enablePeripheralSupport"
         enumStem="SimScgcCrc"
         description="CRC Clock Gate Control" >
         <choice name="Clock disabled"  value="0" enum="ClockDisabled" />
         <choice name="Clock enabled"   value="1" enum="ClockEnabled" />
      </binaryOption>
   </category>

   <category name="FLASH" description="Peripheral  options and clock enable" >
      <binaryOption key="sim_scgc_flash" condition="sim_scgc_flash_present"
         enabledBy="/$(_BASENAME)/enablePeripheralSupport"
         disabledValue="1"
         enumStem="SimScgcFlash"
         description="FLASH Clock Gate Control" >
         <choice name="Clock disabled"  value="0" enum="ClockDisabled" />
         <choice name="Clock enabled"   value="1" enum="ClockEnabled" isDefault="true" />
      </binaryOption>
   </category>

   <category name="FTM" description="Peripheral  options and clock enable" >
      <binaryOption key="sim_sopt0_ftmsync" condition="sim_sopt0_ftmsync_present"
         enabledBy="/$(_BASENAME)/enablePeripheralSupport"
         enumStem="SimSoptFtmsync"
         derived="true"
         constant="true"
         hidden="true"
         toolTip="Writing this field generates a PWM synchronisation trigger to the FTM2 module"
         description="FTM2 Synchronisation Select" >
         <choice name="Generates trigger"  value="1" enum="GenerateFtmTrigger" isDefault="true" />
      </binaryOption>

      <title description="----- FTM 0 -----"/>

      <binaryOption key="sim_scgc_ftm0" condition="sim_scgc_ftm0_present"
         enabledBy="/$(_BASENAME)/enablePeripheralSupport"
         enumStem="SimScgcFtm0"
         description="FTM0 Clock Gate Control" >
         <choice name="Clock disabled"  value="0" enum="ClockDisabled" />
         <choice name="Clock enabled"   value="1" enum="ClockEnabled" />
      </binaryOption>

      <choiceOption key="sim_pinsel0_ftm0clkps" condition="sim_pinsel0_ftm0clkps_present"
         enabledBy="/$(_BASENAME)/enablePeripheralSupport"
         enumStem="SimPinselFtm0clkps"
         description="FTM0 TCLK Pin Select" >
         <choice name="Selects TCLK0 for FTM0 module"  value="0" enum="SelectsTclk0ForFtm0Module" />
         <choice name="Selects TCLK1 for FTM0 module"  value="1" enum="SelectsTclk1ForFtm0Module" />
         <choice name="Selects TCLK2 for FTM0 module"  value="2" enum="SelectsTclk2ForFtm0Module" />
      </choiceOption>

      <binaryOption key="sim_pinsel0_ftm0ps0" condition="sim_pinsel0_ftm0ps0_present"
         enabledBy="/$(_BASENAME)/enablePeripheralSupport"
         enumStem="SimPinselFtm0ps0"
         description="FTM0 channel 0 Pin Select" >
         <choice name="PTA0"        value="0" enum="Pta0" pinMap="FTM0_CH0,PTA0" />
         <choice name="PTB2"        value="1" enum="Ptb2" pinMap="FTM0_CH0,PTB2" />
      </binaryOption>

      <binaryOption key="sim_pinsel0_ftm0ps1" condition="sim_pinsel0_ftm0ps1_present"
         enabledBy="/$(_BASENAME)/enablePeripheralSupport"
         enumStem="SimPinselFtm0ps1"
         description="FTM0 channel 1 Pin Select" >
         <choice name="PTA1"        value="0" enum="Pta1" pinMap="FTM0_CH1,PTA1" />
         <choice name="PTB3"        value="1" enum="Ptb3" pinMap="FTM0_CH1,PTB3" />
      </binaryOption>

      <binaryOption key="sim_sopt0_rxdce" condition="sim_sopt0_rxdce_present"
         enabledBy="/$(_BASENAME)/enablePeripheralSupport"
         enumStem="SimSoptRxdce"
         toolTip="Enables the UART0_RX to be captured by FTM0 channel 1"
         description="UART0_RX Capture on FTM0 channel 1" >
         <choice name="Not connected"                         value="0" enum="NotConnected" />
         <choice name="UART0_RX connected as FTM0 channel 1"  value="1" enum="Uart0_rxConnectedAsFtm0Channel1" />
      </binaryOption>

      <binaryOption key="sim_sopt0_acic" condition="sim_sopt0_acic_present"
         enabledBy="/$(_BASENAME)/enablePeripheralSupport"
         enumStem="SimSoptAcic"
         toolTip="Connects the output of ACMP0 to FTM1 input channel 0"
         description="Analog Comparator on FTM1 input channel 0" >
         <choice name="ACMP0_OUT is not connected"          value="0" enum="Acmp0_outIsNotConnected" />
         <choice name="ACMP0_OUT is used as input channel"  value="1" enum="Acmp0_outIsUsedAsInputChannel" />
      </binaryOption>

      <binaryOption key="sim_sopt0_rtcc" condition="sim_sopt0_rtcc_present"
         enabledBy="/$(_BASENAME)/enablePeripheralSupport"
         enumStem="SimSoptRtcc"
         toolTip="Allows the Real-time Counter (RTC) overflow to be captured by FTM1 channel 1"
         description="Real-Time Counter on FTM1 input channel 1" >
         <choice name="RTC not connected"                   value="0" enum="RtcNotConnected" />
         <choice name="RTC overflow used as input channel"  value="1" enum="RtcOverflowUsedAsInputChannel" />
      </binaryOption>

      <title description="----- FTM 1 -----"/>

      <binaryOption key="sim_scgc_ftm1" condition="sim_scgc_ftm1_present"
         enabledBy="/$(_BASENAME)/enablePeripheralSupport"
         enumStem="SimScgcFtm1"
         description="FTM1 Clock Gate Control" >
         <choice name="Clock disabled"  value="0" enum="ClockDisabled" />
         <choice name="Clock enabled"   value="1" enum="ClockEnabled" />
      </binaryOption>

      <choiceOption key="sim_pinsel0_ftm1clkps" condition="sim_pinsel0_ftm1clkps_present"
         enabledBy="/$(_BASENAME)/enablePeripheralSupport"
         enumStem="SimPinselFtm1clkps"
         description="FTM1 TCLK Pin Select" >
         <choice name="Selects TCLK0 for FTM1 module"  value="0" enum="SelectsTclk0ForFtm1Module" />
         <choice name="Selects TCLK1 for FTM1 module"  value="1" enum="SelectsTclk1ForFtm1Module" />
         <choice name="Selects TCLK2 for FTM1 module"  value="2" enum="SelectsTclk2ForFtm1Module" />
      </choiceOption>

      <binaryOption key="sim_pinsel0_ftm1ps0" condition="sim_pinsel0_ftm1ps0_present"
         enabledBy="/$(_BASENAME)/enablePeripheralSupport"
         enumStem="SimPinselFtm1ps0"
         description="FTM1 channel 0 Pin Select" >
         <choice name="PTC4"        value="0" enum="Ptc4" pinMap="FTM1_CH0,PTC4" />
         <choice name="PTH2"        value="1" enum="Pth2" pinMap="FTM1_CH0,PTH2" />
      </binaryOption>

      <binaryOption key="sim_pinsel0_ftm1ps1" condition="sim_pinsel0_ftm1ps1_present"
         enabledBy="/$(_BASENAME)/enablePeripheralSupport"
         enumStem="SimPinselFtm1ps1"
         description="FTM1 channel 1 Pin Select" >
         <choice name="PTC5"        value="0" enum="Ptc5" pinMap="FTM1_CH1,PTC5" />
         <choice name="PTE7"        value="1" enum="Pte7" pinMap="FTM1_CH1,PTE7" />
      </binaryOption>

      <title description="----- FTM 2 -----"/>

      <binaryOption key="sim_scgc_ftm2" condition="sim_scgc_ftm2_present"
         enabledBy="/$(_BASENAME)/enablePeripheralSupport"
         enumStem="SimScgcFtm2"
         description="FTM2 Clock Gate Control" >
         <choice name="Clock disabled"  value="0" enum="ClockDisabled" />
         <choice name="Clock enabled"   value="1" enum="ClockEnabled" />
      </binaryOption>

      <choiceOption key="sim_pinsel0_ftm2clkps" condition="sim_pinsel0_ftm2clkps_present"
         enabledBy="/$(_BASENAME)/enablePeripheralSupport"
         enumStem="SimPinselFtm2clkps"
         description="FTM2 TCLK Pin Select" >
         <choice name="Selects TCLK0 for FTM2 module"  value="0" enum="SelectsTclk0ForFtm2Module" />
         <choice name="Selects TCLK1 for FTM2 module"  value="1" enum="SelectsTclk1ForFtm2Module" />
         <choice name="Selects TCLK2 for FTM2 module"  value="2" enum="SelectsTclk2ForFtm2Module" />
      </choiceOption>

      <choiceOption key="sim_pinsel1_ftm2ps0" condition="sim_pinsel1_ftm2ps0_present"
         enabledBy="/$(_BASENAME)/enablePeripheralSupport"
         enumStem="SimPinselFtm2ps0"
         description="FTM2 Channel 0 Pin Select" >
         <choice name="PTC0"        value="0" enum="Ptc0" pinMap="FTM2_CH0,PTC0" />
         <choice name="PTH0"        value="1" enum="Pth0" pinMap="FTM2_CH0,PTH0" />
         <choice name="PTF0"        value="2" enum="Ptf0" pinMap="FTM2_CH0,PTF0" />
      </choiceOption>

      <choiceOption key="sim_pinsel1_ftm2ps1" condition="sim_pinsel1_ftm2ps1_present"
         enabledBy="/$(_BASENAME)/enablePeripheralSupport"
         enumStem="SimPinselFtm2ps1"
         description="FTM2 Channel 1 Pin Select" >
         <choice name="PTC1"        value="0" enum="Ptc1" pinMap="FTM2_CH1,PTC1" />
         <choice name="PTH1"        value="1" enum="Pth1" pinMap="FTM2_CH1,PTH1" />
         <choice name="PTF1"        value="2" enum="Ptf1" pinMap="FTM2_CH1,PTF1" />
      </choiceOption>

      <choiceOption key="sim_pinsel1_ftm2ps2" condition="sim_pinsel1_ftm2ps2_present"
         enabledBy="/$(_BASENAME)/enablePeripheralSupport"
         enumStem="SimPinselFtm2ps2"
         description="FTM2 Channel 2 Pin Select" >
         <choice name="PTC2"        value="0" enum="Ptc2" pinMap="FTM2_CH2,PTC2" />
         <choice name="PTD0"        value="1" enum="Ptd0" pinMap="FTM2_CH2,PTD0" />
         <choice name="PTG4"        value="2" enum="Ptg4" pinMap="FTM2_CH2,PTG4" />
      </choiceOption>

      <choiceOption key="sim_pinsel1_ftm2ps3" condition="sim_pinsel1_ftm2ps3_present"
         enabledBy="/$(_BASENAME)/enablePeripheralSupport"
         enumStem="SimPinselFtm2ps3"
         description="FTM2 Channel 3 Pin Select" >
         <choice name="PTC3"        value="0" enum="Ptc3" pinMap="FTM2_CH3,PTC3" />
         <choice name="PTD1"        value="1" enum="Ptd1" pinMap="FTM2_CH3,PTD1" />
         <choice name="PTG5"        value="2" enum="Ptg5" pinMap="FTM2_CH3,PTG5" />
      </choiceOption>

      <binaryOption key="sim_pinsel1_ftm2ps4" condition="sim_pinsel1_ftm2ps4_present"
         enabledBy="/$(_BASENAME)/enablePeripheralSupport"
         enumStem="SimPinselFtm2ps4"
         description="FTM2 Channel 4 Pin Select" >
         <choice name="PTB4"        value="0" enum="Ptb4" pinMap="FTM2_CH4,PTB4" />
         <choice name="PTG6"        value="1" enum="Ptg6" pinMap="FTM2_CH4,PTG6" />
      </binaryOption>

      <binaryOption key="sim_pinsel1_ftm2ps5" condition="sim_pinsel1_ftm2ps5_present"
         enabledBy="/$(_BASENAME)/enablePeripheralSupport"
         enumStem="SimPinselFtm2ps5"
         description="FTM2 Channel 5 Pin Select" >
         <choice name="PTB5"        value="0" enum="Ptb5" pinMap="FTM2_CH5,PTB5" />
         <choice name="PTG7"        value="1" enum="Ptg7" pinMap="FTM2_CH5,PTG7" />
      </binaryOption>

      <aliasOption key="sim_sopt0_actrg" constant="false" optional="true" />
      <aliasOption key="sim_sopt0_delay" constant="false" optional="true" />
   </category>

   <category name="I2C" description="Peripheral  options and clock enable" >

      <title description="----- I2C 0 -----"/>

      <binaryOption key="sim_scgc_i2c0" condition="sim_scgc_i2c0_present"
         enabledBy="/$(_BASENAME)/enablePeripheralSupport"
         enumStem="SimScgcI2c0"
         description="I2C0 Clock Gate Control" >
         <choice name="Clock disabled"  value="0" enum="ClockDisabled" />
         <choice name="Clock enabled"   value="1" enum="ClockEnabled" />
      </binaryOption>

      <binaryOption key="sim_pinsel0_i2c0ps" condition="sim_pinsel0_i2c0ps_present"
         enabledBy="/$(_BASENAME)/enablePeripheralSupport"
         enumStem="SimPinselI2c0ps"
         description="I2C0 Pin Select" >
         <choice name="PTA3,PTA2 mapped to SCL,SDA"  value="0" enum="Pta3Pta2MappedToI2c0" pinMap="I2C0_SCL,PTA3;I2C0_SDA,PTA2" />
         <choice name="PTB7,PTB6 mapped to SCL,SDA"  value="1" enum="Ptb7Ptb6MappedToI2c0" pinMap="I2C0_SCL,PTB7;I2C0_SDA,PTB6" />
      </binaryOption>

      <binaryOption key="sim_sopt1_i2c0oinv" condition="sim_sopt1_i2c0oinv_present"
         enabledBy="/$(_BASENAME)/enablePeripheralSupport"
         enumStem="SimSoptI2c0oinv"
         toolTip="This field controls inversion of the I2C0 SDA_OUT and SCL_OUT in 4-wire mode"
         description="I2C0 Output Invert in 4-wire mode" >
         <choice name="Not inverted" value="0" enum="NotInverted" />
         <choice name="Inverted"     value="1" enum="Inverted" />
      </binaryOption>

      <binaryOption key="sim_sopt1_i2c04wen" condition="sim_sopt1_i2c04wen_present"
         enabledBy="/$(_BASENAME)/enablePeripheralSupport"
         enumStem="SimSoptI2c04wen"
         toolTip="This field controls I2C0 4-wire interface configuration.\n
                  NOTE: This field works only when SIM_PINSEL0[I2C0PS] is 0"
         description="I2C0 4-Wire Interface Enable" >
         <choice name="4-wire interface disabled"  value="0" enum="Disabled" />
         <choice name="4-wire interface enabled"   value="1" enum="Enabled"  />
      </binaryOption>

      <title description="----- I2C 1 -----"/>

      <binaryOption key="sim_scgc_i2c1" condition="sim_scgc_i2c1_present"
         enabledBy="/$(_BASENAME)/enablePeripheralSupport"
         enumStem="SimScgcI2c1"
         description="I2C1 Clock Gate Control" >
         <choice name="Clock disabled"  value="0" enum="ClockDisabled" />
         <choice name="Clock enabled"   value="1" enum="ClockEnabled" />
      </binaryOption>

      <binaryOption key="sim_pinsel1_i2c1ps" condition="sim_pinsel1_i2c1ps_present"
         enabledBy="/$(_BASENAME)/enablePeripheralSupport"
         enumStem="SimPinselI2c1ps"
         description="I2C1 Pin Select" >
         <choice name="PTE1,PTE0 mapped to SCL,SDA"  value="0" enum="Pte1Pte0MappedToI2c0" pinMap="I2C1_SCL,PTE1;I2C1_SDA,PTE0" />
         <choice name="PTH4,PTH3 mapped to SCL,SDA"  value="1" enum="Pth4Pth3MappedToI2c0" pinMap="I2C1_SCL,PTH4;I2C1_SDA,PTH3" />
      </binaryOption>
   </category>

   <category name="IRQ" description="Peripheral  options and clock enable" >
      <binaryOption key="sim_scgc_irq" condition="sim_scgc_irq_present"
         enabledBy="/$(_BASENAME)/enablePeripheralSupport"
         enumStem="SimScgcIrq"
         description="IRQ Clock Gate Control" >
         <choice name="Clock disabled"  value="0" enum="ClockDisabled" />
         <choice name="Clock enabled"   value="1" enum="ClockEnabled" />
      </binaryOption>

      <choiceOption key="sim_pinsel0_irqps" condition="sim_pinsel0_irqps_present"
         enabledBy="/$(_BASENAME)/enablePeripheralSupport"
         enumStem="SimPinselIrqps"
         toolTip="Selects the IRQ port pins"
         description="IRQ Pin Select" >
         <choice name="PTA5"        value="0" enum="Pta5" pinMap="IRQ,PTA5" />
         <choice name="PTI0"        value="1" enum="Pti0" pinMap="IRQ,PTI0" />
         <choice name="PTI1"        value="2" enum="Pti1" pinMap="IRQ,PTI1" />
         <choice name="PTI2"        value="3" enum="Pti2" pinMap="IRQ,PTI2" />
         <choice name="PTI3"        value="4" enum="Pti3" pinMap="IRQ,PTI3" />
         <choice name="PTI4"        value="5" enum="Pti4" pinMap="IRQ,PTI4" />
         <choice name="PTI5"        value="6" enum="Pti5" pinMap="IRQ,PTI5" />
         <choice name="PTI6"        value="7" enum="Pti6" pinMap="IRQ,PTI6" />
      </choiceOption>
   </category>

   <category name="KBI" description="Peripheral  options and clock enable" >
      <binaryOption key="sim_scgc_kbi0" condition="sim_scgc_kbi0_present"
         enabledBy="/$(_BASENAME)/enablePeripheralSupport"
         enumStem="SimScgcKbi0"
         description="KBI0 Clock Gate Control" >
         <choice name="Clock disabled"  value="0" enum="ClockDisabled" />
         <choice name="Clock enabled"   value="1" enum="ClockEnabled" />
      </binaryOption>

      <binaryOption key="sim_scgc_kbi1" condition="sim_scgc_kbi1_present"
         enabledBy="/$(_BASENAME)/enablePeripheralSupport"
         enumStem="SimScgcKbi1"
         description="KBI1 Clock Gate Control" >
         <choice name="Clock disabled"  value="0" enum="ClockDisabled" />
         <choice name="Clock enabled"   value="1" enum="ClockEnabled" />
      </binaryOption>
   </category>

   <category name="PIT" description="Peripheral  options and clock enable" >
      <binaryOption key="sim_scgc_pit" condition="sim_scgc_pit_present"
         enabledBy="/$(_BASENAME)/enablePeripheralSupport"
         enumStem="SimScgcPit"
         description="PIT Clock Gate Control" >
         <choice name="Clock disabled"  value="0" enum="ClockDisabled" />
         <choice name="Clock enabled"   value="1" enum="ClockEnabled" />
      </binaryOption>
   </category>

   <category name="PWT" description="Peripheral  options and clock enable" >
      <binaryOption key="sim_scgc_pwt" condition="sim_scgc_pwt_present"
         enabledBy="/$(_BASENAME)/enablePeripheralSupport"
         enumStem="SimScgcPwt"
         description="PWT Clock Gate Control" >
         <choice name="Clock disabled"  value="0" enum="ClockDisabled" />
         <choice name="Clock enabled"   value="1" enum="ClockEnabled" />
      </binaryOption>

      <binaryOption key="sim_sopt1_acpwts" condition="sim_sopt1_acpwts_present"
         enabledBy="/$(_BASENAME)/enablePeripheralSupport"
         enumStem="SimSoptAcpwts"
         toolTip="This field selects PWTIN2 input signal"
         description="PWT ACMP_OUT select" >
         <choice name="ACMP1_OUT is connected to PWTIN2"  value="0" enum="Acmp1_outIsConnectedToPwtin2" />
         <choice name="ACMP0_OUT is connected to PWTIN2"  value="1" enum="Acmp0_outIsConnectedToPwtin2" />
      </binaryOption>

      <choiceOption key="sim_sopt1_uartpwts" condition="sim_sopt1_uartpwts_present"
         enabledBy="/$(_BASENAME)/enablePeripheralSupport"
         enumStem="SimSoptUartpwts"
         toolTip="This field select PWTIN3 input signal"
         description="PWT UART RX select" >
         <choice name="UART0 RX is connected to PWTIN3"  value="0" enum="Uart0RxIsConnectedToPwtin3" />
         <choice name="UART1 RX is connected to PWTIN3"  value="1" enum="Uart1RxIsConnectedToPwtin3" />
         <choice name="UART2 RX is connected to PWTIN3"  value="2" enum="Uart2RxIsConnectedToPwtin3" />
         <choice name="Reserved"                         value="3" enum="Reserved" />
      </choiceOption>

      <binaryOption key="sim_pinsel1_pwtin0ps" condition="sim_pinsel1_pwtin0ps_present"
         enabledBy="/$(_BASENAME)/enablePeripheralSupport"
         enumStem="SimPinselPwtin0ps"
         description="PWTIN0 Pin Select" >
         <choice name="PWTIN0 on PTD5"  value="0" enum="Pwtin0OnPtd5" pinMap="PWT_IN0,PTD5" />
         <choice name="PWTIN0 on PTE2"  value="1" enum="Pwtin0OnPte2" pinMap="PWT_IN0,PTE2" />
      </binaryOption>

      <binaryOption key="sim_pinsel1_pwtin1ps" condition="sim_pinsel1_pwtin1ps_present"
         enabledBy="/$(_BASENAME)/enablePeripheralSupport"
         enumStem="SimPinselPwtin1ps"
         description="PWTIN1 Pin Select" >
         <choice name="PWTIN1 on PTB0"  value="0" enum="Pwtin1OnPtb0" pinMap="PWT_IN1,PTB0" />
         <choice name="PWTIN1 on PTH7"  value="1" enum="Pwtin1OnPth7" pinMap="PWT_IN1,PTH7" />
      </binaryOption>

      <choiceOption key="sim_pinsel0_pwtclkps" condition="sim_pinsel0_pwtclkps_present"
         enabledBy="/$(_BASENAME)/enablePeripheralSupport"
         enumStem="SimPinselPwtclkps"
         description="PWT TCLK Pin Select" >
         <choice name="Selects TCLK0 for PWT module"  value="0" enum="SelectsTclk0ForPwtModule" />
         <choice name="Selects TCLK1 for PWT module"  value="1" enum="SelectsTclk1ForPwtModule" />
         <choice name="Selects TCLK2 for PWT module"  value="2" enum="SelectsTclk2ForPwtModule" />
      </choiceOption>
   </category>

   <category name="RTC" description="Peripheral  options and clock enable" >
      <binaryOption key="sim_scgc_rtc" condition="sim_scgc_rtc_present"
         enabledBy="/$(_BASENAME)/enablePeripheralSupport"
         enumStem="SimScgcRtc"
         description="RTC Clock Gate Control" >
         <choice name="Clock disabled"  value="0" enum="ClockDisabled" />
         <choice name="Clock enabled"   value="1" enum="ClockEnabled" />
      </binaryOption>

      <binaryOption key="sim_pinsel0_rtcps" condition="sim_pinsel0_rtcps_present"
         enabledBy="/$(_BASENAME)/enablePeripheralSupport"
         enumStem="SimPinselRtcps"
         toolTip="Selects the RTC_CLKOUT port pins"
         description="RTC_CLKOUT Pin Select" >
         <choice name="PTC4"        value="0" enum="Ptc4" pinMap="RTC_CLKOUT,PTC4" />
         <choice name="PTC5"        value="1" enum="Ptc5" pinMap="RTC_CLKOUT,PTC5" />
      </binaryOption>
   </category>

   <category name="SPI" description="Peripheral  options and clock enable" >

      <title description="----- SPI 0 -----"/>

      <binaryOption key="sim_scgc_spi0" condition="sim_scgc_spi0_present"
         enabledBy="/$(_BASENAME)/enablePeripheralSupport"
         enumStem="SimScgcSpi0"
         description="SPI0 Clock Gate Control" >
         <choice name="Clock disabled"  value="0" enum="ClockDisabled" />
         <choice name="Clock enabled"   value="1" enum="ClockEnabled" />
      </binaryOption>

      <binaryOption key="sim_pinsel0_spi0ps" condition="sim_pinsel0_spi0ps_present"
         enabledBy="/$(_BASENAME)/enablePeripheralSupport"
         enumStem="SimPinselSpi0ps"
         toolTip="Selects the SPI0 Pinouts"
         description="SPI0 Pin Select" >
         <choice name="PTB2,PTB3,PTB4,PTB5 mapped to SPI0 pins"  value="0" enum="Ptb2Ptb3Ptb4Ptb5MappedToSpi0" pinMap="SPI0_SCK,PTB2;SPI0_MOSI,PTB3;SPI0_MISO,PTB4;SPI0_PCS,PTB5" />
         <choice name="PTE0,PTE1,PTE2,PTE3 mapped to SPI0 pins"  value="1" enum="Pte0Pte1Pte2Pte3MappedToSpi0" pinMap="SPI0_SCK,PTE0;SPI0_MOSI,PTE1;SPI0_MISO,PTE2;SPI0_PCS,PTE3" />
      </binaryOption>

      <title description="----- SPI 1 -----"/>

      <binaryOption key="sim_scgc_spi1" condition="sim_scgc_spi1_present"
         enabledBy="/$(_BASENAME)/enablePeripheralSupport"
         enumStem="SimScgcSpi1"
         description="SPI1 Clock Gate Control" >
         <choice name="Clock disabled"  value="0" enum="ClockDisabled" />
         <choice name="Clock enabled"   value="1" enum="ClockEnabled" />
      </binaryOption>

      <binaryOption key="sim_pinsel1_spi1ps" condition="sim_pinsel1_spi1ps_present"
         enabledBy="/$(_BASENAME)/enablePeripheralSupport"
         enumStem="SimPinselSpi1ps"
         description="SPI1 Pin Select" >
         <choice name="PTD0,PTD1,PTD2,PTD3 mapped to SPI pins"  value="0" enum="Ptd0Ptd1Ptd2Ptd3MappedToSpi1" pinMap="SPI1_SCK,PTD0;SPI1_MOSI,PTD1;SPI1_MISO,PTD2;SPI1_PCS,PTD3" />
         <choice name="PTG4,PTG5,PTG6,PTG7 mapped to SPI pins"  value="1" enum="Ptg4Ptg5Ptg6Ptg7MappedToSpi1" pinMap="SPI1_SCK,PTG4;SPI1_MOSI,PTG5;SPI1_MISO,PTG6;SPI1_PCS,PTG7" />
      </binaryOption>
   </category>

   <category name="UART" description="Peripheral  options and clock enable" >
      <title description="----- UART 0 -----"/>

      <binaryOption key="sim_scgc_uart0" condition="sim_scgc_uart0_present"
         enabledBy="/$(_BASENAME)/enablePeripheralSupport"
         enumStem="SimScgcUart0"
         description="UART0 Clock Gate Control" >
         <choice name="Clock disabled"  value="0" enum="ClockDisabled" />
         <choice name="Clock enabled"   value="1" enum="ClockEnabled" />
      </binaryOption>

      <binaryOption key="sim_pinsel0_uart0ps" condition="sim_pinsel0_uart0ps_present"
         enabledBy="/$(_BASENAME)/enablePeripheralSupport"
         enumStem="SimPinselUart0ps"
         description="UART0 Pin Select" >
         <choice name="PTB1,PTB0 mapped to Tx,Rx"  value="0" enum="MappedToPtb1Ptb0" pinMap="UART0_TX,PTB1;UART0_RX,PTB0" />
         <choice name="PTA3,PTA2 mapped to Tx,Rx"  value="1" enum="MappedToPta3Pta2" pinMap="UART0_TX,PTA3;UART0_RX,PTA2" />
      </binaryOption>

      <binaryOption key="sim_sopt0_txdme" condition="sim_sopt0_txdme_present"
         enabledBy="/$(_BASENAME)/enablePeripheralSupport"
         enumStem="SimSoptTxdme"
         toolTip="Enables the UART0_TX output modulated by FTM0 channel 0"
         description="UART0_TX Modulation Select" >
         <choice name="UART0_TX directly connected to pin"  value="0" enum="Uart0_txDirectlyConnectedToPin" />
         <choice name="UART0_TX modulated by FTM0 channel"  value="1" enum="Uart0_txModulatedByFtm0Channel" />
      </binaryOption>

      <choiceOption key="sim_sopt0_rxdfe" condition="sim_sopt0_rxdfe_present"
         enabledBy="/$(_BASENAME)/enablePeripheralSupport"
         enumStem="SimSoptRxdfe"
         toolTip="Enables the UART0_RX input to be filtered by ACMP.\n
                  When this function is enabled, any signal tagged with ACMP inputs can be regarded as UART0"
         description="UART0_RX Filter Select" >
         <choice name="UART0 module directly"  value="0" enum="Uart0ModuleDirectly" />
         <choice name="Filtered by ACMP0"      value="1" enum="FilteredByAcmp0" />
         <choice name="Filtered by ACMP1"      value="2" enum="FilteredByAcmp1" />
         <choice name="Reserved"               value="3" enum="Reserved" />
      </choiceOption>

      <title description="----- UART 1 -----"/>

      <binaryOption key="sim_scgc_uart1" condition="sim_scgc_uart1_present"
         enabledBy="/$(_BASENAME)/enablePeripheralSupport"
         enumStem="SimScgcUart1"
         description="UART1 Clock Gate Control" >
         <choice name="Clock disabled"  value="0" enum="ClockDisabled" />
         <choice name="Clock enabled"   value="1" enum="ClockEnabled" />
      </binaryOption>

      <binaryOption key="sim_pinsel1_uart1ps" condition="sim_pinsel1_uart1ps_present"
         enabledBy="/$(_BASENAME)/enablePeripheralSupport"
         enumStem="SimPinselUart1ps"
         description="UART1 Pin Select" >
         <choice name="PTC7,PTC6 mapped to Tx,Rx"  value="0" enum="MappedToPtc7Ptc6" pinMap="UART1_TX,PTC7;UART1_RX,PTC6" />
         <choice name="PTF3,PTF2 mapped to Tx,Rx"  value="1" enum="MappedToPtf3Ptf2" pinMap="UART1_TX,PTF3;UART1_RX,PTF2" />
      </binaryOption>

      <title description="----- UART 2 -----"/>

      <binaryOption key="sim_scgc_uart2" condition="sim_scgc_uart2_present"
         enabledBy="/$(_BASENAME)/enablePeripheralSupport"
         enumStem="SimScgcUart2"
         description="UART2 Clock Gate Control" >
         <choice name="Clock disabled"  value="0" enum="ClockDisabled" />
         <choice name="Clock enabled"   value="1" enum="ClockEnabled" />
      </binaryOption>

      <binaryOption key="sim_pinsel1_uart2ps" condition="sim_pinsel1_uart2ps_present"
         enabledBy="/$(_BASENAME)/enablePeripheralSupport"
         enumStem="SimPinselUart2ps"
         description="UART2 Pin Select" >
         <choice name="PTD7,PTD6 mapped to Tx,Rx"  value="0" enum="MappedToPtd7Ptd6" pinMap="UART2_TX,PTD7;UART2_RX,PTD6" />
         <choice name="PTI1,PTI0 mapped to Tx,Rx"  value="1" enum="MappedToPti1Pti0" pinMap="UART2_TX,PTI1;UART2_RX,PTI0" />
      </binaryOption>
   </category>


<!-- Grahic here -->

   <template namespace="usbdm" codeGenCondition="/ICS/enablePeripheralSupport" ><![CDATA[
      \t/*
      \t * Global clocks
      \t */
      \t\n
   ]]></template>
   <template namespace="usbdm" codeGenCondition="!/ICS/enablePeripheralSupport" ><![CDATA[
      \t/*
      \t * Global clocks constants
      \t * These are provided when minimal clock generator code is used.
      \t * They assume no clock changes are made after startup.
      \t * Values provided are from USBDM configuration.
      \t */
      \t\n
   ]]></template>

   <for keys=" clock                  : name "
      values=" system_core_clock[0]   : SystemCoreClock;
               system_bus_clock[0]    : SystemBusClock;
               system_timer_clock[0]  : SystemTimerClock
         ">
      <setTemplate namespace="usbdm" variables="%(clock)" codeGenCondition="/ICS/enablePeripheralSupport" ><![CDATA[
         \t/**
         \t *  %description
         \t *  %tooltip
         \t */
         \textern "C" uint32_t %(name);
         \t\n
      ]]></setTemplate>
      <setTemplate namespace="all" key="/SYSTEM/Clocks" variables="%(clock)" codeGenCondition="/ICS/enablePeripheralSupport" ><![CDATA[
         \t/**
         \t *  %description
         \t *  %tooltip
         \t */
         \tuint32_t %(name);
         \t\n
      ]]></setTemplate>
      <setTemplate namespace="usbdm" variables="%(clock)" codeGenCondition="!/ICS/enablePeripheralSupport" ><![CDATA[
         \t/**
         \t *  %description
         \t *  %tooltip
         \t */
         \tconstexpr uint32_t %(name) = %valueExpression;
         \t\n
      ]]></setTemplate>
   </for>

   <setTemplate variables="sim_sopt0_ftmsync" codeGenCondition="enablePeripheralSupport"
   ><![CDATA[
      \t/**
      \t * %description
      \t *
      %paramDescription
      \t */
      \tstatic void triggerFtm2() {
      \t   %register |= %mask;
      \t}\n\n
   ]]></setTemplate>

   <for keys="field:name"
        values="
      sim_sopt0_delay:Ftm2Delay;
      sim_sopt0_adhwt:Adhwt;
      sim_sopt0_clkout:SoptClkOut;
      sim_sopt0_busref:BusClockReference;
      sim_sopt0_txdme:Txdme;
      sim_sopt0_rxdce:Rxdce;
      sim_sopt0_acic:Acic;
      sim_sopt0_rtcc:Rtcc;
      sim_sopt0_rxdfe:Rxdfe;
      sim_sopt0_actrg:Actrg;
      sim_sopt0_swde:SingleWireDebugPins;
      sim_sopt0_rstpe:ResetPin;
      sim_sopt0_nmie:NonMaskableInterruptPin;
      sim_sopt1_uartpwts:Uartpwts;
      sim_sopt1_acpwts:Acpwts;
      sim_sopt1_i2c0oinv:I2c0oinv;
      sim_sopt1_i2c04wen:I2c04wen" >
      <setTemplate variables="%(field)" codeGenCondition="enablePeripheralSupport"
      ><![CDATA[
         \t/**
         \t * Set %description
         \t *
         %paramDescription
         \t */
         \tstatic void configure%(name)(%params) {
         \t   %defaultFieldExpression
         \t}\n\n
      ]]></setTemplate>
   </for>

   <for keys="field:name"
        values="
      sim_pinsel0_pwtclkps:Pwtclkps;
      sim_pinsel0_ftm2clkps:Ftm2clkps;
      sim_pinsel0_ftm1clkps:Ftm1clkps;
      sim_pinsel0_ftm0clkps:Ftm0clkps;
      sim_pinsel0_ftm1ps1:Ftm1ps1;
      sim_pinsel0_ftm1ps0:Ftm1ps0;
      sim_pinsel0_ftm0ps1:Ftm0ps1;
      sim_pinsel0_ftm0ps0:Ftm0ps0;
      sim_pinsel0_uart0ps:Uart0ps;
      sim_pinsel0_spi0ps:Spi0ps;
      sim_pinsel0_i2c0ps:I2c0ps;
      sim_pinsel0_rtcps:Rtcps;
      sim_pinsel0_irqps:Irqps;
      sim_pinsel1_mscanps:Mscanps;
      sim_pinsel1_pwtin1ps:Pwtin1ps;
      sim_pinsel1_pwtin0ps:Pwtin0ps;
      sim_pinsel1_uart2ps:Uart2ps;
      sim_pinsel1_uart1ps:Uart1ps;
      sim_pinsel1_spi1ps:Spi1ps;
      sim_pinsel1_i2c1ps:I2c1ps;
      sim_pinsel1_ftm2ps5:Ftm2ps5;
      sim_pinsel1_ftm2ps4:Ftm2ps4;
      sim_pinsel1_ftm2ps3:Ftm2ps3;
      sim_pinsel1_ftm2ps2:Ftm2ps2;
      sim_pinsel1_ftm2ps1:Ftm2ps1;
      sim_pinsel1_ftm2ps0:Ftm2ps0" >
      <setTemplate variables="%(field)" codeGenCondition="enablePeripheralSupport"
      ><![CDATA[
         \t/**
         \t * Set %description
         \t *
         %paramDescription
         \t */
         \tstatic void select%(name)Pins(%params) {
         \t   %defaultFieldExpression
         \t}\n\n
      ]]></setTemplate>
   </for>

   <for keys="field:name"
        values="
      sim_scgc_acmp0:Acmp0;
      sim_scgc_acmp1:Acmp1;
      sim_scgc_adc:Adc;
      sim_scgc_irq:Irq;
      sim_scgc_kbi1:Kbi1;
      sim_scgc_kbi0:Kbi0;
      sim_scgc_uart0:Uart0;
      sim_scgc_uart1:Uart1;
      sim_scgc_uart2:Uart2;
      sim_scgc_spi0:Spi0;
      sim_scgc_spi1:Spi1;
      sim_scgc_i2c0:I2c0;
      sim_scgc_i2c1:I2c1;
      sim_scgc_mscan:Mscan;
      sim_scgc_swd:Swd;
      sim_scgc_flash:Flash;
      sim_scgc_crc:Crc;
      sim_scgc_ftm0:Ftm0;
      sim_scgc_ftm1:Ftm1;
      sim_scgc_ftm2:Ftm2;
      sim_scgc_pwt:Pwt;
      sim_scgc_pit:Pit;
      sim_scgc_rtc:Rtc" >
      <setTemplate variables="%(field)" codeGenCondition="enablePeripheralSupport"
      ><![CDATA[
         \t/**
         \t * Set %description
         \t *
         %paramDescription
         \t */
         \tstatic void enable%(name)Clock(%params) {
         \t   %defaultFieldExpression
         \t}\n\n
      ]]></setTemplate>
   </for>

   <for keys="         field         :   name"
        values="sim_clkdiv_outdiv1[] : CoreClkDivider;
                sim_clkdiv_outdiv2[] : BusClockDivider;
                sim_clkdiv_outdiv3[] : TimerClockDivider" >
      <setTemplate variables="%(field)" codeGenCondition="enablePeripheralSupport"
      ><![CDATA[
         \t/**
         \t * Set %description
         \t *
         %paramDescription
         \t */
         \tstatic void set%(name)(%params) {
         \t   %defaultFieldExpression
         \t}\n\n
      ]]></setTemplate>
   </for>

<!--   ========== SIM Init class =============================== -->

   <template key="init_description" namespace="all"  codeGenCondition="enablePeripheralSupport">
   <![CDATA[
      \t/**
      \t * Class used to do initialisation of the $(_Class)
      \t *
      \t * This class has a templated constructor that accepts various values.
      \t *
      \t * @note This constructor may be used to create a const instance in Flash
      \t *
      \t * Example:
      \t * @code
      \t * static const $(_Class)::Init init {
      \t *
      \t *   // Setup values
      \t *
      \t *   0 , // FTM2 Trigger Delay
      \t *   SimSoptAdhwt_RtcOverflow , // ADC Hardware Trigger Source - RTC overflow
      \t *   SimSoptRefClock_BusClockDividedBy16 , // BUS Clock Output select - Bus clock divided by 16
      \t *   SimSoptTxdme_Uart0_txDirectlyConnectedToPin , // UART0_TX Modulation Select - UART0_TX directly connected to pin
      \t *   SimSoptRxdce_NotConnected , // UART0_RX Capture on FTM0 channel 1 - Not connected
      \t *   SimSoptAcic_Acmp0_outIsNotConnected , // Analog Comparator on FTM1 input channel 0 - ACMP0_OUT is not connected
      \t *   SimSoptRtcc_RtcNotConnected , // Real-Time Counter on FTM1 input channel 1 - RTC not connected
      \t *   SimSopt0Rxdfe_Uart0ModuleDirectly , // UART0_RX Filter Select - UART0 module directly
      \t *   SimSoptActrg_Acmp0_out , // ACMP Trigger FTM2 selection - ACMP0_OUT
      \t *   SimSWDEnable_Pta4Ptc4AsSwdPins , // Single Wire Debug Port Pin Enable - PTA4, PTC4 mapped as SWD pins
      \t *   SimResetEnable_Pta5AsReset , // RESET Pin Enable - PTA5 mapped as RESET
      \t *   SimNmiEnable_Ptb4AsNmi , // NMI Pin Enable - PTB4 mapped as NMI
      \t *   SimSoptUartpwts_Uart0RxIsConnectedToPwtin3 , // PWT UART RX select - UART0 RX is connected to PWTIN3
      \t *   SimSoptAcpwts_Acmp1_outIsConnectedToPwtin2 , // PWT ACMP_OUT select - ACMP1_OUT is connected to PWTIN2
      \t *   SimSoptI2c0oinv_NotInverted , // I2C0 Output Invert in 4-wire mode - Not inverted
      \t *   SimSoptI2c04wen_Disabled , // I2C0 4-Wire Interface Enable - 4-wire interface disabled
      \t *   SimPinselPwtclkps_SelectsTclk0ForPwtModule , // PWT TCLK Pin Select - Selects TCLK0 for PWT module
      \t *   SimPinselFtm2clkps_SelectsTclk0ForFtm2Module , // FTM2 TCLK Pin Select - Selects TCLK0 for FTM2 module
      \t *   SimPinselFtm1clkps_SelectsTclk0ForFtm1Module , // FTM1 TCLK Pin Select - Selects TCLK0 for FTM1 module
      \t *   SimPinselFtm0clkps_SelectsTclk0ForFtm0Module , // FTM0 TCLK Pin Select - Selects TCLK0 for FTM0 module
      \t *   SimPinselFtm1ps1_Ptc5 , // FTM1 channel 1 Pin Select - PTC5
      \t *   SimPinselFtm1ps0_Ptc4 , // FTM1 channel 0 Pin Select - PTC4
      \t *   SimPinselFtm0ps1_Pta1 , // FTM0 channel 1 Pin Select - PTA1
      \t *   SimPinselFtm0ps0_Pta0 , // FTM0 channel 0 Pin Select - PTA0
      \t *   SimPinselUart0ps_MappedToPtb1Ptb0 , // UART0 Pin Select - PTB1,PTB0 mapped to Tx,Rx
      \t *   SimPinselSpi0ps_Ptb2Ptb3Ptb4Ptb5MappedToSpi0 , // SPI0 Pin Select - PTB2,PTB3,PTB4,PTB5 mapped to SPI0 pins
      \t *   SimPinselI2c0ps_Pta3Pta2MappedToI2c0 , // I2C0 Pin Select - PTA3,PTA2 mapped to SCL,SDA
      \t *   SimPinselRtcps_Ptc4 , // RTC_CLKOUT Pin Select - PTC4
      \t *   SimPinselIrqps_Pta5 , // IRQ Pin Select - PTA5
      \t *   SimPinselMscanps_Can_txOnPtc7_Can_rxOnPtc6 , // CAN Pin Select - CAN_TX on PTC7, CAN_RX on PTC6
      \t *   SimPinselPwtin1ps_Pwtin1OnPtb0 , // PWTIN1 Pin Select - PWTIN1 on PTB0
      \t *   SimPinselPwtin0ps_Pwtin0OnPtd5 , // PWTIN0 Pin Select - PWTIN0 on PTD5
      \t *   SimPinselUart2ps_MappedToPtd7Ptd6 , // UART2 Pin Select - PTD7,PTD6 mapped to Tx,Rx
      \t *   SimPinselUart1ps_MappedToPtc7Ptc6 , // UART1 Pin Select - PTC7,PTC6 mapped to Tx,Rx
      \t *   SimPinselSpi1ps_Ptd0Ptd1Ptd2Ptd3MappedToSpi1 , // SPI1 Pin Select - PTD0,PTD1,PTD2,PTD3 mapped to SPI pins
      \t *   SimPinselI2c1ps_Pte1Pte0MappedToI2c0 , // I2C1 Pin Select - PTE1,PTE0 mapped to SCL,SDA
      \t *   SimPinselFtm2ps5_Ptb5 , // FTM2 Channel 5 Pin Select - PTB5
      \t *   SimPinselFtm2ps4_Ptb4 , // FTM2 Channel 4 Pin Select - PTB4
      \t *   SimPinselFtm2ps3_Ptc3 , // FTM2 Channel 3 Pin Select - PTC3
      \t *   SimPinselFtm2ps2_Ptc2 , // FTM2 Channel 2 Pin Select - PTC2
      \t *   SimPinselFtm2ps1_Ptc1 , // FTM2 Channel 1 Pin Select - PTC1
      \t *   SimPinselFtm2ps0_Ptc0 , // FTM2 Channel 0 Pin Select - PTC0
      \t *   SimScgcAcmp1_ClockDisabled , // ACMP1 Clock Gate Control - Clock disabled
      \t *   SimScgcAcmp0_ClockDisabled , // ACMP0 Clock Gate Control - Clock disabled
      \t *   SimScgcAdc_ClockDisabled , // ADC Clock Gate Control - Clock disabled
      \t *   SimScgcIrq_ClockDisabled , // IRQ Clock Gate Control - Clock disabled
      \t *   SimScgcKbi1_ClockDisabled , // KBI1 Clock Gate Control - Clock disabled
      \t *   SimScgcKbi0_ClockDisabled , // KBI0 Clock Gate Control - Clock disabled
      \t *   SimScgcUart2_ClockDisabled , // UART2 Clock Gate Control - Clock disabled
      \t *   SimScgcUart1_ClockDisabled , // UART1 Clock Gate Control - Clock disabled
      \t *   SimScgcUart0_ClockDisabled , // UART0 Clock Gate Control - Clock disabled
      \t *   SimScgcSpi1_ClockDisabled , // SPI1 Clock Gate Control - Clock disabled
      \t *   SimScgcSpi0_ClockDisabled , // SPI0 Clock Gate Control - Clock disabled
      \t *   SimScgcI2c1_ClockDisabled , // I2C1 Clock Gate Control - Clock disabled
      \t *   SimScgcI2c0_ClockDisabled , // I2C0 Clock Gate Control - Clock disabled
      \t *   SimScgcMscan_ClockDisabled , // CAN Clock Gate Control - Clock disabled
      \t *   SimScgcSwd_ClockEnabled , // SWD Clock Gate Control - Clock enabled
      \t *   SimScgcFlash_ClockEnabled , // FLASH Clock Gate Control - Clock enabled
      \t *   SimScgcCrc_ClockDisabled , // CRC Clock Gate Control - Clock disabled
      \t *   SimScgcFtm2_ClockDisabled , // FTM2 Clock Gate Control - Clock disabled
      \t *   SimScgcFtm1_ClockDisabled , // FTM1 Clock Gate Control - Clock disabled
      \t *   SimScgcFtm0_ClockDisabled , // FTM0 Clock Gate Control - Clock disabled
      \t *   SimScgcPwt_ClockDisabled , // PWT Clock Gate Control - Clock disabled
      \t *   SimScgcPit_ClockDisabled , // PIT Clock Gate Control - Clock disabled
      \t *   SimScgcRtc_ClockDisabled,  // RTC Clock Gate Control - Clock disabled
      \t * };
      \t *
      \t * // Initialise $(_Class) from values specified above
      \t * $(_Class)::configure(init)
      \t * @endcode
      \t */
   ]]>
   </template>

   <template namespace="usbdm" codeGenCondition="enablePeripheralSupport" >
   <![CDATA[
      class $(_Class)BasicInfo {
      \t
      public:
      \t\n
   ]]>
   </template>

   <template namespace="usbdm" codeGenCondition="enablePeripheralSupport" >
   <![CDATA[
      $(init_description)
      \tclass Init {
      \t
      \tpublic:
      \t   /**
      \t    * Copy Constructor
      \t    */
      \t   constexpr Init(const Init &other) = default;
      \t
      \t   /**
      \t    * Default Constructor
      \t    */
      \t   constexpr Init() = default;
      \t\n
   ]]>
   </template>

<!--   Member variables -->

   <initialValueTemplate namespace="usbdm" codeGenCondition="enablePeripheralSupport"
      variables="sim_sopt0_delay,sim_sopt0_adhwt,sim_sopt0_clkoe,sim_sopt0_busref,sim_sopt0_txdme,sim_sopt0_rxdce,sim_sopt0_acic,sim_sopt0_rtcc,sim_sopt0_rxdfe,sim_sopt0_actrg,sim_sopt0_swde,sim_sopt0_rstpe,sim_sopt0_nmie"
   ><![CDATA[
      \t   /// System Options Register 0
      \t   uint32_t %registerName = 0;\n\n
   ]]></initialValueTemplate>

   <initialValueTemplate namespace="usbdm" codeGenCondition="enablePeripheralSupport"
      variables="sim_sopt1_uartpwts,sim_sopt1_acpwts,sim_sopt1_i2c0oinv,sim_sopt1_i2c04wen"
   ><![CDATA[
      \t   /// System Options Register 1
      \t   uint32_t %registerName = 0;\n\n
   ]]></initialValueTemplate>

   <initialValueTemplate namespace="usbdm" codeGenCondition="enablePeripheralSupport"
      variables="sim_pinsel0_pwtclkps,sim_pinsel0_ftm2clkps,sim_pinsel0_ftm1clkps,sim_pinsel0_ftm0clkps,sim_pinsel0_ftm1ps1,sim_pinsel0_ftm1ps0,sim_pinsel0_ftm0ps1,sim_pinsel0_ftm0ps0,sim_pinsel0_uart0ps,sim_pinsel0_spi0ps,sim_pinsel0_i2c0ps,sim_pinsel0_rtcps,sim_pinsel0_irqps"
   ><![CDATA[
      \t   /// Pin Selection Register 0
      \t   uint32_t %registerName = 0;\n\n
   ]]></initialValueTemplate>

   <initialValueTemplate namespace="usbdm" codeGenCondition="enablePeripheralSupport"
      variables="sim_pinsel1_mscanps,sim_pinsel1_pwtin1ps,sim_pinsel1_pwtin0ps,sim_pinsel1_uart2ps,sim_pinsel1_uart1ps,sim_pinsel1_spi1ps,sim_pinsel1_i2c1ps,sim_pinsel1_ftm2ps5,sim_pinsel1_ftm2ps4,sim_pinsel1_ftm2ps3,sim_pinsel1_ftm2ps2,sim_pinsel1_ftm2ps1,sim_pinsel1_ftm2ps0"
   ><![CDATA[
      \t   /// Pin Selection Register 1
      \t   uint32_t %registerName = 0;\n\n
   ]]></initialValueTemplate>

   <initialValueTemplate namespace="usbdm" codeGenCondition="enablePeripheralSupport"
      variables="sim_scgc_acmp1,sim_scgc_acmp0,sim_scgc_adc,sim_scgc_irq,sim_scgc_kbi1,sim_scgc_kbi0,sim_scgc_uart2,sim_scgc_uart1,sim_scgc_uart0,sim_scgc_spi1,sim_scgc_spi0,sim_scgc_i2c1,sim_scgc_i2c0,sim_scgc_mscan,sim_scgc_swd,sim_scgc_flash,sim_scgc_crc,sim_scgc_ftm2,sim_scgc_ftm1,sim_scgc_ftm0,sim_scgc_pwt,sim_scgc_pit,sim_scgc_rtc"
   ><![CDATA[
      \t   /// System Clock Gating Control Register
      \t   uint32_t %registerName = 0;\n\n
   ]]></initialValueTemplate>

<!--   Constructors -->

   <for keys="r"
      values="
            sim_sopt0_adhwt;
            sim_sopt0_clkoe;
            sim_sopt0_busref;
            sim_sopt0_txdme;
            sim_sopt0_rxdce;
            sim_sopt0_acic;
            sim_sopt0_rtcc;
            sim_sopt0_rxdfe;
            sim_sopt0_actrg;
            sim_sopt0_swde;
            sim_sopt0_rstpe;
            sim_sopt0_nmie;
            sim_sopt1_uartpwts;
            sim_sopt1_acpwts;
            sim_sopt1_i2c0oinv;
            sim_sopt1_i2c04wen;
            sim_pinsel0_pwtclkps;
            sim_pinsel0_ftm2clkps;
            sim_pinsel0_ftm1clkps;
            sim_pinsel0_ftm0clkps;
            sim_pinsel0_ftm1ps1;
            sim_pinsel0_ftm1ps0;
            sim_pinsel0_ftm0ps1;
            sim_pinsel0_ftm0ps0;
            sim_pinsel0_uart0ps;
            sim_pinsel0_spi0ps;
            sim_pinsel0_i2c0ps;
            sim_pinsel0_rtcps;
            sim_pinsel0_irqps;
            sim_pinsel1_mscanps;
            sim_pinsel1_pwtin1ps;
            sim_pinsel1_pwtin0ps;
            sim_pinsel1_uart2ps;
            sim_pinsel1_uart1ps;
            sim_pinsel1_spi1ps;
            sim_pinsel1_i2c1ps;
            sim_pinsel1_ftm2ps5;
            sim_pinsel1_ftm2ps4;
            sim_pinsel1_ftm2ps3;
            sim_pinsel1_ftm2ps2;
            sim_pinsel1_ftm2ps1;
            sim_pinsel1_ftm2ps0;
            sim_scgc_acmp1;
            sim_scgc_acmp0;
            sim_scgc_adc;
            sim_scgc_irq;
            sim_scgc_kbi1;
            sim_scgc_kbi0;
            sim_scgc_uart2;
            sim_scgc_uart1;
            sim_scgc_uart0;
            sim_scgc_spi1;
            sim_scgc_spi0;
            sim_scgc_i2c1;
            sim_scgc_i2c0;
            sim_scgc_mscan;
            sim_scgc_swd;
            sim_scgc_flash;
            sim_scgc_crc;
            sim_scgc_ftm2;
            sim_scgc_ftm1;
            sim_scgc_ftm0;
            sim_scgc_pwt;
            sim_scgc_pit;
            sim_scgc_rtc
            " >
      <setTemplate namespace="usbdm" codeGenCondition="enablePeripheralSupport"
         variables="%(r)"
         linePadding="xxx" >
      <![CDATA[
         \t   /**
         \t    * Constructor for %description
         \t    *
         \t    * @tparam   Types
         \t    * @param    rest
         \t    *
         %comments
         \t    */
         \t   template <typename... Types>
         \t   constexpr Init(%params, Types... rest) : Init(rest...) {
         \t
         \t      %registerName = (%registerName&~%mask) | %paramExpression;
         \t   }
         \t\n
      ]]>
      </setTemplate>
   </for>

<!--   Constructors -->

   <setTemplate namespace="usbdm" codeGenCondition="enablePeripheralSupport"
      variables="sim_sopt0_delay"
      linePadding="xxx" >
   <![CDATA[
      \t   /**
      \t    * Constructor for %description
      \t    *
      \t    * @tparam   Types
      \t    * @param    rest
      \t    *
      \t    * @param value %description
      \t    */
      \t   template <typename... Types>
      \t   constexpr Init(%paramType0 value, Types... rest) : Init(rest...) {
      \t
      \t      %registerName = (%registerName&~%mask0) | %macro0(value);
      \t   }
      \t\n
   ]]>
   </setTemplate>

<!--   Default Initialisation value -->

   <initialValueTemplate codeGenCondition="enablePeripheralSupport"
      separator=","
      terminator=","
      variables="
            sim_sopt0_delay,
            sim_sopt0_adhwt,
            sim_sopt0_clkoe,
            sim_sopt0_busref,
            sim_sopt0_txdme,
            sim_sopt0_rxdce,
            sim_sopt0_acic,
            sim_sopt0_rtcc,
            sim_sopt0_rxdfe,
            sim_sopt0_actrg,
            sim_sopt0_swde,
            sim_sopt0_rstpe,
            sim_sopt0_nmie,
            sim_sopt1_uartpwts,
            sim_sopt1_acpwts,
            sim_sopt1_i2c0oinv,
            sim_sopt1_i2c04wen,
            sim_pinsel0_pwtclkps,
            sim_pinsel0_ftm2clkps,
            sim_pinsel0_ftm1clkps,
            sim_pinsel0_ftm0clkps,
            sim_pinsel0_ftm1ps1,
            sim_pinsel0_ftm1ps0,
            sim_pinsel0_ftm0ps1,
            sim_pinsel0_ftm0ps0,
            sim_pinsel0_uart0ps,
            sim_pinsel0_spi0ps,
            sim_pinsel0_i2c0ps,
            sim_pinsel0_rtcps,
            sim_pinsel0_irqps,
            sim_pinsel1_mscanps,
            sim_pinsel1_pwtin1ps,
            sim_pinsel1_pwtin0ps,
            sim_pinsel1_uart2ps,
            sim_pinsel1_uart1ps,
            sim_pinsel1_spi1ps,
            sim_pinsel1_i2c1ps,
            sim_pinsel1_ftm2ps5,
            sim_pinsel1_ftm2ps4,
            sim_pinsel1_ftm2ps3,
            sim_pinsel1_ftm2ps2,
            sim_pinsel1_ftm2ps1,
            sim_pinsel1_ftm2ps0,
            sim_scgc_acmp1,
            sim_scgc_acmp0,
            sim_scgc_adc,
            sim_scgc_irq,
            sim_scgc_kbi1,
            sim_scgc_kbi0,
            sim_scgc_uart2,
            sim_scgc_uart1,
            sim_scgc_uart0,
            sim_scgc_spi1,
            sim_scgc_spi0,
            sim_scgc_i2c1,
            sim_scgc_i2c0,
            sim_scgc_mscan,
            sim_scgc_swd,
            sim_scgc_flash,
            sim_scgc_crc,
            sim_scgc_ftm2,
            sim_scgc_ftm1,
            sim_scgc_ftm0,
            sim_scgc_pwt,
            sim_scgc_pit,
            sim_scgc_rtc
         "
   ><![CDATA[
      $(init_description)
      \ttypedef $(_Class)BasicInfo::Init Init;
      \t
      \t/**
      \t * Default initialisation value for $(_Class)
      \t * This value is created from Configure.usbdmProject settings
      \t */
      \tstatic constexpr Init DefaultInitValue = {%initExpression
      \t};\n\n
   ]]></initialValueTemplate>

   <template codeGenCondition="/ICS/enablePeripheralSupport" ><![CDATA[
      \t/**
      \t * Update system clock values
      \t *
      \t * @param systemClock Frequency of clock provided to system clock dividers
      \t */
      \tstatic void updateSystemClocks(unsigned systemClock) {
      \t
      \t   SystemCoreClock    = systemClock/(((SIM->CLKDIV&SIM_CLKDIV_OUTDIV1_MASK)>>SIM_CLKDIV_OUTDIV1_SHIFT)+1);
      \t   SystemBusClock     = SystemCoreClock/(((SIM->CLKDIV&SIM_CLKDIV_OUTDIV2_MASK)>>SIM_CLKDIV_OUTDIV2_SHIFT)+1);
      \t   SystemTimerClock   = systemClock/(((SIM->CLKDIV&SIM_CLKDIV_OUTDIV3_MASK)>>SIM_CLKDIV_OUTDIV3_SHIFT)+1);
      \t}\n\n
   ]]></template>

   <template  codeGenCondition="enablePeripheralSupport" >
      <![CDATA[
      \t/**
      \t * Configure $(_BASENAME)
      \t *
      \t * This only includes SOPT0, SOPT1, PINSEL0, PINSEL1 and SCGC
      \t */
      \tstatic void configure(const Init &configValue) {
      \t   sim->SOPT0           = configValue.sopt0;
      \t   sim->SOPT1           = configValue.sopt1;
      \t   sim->PINSEL0         = configValue.pinsel0;
      \t   sim->PINSEL1         = configValue.pinsel1;
      \t   sim->SCGC            = configValue.scgc;
      \t}
      \t
      \t/**
      \t * Default initialisation for $(_BASENAME)
      \t */
      \tstatic void defaultConfigure() {
      \t   configure(DefaultInitValue);
      \t}
      \t\n
   ]]>
   </template>

   <template namespace="usbdm" codeGenCondition="enablePeripheralSupport" >
      <![CDATA[
      \t}; // $(_Class)::BasicInfo::Init\n\n
   ]]>
   </template>

   <template namespace="usbdm" codeGenCondition="enablePeripheralSupport" >
      <![CDATA[
      }; // $(_Class)::BasicInfo\n\n
   ]]>
   </template>

   <!-- ************* Common ****************** -->

   <validate
      class="net.sourceforge.usbdm.deviceEditor.validators.PeripheralValidator" >
   </validate>

   <template key="/ICS/ClockStartupAfter" namespace="all" codeGenCondition="configurePeripheralInStartUp" >
   <![CDATA[
      \tUSBDM::$(_Class)Info::defaultConfigure();
   ]]></template>

   <template key="DefaultInitValue" namespace="all" ><![CDATA[
      \tstatic void initRegs() {
      \t
      \t   defaultConfigure();
      \t};\n\n
   ]]></template>

   <xi:include href="_simFiles-MKE.xml" />

   <initialValueTemplate variables="sim_clkdiv_outdiv1[0],sim_clkdiv_outdiv2[0],sim_clkdiv_outdiv3[0],sim_clkdiv_outdiv4[0]"><![CDATA[
      \t/** Reset clock divider value if clock not fully configured */
      \tstatic constexpr uint32_t sim_clkdiv = %initExpression;
      \t\n
   ]]></initialValueTemplate>

   <for keys="n" values=";0;1;2;3;4;5;6" >
      <template variables="system_uart%(n)_fixedclocksource[%(n)]" ><![CDATA[
         \t/**
         \t * Get UART%(n) input clock frequency
         \t *
         \t * @return Clock frequency in Hz
         \t */
         \tstatic inline uint32_t getUart%(n)Clock() {
         \t   return $(system_uart%(n)_fixedclocksource[%(n)].code[]);
         \t}\n\n
      ]]></template>
   </for>

</peripheralPage>
