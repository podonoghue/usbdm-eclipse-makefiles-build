<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE peripheralPage SYSTEM "_menu.dtd" >
<!-- trng_def.xml -->

<peripheralPage xmlns:xi="http://www.w3.org/2001/XInclude" name="_instance" description="True Random Number Generator">

   <constant key="irq_parameters"            type="String"  value="&quot;&quot;"  />
   <constant key="irq_dummy_parameters"      type="String"  value="&quot;&quot;"  />
   <constant key="irq_call"                  type="String"  value="&quot;&quot;"  />
   <constant key="generateDefault"           type="Boolean" value="false"         />
   <constant key="configureInStartupDefault" type="Boolean" value="false"         />
   <xi:include href="enablePeripheral.xml"  />
   <title />

<!--
    * General substitutions
    *  $(_NAME)         => e.g FTM2 => FTM2
    *  $(_name)         => e.g FTM2 => ftm2
    *  $(_BASENAME)     => e.g FTM0 => FTM, PTA => PT
    *  $(_basename)     => e.g FTM0 => ftm, PTA => pt
    *  $(_Class)        => e.g FTM2 => Ftm2
    *  $(_Baseclass)    => e.g FTM0 => Ftm
    *  $(_instance)     => e.g FTM0 => 0, PTA => A
-->

<!--
    * Template substitutions
    *
    * <li>%paramExpression            Parameters ORed together e.g. adcPretrigger|adcRefSel
    * <li>%valueExpression            Numeric variable value e.g. 0x3
    * <li>%symbolicExpression[index]  Symbolic formatted value e.g. AdcCompare_Disabled
    * <li>%variable[index]            Variable name /ADC0/adc_sc2_acfe
    * <li>%macro[index](value)        C register macro e.g. ADC_SC2_ACFGT(value)
    * <li>%description[index]         Description from controlVar e.g. Compare Function Enable
    * <li>%shortDescription[index]    Short description from controlVar e.g. Compare Function Enable
    * <li>%tooltip[index]             Tool-tip from controlVar e.g. Each bit disables the GPIO function
    * <li>%params                     Formatted parameter list for function
    * <li>%paramDescription[index]    Tool-tip from controlVar formatted as param description @param ...
    * <li>%paramType[index]           Based on typeName e.g. AdcCompare (or uint32_t)
    * <li>%paramName[index]           Based on typeName with lower-case first letter adcCompare
    * <li>%fieldAssignment            Expression of form '%register <= (%register & ~%mask)|%paramExpression
    * <li>%maskingExpression          Based on variable etc. Similar to (%register&%mask)
    * <li>%mask[index]                From &lt;mask&gt; or deduced from &lt;controlVarName&gt; e.g. "SIM_SOPT_REG_MASK" (_MASK is added)
    * <li>%register[index]            Register associated with variable e.g. adc->APCTL1
    * <li>%registerName[index]        Name of corresponding register (lowercase for Init()) e.g. apctl1
    * <li>%registerNAME[index]        Name of corresponding register (uppercase for Init()) e.g. APCTL1 <br><br>
-->

   <!-- ************* Class Declaration ****************** -->
   <constant key="_class_declaration" type="String"
      value="&quot;$(_Class)Info : public $(_Structname)BasicInfo&quot;" />

   <!-- ************* MCTL ****************** -->

   <binaryOption key="trng_mctl_prgm" condition="trng_mctl_prgm_present"
      enabledBy="enablePeripheralSupport"
      typeName="TrngMode"
      toolTip="No Entropy value will be generated while the TRNG is in Program Mode.\n
               Note that different RNG registers are accessible at the same address \n
               depending on whether PRGM is set to 1 or 0."
      description="Programming Mode Select" >
      <choice name="Program mode"  value="1" enum="Program" />
      <choice name="Run mode"      value="0" enum="Run"     isDefault="true" />
   </binaryOption >

   <binaryOption key="trng_mctl_tstop_ok" condition="trng_mctl_tstop_ok_present"
      hidden="true"
      typeName="TrngStopOk"
      toolTip="Software should check that this bit is a 1 before transitioning TRNG0 to low power mode\n
               The TRNG turns on the free-running ring oscillator whenever new entropy is being \n
               generated. If the TRNG clock is stopped while the TRNG ring oscillator is running,\n
               the oscillator will continue running even though the TRNG0 clock is stopped.\n
               TSTOP_OK is asserted when the TRNG ring oscillator is not running and may be stopped."
      description="Indicates the Trng may be stopped" >
      <choice name="Busy and may not be stopped"  value="0" enum="Busy" />
      <choice name="Idle and may be stopped"      value="1" enum="Idle" />
   </binaryOption >

   <binaryOption key="trng_mctl_err" condition="trng_mctl_err_present"
      enabledBy="enablePeripheralSupport"
      typeName="TrngStatus"
      toolTip="Write-1 to clear error status"
      description="Error status" >
      <choice name="No action"    value="0" enum="NoError" />
      <choice name="Clear error"  value="1" enum="Error"   isDefault="true" />
   </binaryOption >

   <binaryOption key="trng_mctl_tst_out" condition="trng_mctl_tst_out_present"
      hidden="true"
      typeName="TrngTestOutput"
      toolTip="Read only: Test point inside ring oscillator"
      description="Test point for oscillator" >
      <choice name="Low value"                           value="0" enum="Low" />
      <choice name="High value"                          value="1" enum="High" />
   </binaryOption >

   <binaryOption key="trng_mctl_ent_val" condition="trng_mctl_ent_val_present"
      hidden="true"
      typeName="TrngEntropy"
      toolTip="Read only: Entropy Valid.\n
               Will assert only if TRNG ACC bit is set, and then after an entropy value is generated.\n
               Will be cleared at most one (1) bus clock cycle after reading the TRNG0_ENT15 register."
      description="Entropy Valid" >
      <choice name="No entropy values available"        value="0" enum="Busy" />
      <choice name="New entropy values available"       value="1" enum="ValuesAvailable" />
   </binaryOption >

   <binaryOption key="trng_mctl_fct_val" condition="trng_mctl_fct_val_present"
      hidden="true"
      typeName="TrngMFrequencyCountStatus"
      toolTip="Read only: Frequency Count Valid.\n
               Indicates that a valid frequency count may be read from TRNG0_FRQCNT."
      description="Frequency Count Valid" >
      <choice name="No count available"            value="0" enum="Busy" />
      <choice name="Count available"               value="1" enum="Available" />
   </binaryOption >

   <binaryOption key="trng_mctl_fct_fail" condition="trng_mctl_fct_fail_present"
      hidden="true"
      typeName="TrngMctlFctFail"
      toolTip="Read Only: Indicates the frequency counter has detected a failure.\n
               This may be due to improper programming of the TRNG0_FRQMAX and/or\n
               TRNG0_FRQMIN registers, or a hardware failure in the ring oscillator.\n
               This error may be cleared by writing a 1 to the ERR bit."
      description="Frequency Count Fail" >
      <choice name="No failure" value="0" enum="OK" />
      <choice name="Failure"    value="1" enum="Failed" />
   </binaryOption >

   <binaryOption key="trng_mctl_rst_def" condition="trng_mctl_rst_def_present"
      enabledBy="enablePeripheralSupport"
      typeName="TrngReset"
      toolTip="Writing a 1 to this bit clears various TRNG registers, and bits within registers,\n
               to their default state. This bit is writable only if PRGM bit is 1, or PRGM bit\n
               is being written to 1 simultaneously to writing this bit.\n
               Reading this bit always produces a 0."
      description="Reset to Defaults" >
      <choice name="No action"  value="0" enum="NoAction" />
      <choice name="Reset"      value="1" enum="Apply"    isDefault="true" />
   </binaryOption >

   <binaryOption key="trng_mctl_trng_acc" condition="trng_mctl_trng_acc_present"
      enabledBy="enablePeripheralSupport"
      typeName="TrngAccessMode"
      toolTip="When set to 1, the TRNG will generate an Entropy value that can be read via the\n
               TRNG0_ENT0-TRNG0_ENT15 registers.\n
               The Entropy value may be read once the ENT VAL bit is asserted."
      description="Access Mode" >
      <choice name="Stopped"  value="0" enum="Stopped"  />
      <choice name="Generate" value="1" enum="Generate" isDefault="true" />
   </binaryOption >

   <choiceOption key="trng_mctl_samp_mode" condition="trng_mctl_samp_mode_present"
      hidden="true"
      typeName="TrngMctlSampMode"
      toolTip="Determines the method of sampling the ring oscillator while generating the Entropy value.\n
               This field is writable only if PRGM bit is 1, or PRGM bit is being written to 1\n
               simultaneously with writing this field.\n
               This field is cleared to the POR default value by writing the RST_DEF bit to 1."
      description="Sample Mode" >
      <choice name="Von Neumann data -> Entropy shifter and Statistical Checker"          value="0" enum="VonNeumann" />
      <choice name="Raw data -> Entropy shifter and Statistical Checker"                  value="1" enum="RawData"    isDefault="true" />
      <choice name="Von Neumann data -> Entropy shifter. Raw data -> Statistical Checker" value="2" enum="VonNeumannToEntropy_RawDataToChecker" />
   </choiceOption >

   <choiceOption key="trng_mctl_osc_div" condition="trng_mctl_osc_div_present"
      hidden="true"
      typeName="TrngOscDivide"
      toolTip="Determines the amount of dividing done to the ring oscillator before it is used by the TRNG.\n
               This field is writable only if PRGM bit is 1, or PRGM bit is being written to 1\n
               simultaneously to writing this field.\n
               This field is cleared to the default POR value by writing the RST_DEF bit to 1."
      description="Oscillator Divide" >
      <choice name="Ring oscillator with no divide"  value="0" enum="DivBy1" />
      <choice name="Ring oscillator divided-by-2"    value="1" enum="DivBy2" />
      <choice name="Ring oscillator divided-by-4"    value="2" enum="DivBy4" />
      <choice name="Ring oscillator divided-by-8"    value="3" enum="DivBy8" />
   </choiceOption >

   <binaryOption key="trng_mctl_for_sclk" condition="trng_mctl_for_sclk_present"
      hidden="true"
      typeName="TrngForceClock"
      toolTip="Forces use of the system clock operate the TRNG, instead of the ring oscillator.\n
               This is for test use only, and indeterminate results may occur.\n
               This bit is writable only if PRGM bit is 1, or PRGM bit is being written to 1\n
               simultaneously to writing this bit. This bit is cleared by writing the RST_DEF bit to 1."
      description="Force System Clock" >
      <choice name="Normal mode - Ring oscillator" value="0" enum="Normal" />
      <choice name="Test mode - System clock"      value="1" enum="Test" />
   </binaryOption>

   <!-- ************* ENT ****************** -->

   <intOption key="trng_ent_ent" condition="trng_ent_ent_present"
      hidden="true"
      typeName="uint32_t"
      description="Entropy Value"
      toolTip="Will be non-zero only if TRNG0_MCTL[PRGM] = 0 Run Mode) and TRNG0_MCTL[ENT_VAL] = 1 (Entropy Valid).\n
               The most significant bits of the entropy are read from the lowest offset, and the least significant\n
               bits are read from the highest offset.\n
               Note that reading the highest offset also clears the entire entropy value, and starts a new entropy generation."
   />

   <!-- ************* INT_CTRL ****************** -->

   <binaryOption key="trng_int_ctrl_frq_ct_fail" condition="trng_int_ctrl_frq_ct_fail_present"
      register="int_ctrl"
      hidden="true"
      typeName="TrngCountErrorClear"
      toolTip=""
      description="Clear Counter error" >
      <choice name="Inactive" value="0" enum="Clear" />
      <choice name="Active"   value="1" enum="Active" />
   </binaryOption >

   <binaryOption key="trng_int_ctrl_ent_val" condition="trng_int_ctrl_ent_val_present"
      register="int_ctrl"
      hidden="true"
      typeName="TrngEntropyAvailableClear"
      toolTip=""
      description="Clear entropy valid" >
      <choice name="Inactive" value="0" enum="Clear" />
      <choice name="Active"   value="1" enum="Active" />
   </binaryOption >

   <binaryOption key="trng_int_ctrl_hw_err" condition="trng_int_ctrl_hw_err_present"
      register="int_ctrl"
      hidden="true"
      typeName="TrngHardwareErrorClear"
      toolTip=""
      description="Clear Hardware error" >
      <choice name="Inactive" value="0" enum="Clear" />
      <choice name="Active"   value="1" enum="Active" />
   </binaryOption >

   <!-- ************* INT_MASK ****************** -->

   <binaryOption key="trng_int_mask_frq_ct_fail" condition="trng_int_mask_frq_ct_fail_present"
      enabledBy="enablePeripheralSupport"
      register="int_mask"
      typeName="TrngCountErrorAction"
      toolTip="This enables an interrupt when the frequency counter has detected a failure"
      description="Counter error action" >
      <choice name="No Action"  value="0" enum="None"      />
      <choice name="Interrupt"  value="1" enum="Interrupt" />
   </binaryOption >

   <binaryOption key="trng_int_mask_ent_val" condition="trng_int_mask_ent_val_present"
      enabledBy="enablePeripheralSupport"
      register="int_mask"
      typeName="TrngEntropyAvailableAction"
      toolTip="This enables an interrupt when TRNG ACC bit is set (Entropy value is available)"
      description="Entropy available action" >
      <choice name="No Action"  value="0" enum="None"    />
      <choice name="Interrupt"  value="1" enum="Interrupt" />
   </binaryOption >

   <binaryOption key="trng_int_mask_hw_err" condition="trng_int_mask_hw_err_present"
      enabledBy="enablePeripheralSupport"
      register="int_mask"
      typeName="TrngHardwareErrorAction"
      toolTip="This enables an interrupt when a hardware error occurs"
      description="Hardware error action" >
      <choice name="No Action"  value="0" enum="None"      />
      <choice name="Interrupt"  value="1" enum="Interrupt" />
   </binaryOption >

   <!-- ************* INT_STATUS ****************** -->

   <binaryOption key="trng_int_status_frq_ct_fail" condition="trng_int_status_frq_ct_fail_present"
      hidden="true"
      register="int_status"
      typeName="TrngCounterStatus"
      toolTip="The frequency counter has detected a failure.\n
               This may be due to improper programming of the TRNG0_FRQMAX and/or \n
               TRNG0_FRQMIN registers, or a hardware failure FRQ_CT_FAIL in the ring oscillator.\n
               Read only"
      description="Frequency Counter Failure" >
      <choice name="No errors"        value="0" enum="NoErrors" />
      <choice name="Counter failure"  value="1" enum="Failure" />
   </binaryOption >

   <binaryOption key="trng_int_status_ent_val" condition="trng_int_status_ent_val_present"
      hidden="true"
      register="int_status"
      typeName="TrngEntropyStatus"
      toolTip="Will assert only if TRNG ACC bit is set, and then after an entropy value is generated.\n
               Will be cleared when TRNG0_ENT15 is read. (TRNG0_ENT0 through TRNG0_ENT14 should \n
               be read before reading TRNG0_ENT15).\n
               Read Only"
      description="Entropy Valid" >
      <choice name="Busy - Entropy value read is invalid"  value="0" enum="Busy" />
      <choice name="Complete - Entropy is valid if read"   value="1" enum="EntropyAvailable" />
   </binaryOption >

   <binaryOption key="trng_int_status_hw_err" condition="trng_int_status_hw_err_present"
      hidden="true"
      register="int_status"
      typeName="TrngErrorStatus"
      toolTip="Any HW error in the TRNG will trigger this interrupt.\n
               Read Only"
      description="Error status" >
      <choice name="No error"        value="0" enum="NoError" />
      <choice name="Error detected"  value="1" enum="ErrorDetected" />
   </binaryOption >


<!-- Setters and getters -->

   <for keys="field                    : set   : get   : clear : genCode                 : name"
        values="
         trng_mctl_prgm                : true  : true  : false : true                    : Mode;
         trng_mctl_tstop_ok            : false : true  : false : true                    : StopOk;
         trng_mctl_err                 : false : true  : true  : true                    : Error;
         trng_mctl_tst_out             : false : true  : false : enableGettersAndSetters : MctlTstOut;
         trng_mctl_fct_val             : false : true  : false : enableGettersAndSetters : MctlFctVal;
         trng_mctl_fct_fail            : false : true  : false : enableGettersAndSetters : MctlFctFail;
         trng_mctl_for_sclk            : true  : true  : false : enableGettersAndSetters : MctlForSclk;
         trng_mctl_rst_def             : true  : false : false : true                    : SoftwareReset;
         trng_mctl_trng_acc            : true  : true  : false : true                    : Access;
         trng_mctl_unused              : true  : true  : false : enableGettersAndSetters : MctlUnused;
         trng_mctl_osc_div             : true  : true  : false : enableGettersAndSetters : MctlOscDiv;
         trng_mctl_samp_mode           : true  : true  : false : enableGettersAndSetters : MctlSampMode;
         trng_scmisc_rty_ct            : true  : true  : false : enableGettersAndSetters : ScmiscRtyCt;
         trng_scmisc_lrun_max          : true  : true  : false : enableGettersAndSetters : ScmiscLrunMax;
         trng_pkrrng_pkr_rng           : true  : true  : false : enableGettersAndSetters : PkrrngPkrRng;
         trng_pkrmax_pkr_max           : true  : true  : false : enableGettersAndSetters : PkrmaxPkrMax;
         trng_pkrsq_pkr_sq             : false : true  : false : enableGettersAndSetters : PkrsqPkrSq;
         trng_sdctl_ent_dly            : true  : true  : false : enableGettersAndSetters : SdctlEntDly;
         trng_sdctl_samp_size          : true  : true  : false : enableGettersAndSetters : SdctlSampSize;
         trng_sblim_sb_lim             : true  : true  : false : enableGettersAndSetters : SblimSbLim;
         trng_totsam_tot_sam           : false : true  : false : enableGettersAndSetters : TotsamTotSam;
         trng_frqmin_frq_min           : true  : true  : false : enableGettersAndSetters : FrqminFrqMin;
         trng_frqcnt_frq_ct            : false : true  : false : enableGettersAndSetters : FrqcntFrqCt;
         trng_frqmax_frq_max           : true  : true  : false : enableGettersAndSetters : FrqmaxFrqMax;
         trng_scmc_mono_ct             : false : true  : false : enableGettersAndSetters : ScmcMonoCt;
         trng_scml_mono_rng            : true  : true  : false : enableGettersAndSetters : ScmlMonoRng;
         trng_scml_mono_max            : true  : true  : false : enableGettersAndSetters : ScmlMonoMax;
         trng_scr1c_r1_1_ct            : false : true  : false : enableGettersAndSetters : Scr1cR11Ct;
         trng_scr1c_r1_0_ct            : false : true  : false : enableGettersAndSetters : Scr1cR10Ct;
         trng_scr1l_run1_rng           : true  : true  : false : enableGettersAndSetters : Scr1lRun1Rng;
         trng_scr1l_run1_max           : true  : true  : false : enableGettersAndSetters : Scr1lRun1Max;
         trng_scr2c_r2_1_ct            : false : true  : false : enableGettersAndSetters : Scr2cR21Ct;
         trng_scr2c_r2_0_ct            : false : true  : false : enableGettersAndSetters : Scr2cR20Ct;
         trng_scr2l_run2_rng           : true  : true  : false : enableGettersAndSetters : Scr2lRun2Rng;
         trng_scr2l_run2_max           : true  : true  : false : enableGettersAndSetters : Scr2lRun2Max;
         trng_scr3c_r3_1_ct            : false : true  : false : enableGettersAndSetters : Scr3cR31Ct;
         trng_scr3c_r3_0_ct            : false : true  : false : enableGettersAndSetters : Scr3cR30Ct;
         trng_scr3l_run3_rng           : true  : true  : false : enableGettersAndSetters : Scr3lRun3Rng;
         trng_scr3l_run3_max           : true  : true  : false : enableGettersAndSetters : Scr3lRun3Max;
         trng_scr4c_r4_1_ct            : false : true  : false : enableGettersAndSetters : Scr4cR41Ct;
         trng_scr4c_r4_0_ct            : false : true  : false : enableGettersAndSetters : Scr4cR40Ct;
         trng_scr4l_run4_rng           : true  : true  : false : enableGettersAndSetters : Scr4lRun4Rng;
         trng_scr4l_run4_max           : true  : true  : false : enableGettersAndSetters : Scr4lRun4Max;
         trng_scr5c_r5_1_ct            : false : true  : false : enableGettersAndSetters : Scr5cR51Ct;
         trng_scr5c_r5_0_ct            : false : true  : false : enableGettersAndSetters : Scr5cR50Ct;
         trng_scr5l_run5_rng           : true  : true  : false : enableGettersAndSetters : Scr5lRun5Rng;
         trng_scr5l_run5_max           : true  : true  : false : enableGettersAndSetters : Scr5lRun5Max;
         trng_scr6pc_r6p_1_ct          : false : true  : false : enableGettersAndSetters : Scr6pcR6p1Ct;
         trng_scr6pc_r6p_0_ct          : false : true  : false : enableGettersAndSetters : Scr6pcR6p0Ct;
         trng_scr6pl_run6p_rng         : true  : true  : false : enableGettersAndSetters : Scr6plRun6pRng;
         trng_scr6pl_run6p_max         : true  : true  : false : enableGettersAndSetters : Scr6plRun6pMax;
         trng_status_retry_ct          : false : true  : false : enableGettersAndSetters : StatusRetryCt;
         trng_status_tfmb              : false : true  : false : enableGettersAndSetters : StatusTfmb;
         trng_status_tfp               : false : true  : false : enableGettersAndSetters : StatusTfp;
         trng_status_tflr              : false : true  : false : enableGettersAndSetters : StatusTflr;
         trng_status_tfsb              : false : true  : false : enableGettersAndSetters : StatusTfsb;
         trng_status_tf6pbr1           : false : true  : false : enableGettersAndSetters : StatusTf6pbr1;
         trng_status_tf6pbr0           : false : true  : false : enableGettersAndSetters : StatusTf6pbr0;
         trng_status_tf5br1            : false : true  : false : enableGettersAndSetters : StatusTf5br1;
         trng_status_tf5br0            : false : true  : false : enableGettersAndSetters : StatusTf5br0;
         trng_status_tf4br1            : false : true  : false : enableGettersAndSetters : StatusTf4br1;
         trng_status_tf4br0            : false : true  : false : enableGettersAndSetters : StatusTf4br0;
         trng_status_tf3br1            : false : true  : false : enableGettersAndSetters : StatusTf3br1;
         trng_status_tf3br0            : false : true  : false : enableGettersAndSetters : StatusTf3br0;
         trng_status_tf2br1            : false : true  : false : enableGettersAndSetters : StatusTf2br1;
         trng_status_tf2br0            : false : true  : false : enableGettersAndSetters : StatusTf2br0;
         trng_status_tf1br1            : false : true  : false : enableGettersAndSetters : StatusTf1br1;
         trng_status_tf1br0            : false : true  : false : enableGettersAndSetters : StatusTf1br0;
         trng_pkrcnt10_pkr_1_ct        : false : true  : false : enableGettersAndSetters : Pkrcnt10Pkr1Ct;
         trng_pkrcnt10_pkr_0_ct        : false : true  : false : enableGettersAndSetters : Pkrcnt10Pkr0Ct;
         trng_pkrcnt32_pkr_3_ct        : false : true  : false : enableGettersAndSetters : Pkrcnt32Pkr3Ct;
         trng_pkrcnt32_pkr_2_ct        : false : true  : false : enableGettersAndSetters : Pkrcnt32Pkr2Ct;
         trng_pkrcnt54_pkr_5_ct        : false : true  : false : enableGettersAndSetters : Pkrcnt54Pkr5Ct;
         trng_pkrcnt54_pkr_4_ct        : false : true  : false : enableGettersAndSetters : Pkrcnt54Pkr4Ct;
         trng_pkrcnt76_pkr_7_ct        : false : true  : false : enableGettersAndSetters : Pkrcnt76Pkr7Ct;
         trng_pkrcnt76_pkr_6_ct        : false : true  : false : enableGettersAndSetters : Pkrcnt76Pkr6Ct;
         trng_pkrcnt98_pkr_9_ct        : false : true  : false : enableGettersAndSetters : Pkrcnt98Pkr9Ct;
         trng_pkrcnt98_pkr_8_ct        : false : true  : false : enableGettersAndSetters : Pkrcnt98Pkr8Ct;
         trng_pkrcntba_pkr_b_ct        : false : true  : false : enableGettersAndSetters : PkrcntbaPkrBCt;
         trng_pkrcntba_pkr_a_ct        : false : true  : false : enableGettersAndSetters : PkrcntbaPkrACt;
         trng_pkrcntdc_pkr_d_ct        : false : true  : false : enableGettersAndSetters : PkrcntdcPkrDCt;
         trng_pkrcntdc_pkr_c_ct        : false : true  : false : enableGettersAndSetters : PkrcntdcPkrCCt;
         trng_pkrcntfe_pkr_f_ct        : false : true  : false : enableGettersAndSetters : PkrcntfePkrFCt;
         trng_pkrcntfe_pkr_e_ct        : false : true  : false : enableGettersAndSetters : PkrcntfePkrECt;
         trng_sec_cfg_sk_val           : true  : true  : false : enableGettersAndSetters : SecCfgSkVal;
         trng_sec_cfg_no_prgm          : true  : true  : false : enableGettersAndSetters : SecCfgNoPrgm;
         trng_sec_cfg_sh0              : true  : true  : false : enableGettersAndSetters : SecCfgSh0;
         trng_int_ctrl_frq_ct_fail     : false : false : true  : true                    : CountErrorClear;
         trng_int_ctrl_ent_val         : false : false : true  : enableGettersAndSetters : EntropyAvailableClear;
         trng_int_ctrl_hw_err          : false : false : true  : true                    : HardwareErrorClear;
         trng_int_mask_frq_ct_fail     : true  : true  : false : enableGettersAndSetters : CountErrorAction;
         trng_int_mask_ent_val         : true  : true  : false : enableGettersAndSetters : EntropyAvailableAction;
         trng_int_mask_hw_err          : true  : true  : false : enableGettersAndSetters : HardwareErrorAction;
         trng_int_status_frq_ct_fail   : false : true  : false : true                    : CounterStatus;
         trng_int_status_ent_val       : false : true  : false : true                    : EntropyStatus;
         trng_int_status_hw_err        : false : true  : false : true                    : ErrorStatus;
         trng_vid1_ip_id               : false : true  : false : enableGettersAndSetters : Vid1IpId;
         trng_vid1_maj_rev             : false : true  : false : enableGettersAndSetters : Vid1MajRev;
         trng_vid1_min_rev             : false : true  : false : enableGettersAndSetters : Vid1MinRev;
         trng_vid2_era                 : false : true  : false : enableGettersAndSetters : Vid2Era;
         trng_vid2_intg_opt            : false : true  : false : enableGettersAndSetters : Vid2IntgOpt;
         trng_vid2_eco_rev             : false : true  : false : enableGettersAndSetters : Vid2EcoRev;
         trng_vid2_config_opt          : false : true  : false : enableGettersAndSetters : Vid2ConfigOpt" >
      <variableTemplate variables="%(field)" condition="%(set)" codeGenCondition="%(genCode)"
      ><![CDATA[
         \t/**
         \t * Set %description
         \t *
         %paramDescription
         \t */
         \tstatic void set%(name)(%params) {
         \t   %fieldAssignment;
         \t}
         \t\n
      ]]></variableTemplate>
      <variableTemplate variables="%(field)" condition="%(get)" codeGenCondition="%(genCode)"
      ><![CDATA[
         \t/**
         \t * Get %description
         \t *
         \t * @return %tooltip
         \t */
         \tstatic %paramType get%(name)() {
         \t   return %paramType(%register&%mask);
         \t}
         \t\n
      ]]></variableTemplate>
      <variableTemplate variables="%(field)" condition="%(clear)" codeGenCondition="%(genCode)"
      ><![CDATA[
         \t/**
         \t * Clear %description
         \t */
         \tstatic void clear%(name)() {
         \t   %register = %register|%mask;
         \t}
         \t\n
      ]]></variableTemplate>
   </for>

   <variableTemplate variables="trng_ent_ent" codeGenCondition="enablePeripheralSupport"
   ><![CDATA[
      \t/**
      \t * Get %description
      \t *
      \t * @return %tooltip
      \t */
      \tstatic %paramType getEntropy(int index) {
      \t   return %paramType(%register[index]);
      \t}
      \t\n
   ]]></variableTemplate>

   <!--   ========== class $(_Structname)BasicInfo =============================== -->

   <template namespace="baseClass" ><![CDATA[
      class $(_Structname)BasicInfo {

      public:\n
   ]]></template>


   <!--   ========== Interrupt handling =============================== -->

   <template namespace="baseClass" codeGenCondition="/$(_STRUCTNAME)/generateSharedIrqInfo" >
   <![CDATA[
      \t/**
      \t * Type for Random Number Generator Accelerator call back function.
      \t */
      \ttypedef void (*CallbackFunction)();
      \t
      \t/**
      \t * Callback to catch unhandled interrupt
      \t */
      \tstatic void unhandledCallback($(irq_dummy_parameters)) {
      \t   setAndCheckErrorCode(E_NO_HANDLER);
      \t}
      \t\n
   ]]>
   </template>

   <template codeGenCondition="irqHandlingMethod" >
   <![CDATA[
      \t/** Callback function for Random Number Generator Accelerator */
      \tstatic CallbackFunction callbackFunction;
      \t
      \t/**
      \t * Random Number Generator Accelerator interrupt handler
      \t * Passes control to call-back function
      \t */
      \tstatic void irqHandler() {
      \t
      \t   // Execute call-back
      \t   callbackFunction($(irq_call));
      \t}
      \t
      \t/**
      \t * Set Random Number Generator Accelerator callback function.
      \t *
      \t * @param      $(_basename)Callback Callback function to execute on interrupt
      \t *                             Use nullptr to remove callback.
      \t */
      \tstatic void setCallback(CallbackFunction $(_basename)Callback) {
      \t   if ($(_basename)Callback == nullptr) {
      \t      $(_basename)Callback = (CallbackFunction)unhandledCallback;
      \t   }
      \t   // Allow either no handler set yet or removing handler
      \t   usbdm_assert(
      \t         ((void*)callbackFunction == (void*)unhandledCallback) ||
      \t         ((void*)$(_basename)Callback == (void*)unhandledCallback),
      \t         "Handler already set");
      \t   callbackFunction = $(_basename)Callback;
      \t}
      \t
      \t\n
   ]]>
   </template>

   <template key="/HARDWARE/StaticObjects" codeGenCondition="irqHandlingMethod" >
   <![CDATA[
      \t/**
      \t * Callback function for Random Number Generator Accelerator
      \t */
      \t$(_Class)Info::CallbackFunction $(_Class)Info::callbackFunction = (CallbackFunction)$(_Class)Info::unhandledCallback;
      \t
      \t\n
   ]]>
   </template>

   <!--   ========== TRNG Init class =============================== -->

   <template namespace="baseClass" codeGenCondition="/$(_STRUCTNAME)/generateSharedInfo" >
   <![CDATA[
      \t/**
      \t * Class used to do initialisation of the $(_Baseclass)
      \t *
      \t * This class has a templated constructor that accepts various values.
      \t * Parameters available may vary with device - see $(_Class)::DefaultInitValue for relevant example.
      \t * Omitted parameters default to zero (disabled) or unchanged if initialiser is provided as last parameter.
      \t *
      \t * @note This constructor may be used to create a const instance in Flash
      \t *
      \t * Example:
      \t * @code
      \t * ///
      \t * /// $(_NAME) call-back
      \t * ///
      \t * /// @param status  Status reflecting active inputs
      \t * ///
      \t * void $(_name)Callback(ErrorCode ec) {
      \t *    ....
      \t * }
      \t *
      \t * static const $(_Class)::Init $(_name)Init {
      \t *
      \t *   // Setup values
      \t *   TrngMode_Run ,                    // Programming Mode Select - Run mode
      \t *   TrngReset_Apply ,                 // Reset to Defaults - Software reset
      \t *   TrngAccessMode_Generate ,         // Access Mode - Generate
      \t *   TrngCountErrorAction_Interrupt ,  // Counter error action - Interrupt
      \t *   TrngEntropyAvailableAction_None , // Entropy available action - No Action
      \t *   TrngHardwareErrorAction_None,     // Hardware error action - No Action
      \t *
      \t *   $(_name)Callback,                    // Call-back to execute on event - call-back function name
      \t *   NvicPriority_Low,                 // Priority for interrupt - Low
      \t *
      \t *   // Optional base value to start with (must be last parameter)
      \t *   $(_Class)::DefaultInitValue   // Used as base value modified by above
      \t * };
      \t *
      \t * // Initialise $(_Class) from values specified above
      \t * $(_Class)::configure($(_name)Init)
      \t * @endcode
      \t */
      \tclass Init {
      \t
      \tpublic:
      \t   /**
      \t    * Copy Constructor
      \t    */
      \t   constexpr Init(const Init &other) = default;
      \t
      \t   /**
      \t    * Default Constructor
      \t    */
      \t   constexpr Init() = default;
      \t\n
   ]]>
   </template>

   <!--   Member variables -->

   <template namespace="baseClass" codeGenCondition="/$(_STRUCTNAME)/generateSharedIrqInfo" >
   <![CDATA[
      \t   /// Random Number Generator Accelerator
      \t   CallbackFunction callbackFunction = nullptr;\n\n
   ]]></template>

   <variableTemplate namespace="baseClass" codeGenCondition="/$(_STRUCTNAME)/generateSharedInfo"
      variables="trng_mctl_prgm,trng_mctl_err,trng_mctl_for_sclk,trng_mctl_rst_def,trng_mctl_trng_acc,trng_mctl_unused,trng_mctl_osc_div,trng_mctl_samp_mode"
   ><![CDATA[
      \t   /// Miscellaneous Control Register
      \t   uint32_t %registerName = 0;\n\n
   ]]></variableTemplate>

   <variableTemplate namespace="baseClass" codeGenCondition="/$(_STRUCTNAME)/generateSharedInfo"
      variables="trng_scmisc_rty_ct,trng_scmisc_lrun_max"
   ><![CDATA[
      \t   /// Statistical Check Miscellaneous Register
      \t   uint32_t %registerName = 0;\n\n
   ]]></variableTemplate>

   <variableTemplate namespace="baseClass" codeGenCondition="/$(_STRUCTNAME)/generateSharedInfo"
      variables="trng_pkrrng_pkr_rng"
   ><![CDATA[
      \t   /// Poker Range Register
      \t   uint32_t %registerName = 0;\n\n
   ]]></variableTemplate>

   <variableTemplate namespace="baseClass" codeGenCondition="/$(_STRUCTNAME)/generateSharedInfo"
      variables="trng_pkrmax_pkr_max"
   ><![CDATA[
      \t   /// Poker Maximum Limit Register
      \t   uint32_t %registerName = 0;\n\n
   ]]></variableTemplate>

   <variableTemplate namespace="baseClass" codeGenCondition="/$(_STRUCTNAME)/generateSharedInfo"
      variables="trng_sdctl_ent_dly,trng_sdctl_samp_size"
   ><![CDATA[
      \t   /// Seed Control Register
      \t   uint32_t %registerName = 0;\n\n
   ]]></variableTemplate>

   <variableTemplate namespace="baseClass" codeGenCondition="/$(_STRUCTNAME)/generateSharedInfo"
      variables="trng_sblim_sb_lim"
   ><![CDATA[
      \t   /// Sparse Bit Limit Register
      \t   uint32_t %registerName = 0;\n\n
   ]]></variableTemplate>

   <variableTemplate namespace="baseClass" codeGenCondition="/$(_STRUCTNAME)/generateSharedInfo"
      variables="trng_frqmin_frq_min"
   ><![CDATA[
      \t   /// Frequency Count Minimum Limit Register
      \t   uint32_t %registerName = 0;\n\n
   ]]></variableTemplate>

   <variableTemplate namespace="baseClass" codeGenCondition="/$(_STRUCTNAME)/generateSharedInfo"
      variables="trng_frqmax_frq_max"
   ><![CDATA[
      \t   /// Frequency Count Maximum Limit Register
      \t   uint32_t %registerName = 0;\n\n
   ]]></variableTemplate>

   <variableTemplate namespace="baseClass" codeGenCondition="/$(_STRUCTNAME)/generateSharedInfo"
      variables="trng_scml_mono_rng,trng_scml_mono_max"
   ><![CDATA[
      \t   /// Statistical Check Monobit Limit Register
      \t   uint32_t %registerName = 0;\n\n
   ]]></variableTemplate>

   <variableTemplate namespace="baseClass" codeGenCondition="/$(_STRUCTNAME)/generateSharedInfo"
      variables="trng_scr1l_run1_rng,trng_scr1l_run1_max"
   ><![CDATA[
      \t   /// Statistical Check Run Length 1 Limit Register
      \t   uint32_t %registerName = 0;\n\n
   ]]></variableTemplate>

   <variableTemplate namespace="baseClass" codeGenCondition="/$(_STRUCTNAME)/generateSharedInfo"
      variables="trng_scr2l_run2_rng,trng_scr2l_run2_max"
   ><![CDATA[
      \t   /// Statistical Check Run Length 2 Limit Register
      \t   uint32_t %registerName = 0;\n\n
   ]]></variableTemplate>

   <variableTemplate namespace="baseClass" codeGenCondition="/$(_STRUCTNAME)/generateSharedInfo"
      variables="trng_scr3l_run3_rng,trng_scr3l_run3_max"
   ><![CDATA[
      \t   /// Statistical Check Run Length 3 Limit Register
      \t   uint32_t %registerName = 0;\n\n
   ]]></variableTemplate>

   <variableTemplate namespace="baseClass" codeGenCondition="/$(_STRUCTNAME)/generateSharedInfo"
      variables="trng_scr4l_run4_rng,trng_scr4l_run4_max"
   ><![CDATA[
      \t   /// Statistical Check Run Length 4 Limit Register
      \t   uint32_t %registerName = 0;\n\n
   ]]></variableTemplate>

   <variableTemplate namespace="baseClass" codeGenCondition="/$(_STRUCTNAME)/generateSharedInfo"
      variables="trng_scr5l_run5_rng,trng_scr5l_run5_max"
   ><![CDATA[
      \t   /// Statistical Check Run Length 5 Limit Register
      \t   uint32_t %registerName = 0;\n\n
   ]]></variableTemplate>

   <variableTemplate namespace="baseClass" codeGenCondition="/$(_STRUCTNAME)/generateSharedInfo"
      variables="trng_scr6pl_run6p_rng,trng_scr6pl_run6p_max"
   ><![CDATA[
      \t   /// Statistical Check Run Length 6+ Limit Register
      \t   uint32_t %registerName = 0;\n\n
   ]]></variableTemplate>

   <variableTemplate namespace="baseClass" codeGenCondition="/$(_STRUCTNAME)/generateSharedInfo"
      variables="trng_sec_cfg_sk_val,trng_sec_cfg_no_prgm,trng_sec_cfg_sh0"
   ><![CDATA[
      \t   /// Security Configuration Register
      \t   uint32_t %registerName = 0;\n\n
   ]]></variableTemplate>

   <variableTemplate namespace="baseClass" codeGenCondition="/$(_STRUCTNAME)/generateSharedInfo"
      variables="trng_int_mask_frq_ct_fail,trng_int_mask_ent_val,trng_int_mask_hw_err"
   ><![CDATA[
      \t   /// Mask Register
      \t   uint32_t %registerName = 0;\n\n
   ]]></variableTemplate>

   <variableTemplate namespace="baseClass" codeGenCondition="/$(_STRUCTNAME)/generateSharedIrqInfo"
      variables="/PCR/nvic_irqLevel,irqLevel"
   ><![CDATA[
      \t   /// %description
      \t   %paramType %registerName0 = %defaultValue;
      \t\n
   ]]></variableTemplate>

   <!-- Init Constructors -->

   <template namespace="baseClass" codeGenCondition="/$(_STRUCTNAME)/generateSharedIrqInfo"
      linePadding="xxx"
   ><![CDATA[
      \t   /**
      \t    * Constructor for Random Number Generator Accelerator
      \t    *
      \t    * @tparam   Types
      \t    * @param    rest
      \t    *
      \t    * @param callbackFunction   Random Number Generator Accelerator call-back
      \t    */
      \t   template <typename... Types>
      \t   constexpr Init(CallbackFunction callbackFunction, Types... rest) : Init(rest...) {
      \t
      \t      this->callbackFunction = callbackFunction;
      \t   }\n\n
   ]]></template>

   <variableTemplate namespace="baseClass" codeGenCondition="/$(_STRUCTNAME)/generateSharedIrqInfo"
      variables="/PCR/nvic_irqLevel"
      linePadding="xxx"
   ><![CDATA[
      \t   /**
      \t    * Constructor for %description
      \t    *
      \t    * @tparam   Types
      \t    * @param    rest
      \t    *
      %paramDescription
      \t    */
      \t   template <typename... Types>
      \t   constexpr Init(%params, Types... rest) : Init(rest...) {
      \t
      \t      %registerName = %paramExpression;
      \t   }\n\n
   ]]></variableTemplate>

   <for keys="r"
      values="
            trng_mctl_prgm;
            trng_mctl_err;
            trng_mctl_for_sclk;
            trng_mctl_rst_def;
            trng_mctl_trng_acc;
            trng_mctl_osc_div;
            trng_mctl_samp_mode;
            trng_int_mask_frq_ct_fail;
            trng_int_mask_ent_val;
            trng_int_mask_hw_err
            " >
      <variableTemplate namespace="baseClass" codeGenCondition="/$(_STRUCTNAME)/generateSharedInfo"
         variables="%(r)"
         linePadding="xxx" >
      <![CDATA[
         \t   /**
         \t    * Constructor for %description
         \t    *
         \t    * @tparam   Types
         \t    * @param    rest
         \t    *
         %paramDescription
         \t    */
         \t   template <typename... Types>
         \t   constexpr Init(%params, Types... rest) : Init(rest...) {
         \t
         \t      %registerName = (%registerName&~%mask) | %paramExpression;
         \t   }
         \t\n
      ]]>
      </variableTemplate>
   </for>


<!--   Default Initialisation value -->

   <variableTemplate codeGenCondition="enablePeripheralSupport"
      separator=","
      terminator=","
      variables="
            trng_mctl_prgm,
            trng_mctl_rst_def,
            trng_mctl_trng_acc,
            trng_int_mask_frq_ct_fail,
            trng_int_mask_ent_val,
            trng_int_mask_hw_err
         "
   ><![CDATA[
      \t/**
      \t * Default initialisation value for $(_Class)
      \t * This value is created from Configure.usbdmProject settings
      \t */
      \tstatic constexpr Init DefaultInitValue = {%initExpression
      \t};
      \t\n
   ]]></variableTemplate>

<!--   Configure methods -->

   <template key="/$(_BASENAME)/InitMethod" discardRepeats="true" codeGenCondition="/$(_STRUCTNAME)/generateSharedInfo" >
   <![CDATA[
      \t/**
      \t * Configure with default settings.
      \t * Configuration determined from Configure.usbdmProject
      \t */
      \tstatic inline void defaultConfigure() {
      \t
      \t   // Update settings
      \t   configure(Info::DefaultInitValue);
      \t}
      \t
      \t/**
      \t * Configure $(_BASENAME) from values specified in init
      \t *
      \t * @param init Class containing initialisation values
      \t */
      \tstatic void configure(const typename Info::Init &init) {
      \t
      \t   // Enable peripheral clock
      \t   Info::enableClock();
      \t
      \t   // Do software reset if requested
      \t   trng->MCTL = init.mctl&TRNG_MCTL_RST_DEF_MASK;
      \t\n
   ]]></template>
   <template key="/$(_BASENAME)/InitMethod" discardRepeats="true" codeGenCondition="/$(_STRUCTNAME)/generateSharedIrqInfo"
             condition="/$(_STRUCTNAME)/generateSharedIrqInfo" >   <![CDATA[
      \t   if constexpr (Info::irqHandlerInstalled) {
      \t      // Only set call-backs if feature enabled
      \t      Info::setCallback(init.callbackFunction);
      \t      Info::enableNvicInterrupts(init.irqlevel);
      \t   }
      \t\n
   ]]></template>
   <template key="/$(_BASENAME)/InitMethod" discardRepeats="true" codeGenCondition="/$(_STRUCTNAME)/generateSharedInfo" >
   <![CDATA[
      \t   trng->INT_MASK  = init.int_mask;
      \t   trng->MCTL      = init.mctl;
      \t}
      \t\n
   ]]>
   </template>

   <template namespace="baseClass" codeGenCondition="/$(_STRUCTNAME)/generateSharedInfo" >
   <![CDATA[
      \t}; // class $(_Structname)BasicInfo::Init
      \t\n
   ]]>
   </template>

   <template namespace="baseClass" >
   <![CDATA[
      }; // class $(_Structname)BasicInfo
      \t\n
   ]]>
   </template>

   <!-- ************* Common ****************** -->

   <template key="/$(_BASENAME)/declarations" codeGenCondition="enablePeripheralSupport" >
   <![CDATA[
      \t/**
      \t * Class representing $(_NAME)
      \t */
      \tclass $(_Class) : public $(_Baseclass)Base_T<$(_Class)Info> {};
      \t\n
   ]]>
   </template>

   <validate
      class="net.sourceforge.usbdm.deviceEditor.validators.PeripheralValidator" >
   </validate>

   <projectActionList id="trng_files" >
      <copy source="Project_Headers/trng.h"         target="Project_Headers/trng.h"          overwrite="true" derived="true" />
   </projectActionList>

   <!-- ************* Startup ****************** -->

   <template key="/SYSTEM/Includes" condition="configurePeripheralInStartUp" codeGenCondition="configurePeripheralInStartUp" >
      <![CDATA[#include "$(_basename).h"\n
   ]]></template>

   <template key="/SYSTEM/Startup" condition="configurePeripheralInStartUp" codeGenCondition="configurePeripheralInStartUp" >
   <![CDATA[
      \t/*  Initialise $(_Class) */
      \tUSBDM::$(_Class)::defaultConfigure();\n
   ]]></template>

   <!-- ************* SIM configuration ****************** -->
   <category name="Advanced" description="SIM configuration">
      <aliasOption key="=_scgc_clock" locked="false" condition="_scgc_clock" />
      <for keys="v" values="=/SIM/$(_Class)ExternalItems" condition="/SIM/$(_Class)ExternalItems" >
         <aliasOption key="/SIM/%(v)"           optional="true" locked="false" />
      </for>
   </category>
   <deleteVariables variables="_scgc_clock"  mustExist="false" />

</peripheralPage>
